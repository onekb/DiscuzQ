/*! For license information please see ../../../LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12,8,9,14,17,21,26,27,28],{1:function(e,t,n){n(16);var r=n(787);n(25),e.exports={data:function(){var e=this;return{errorCodeHandler:{default:{model_not_found:function(){return e.$router.replace("/error")},not_authenticated:function(){return e.$router.push("/pages/user/login")}},thread:{permission_denied:function(){return e.$router.replace("/error")}}}}},methods:{handleError:function(e){var t=arguments,n=this;return r(regeneratorRuntime.mark((function r(){var o,c,l,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:"",c=e.response.data.errors,!(Array.isArray(c)&&c.length>0)){r.next=13;break}if(l=c[0].code,d=c[0].detail&&c[0].detail.length>0?c[0].detail[0]:c[0].code,f=c[0].detail&&c[0].detail.length>0?c[0].detail[0]:n.$t("core.".concat(d)),"site_closed"!==c[0].code){r.next=10;break}return r.next=9,n.siteClose(c);case 9:return r.abrupt("return",r.sent);case 10:n.$message.error(f),n.errorCodeHandler.default[l]&&n.errorCodeHandler.default[l](),o&&n.errorCodeHandler[o][l]&&n.errorCodeHandler[o][l]();case 13:case"end":return r.stop()}}),r)})))()},siteClose:function(e){var t=this;return r(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("forum/setError",{code:e[0].code,detail:e[0].detail&&e[0].detail.length>0&&e[0].detail[0]});case 3:return n.next=5,t.$router.push("/pages/site/close");case 5:n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}}},111:function(e,t,n){"use strict";n(25);t.a=function(e){return e[0]===e[1]&&"0"===e[0]&&(e=e.substr(0,1)),e.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,"")}},112:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return picture}));var r='<svg xmlns="http://www.w3.org/2000/svg" width="19.816" height="19.816" viewBox="0 0 19.816 19.816">\n   <path id="路径_965" data-name="路径 965" d="M67.565,65.963c0,6.137,4.261,9.862,10.128,9.862a14.524,14.524,0,0,0,4.032-.512c.66-.2.87-.54.87-.884a.611.611,0,0,0-.64-.606,1.994,1.994,0,0,0-.449.065A13.894,13.894,0,0,1,78,74.353c-5.236,0-8.79-3.073-8.79-8.334,0-5.038,3.363-8.549,8.427-8.549,4.481,0,8.227,2.691,8.227,7.525,0,2.821-.984,4.721-2.551,4.721a1.489,1.489,0,0,1-1.653-1.611V61.792a.727.727,0,0,0-.764-.811.741.741,0,0,0-.784.811v1.061h-.086a3.258,3.258,0,0,0-3.1-1.871c-2.474,0-4.214,2.058-4.214,5.009,0,2.98,1.729,5.057,4.252,5.057a3.3,3.3,0,0,0,3.172-2.1h.086a2.6,2.6,0,0,0,2.838,2.114c2.666,0,4.319-2.551,4.319-6.127,0-5.411-4.09-8.921-9.727-8.921-5.933,0-10.089,3.957-10.089,9.955Zm9.66,3.613c-1.72,0-2.8-1.387-2.8-3.595,0-2.169,1.089-3.557,2.809-3.557,1.748,0,2.857,1.36,2.857,3.52,0,2.207-1.128,3.632-2.866,3.632Z" transform="translate(-67.565 -56.008)" fill="#777"/>\n</svg>',o='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1598001954510" class="icon" viewBox="0 0 1040 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" xmlns:xlink="http://www.w3.org/1999/xlink" width="203.125" height="200"><defs><style type="text/css"></style></defs><path d="M947.393251 679.125345 674.853042 679.125345l143.716192-556.918026c3.51915-13.677511-4.727675-27.656897-18.411325-31.184233-13.644765-3.545756-27.646664 4.678556-31.214932 18.386766L721.04713 295.052946 364.271424 295.052946l44.60694-172.84051c3.527336-13.675464-4.727675-27.646664-18.402115-31.174-13.661138-3.553942-27.65485 4.678556-31.208792 18.378579l-47.900963 185.645141L76.8022 295.062156c-14.114462 0-25.594935 11.480472-25.594935 25.603121 0 14.155395 11.488659 25.596981 25.594935 25.596981L298.143331 346.262258l-85.904509 332.872297L25.611308 679.134555c-14.130835 0-25.611308 11.480472-25.611308 25.603121 0 14.155395 11.488659 25.596981 25.611308 25.596981l173.439144 0-44.60694 172.830277c-3.527336 13.691837 4.694929 27.65485 18.394952 31.214932 2.156106 0.551562 4.304026 0.791016 6.402827 0.791016 11.408841 0 21.828145-7.656377 24.805966-19.199271l147.026588-569.732889 356.768543 0L621.937878 679.117159 384.087749 679.117159c-14.155395 0-25.596981 11.480472-25.596981 25.594935 0 14.163581 11.441587 25.605168 25.596981 25.605168l224.645386 0-44.604894 172.830277c-3.521197 13.691837 4.733814 27.65485 18.409279 31.216979 2.156106 0.541329 4.312212 0.788969 6.427386 0.788969 11.376095 0 21.779026-7.656377 24.781406-19.199271l47.900963-185.645141 285.769512 0c14.155395 0 25.594935-11.449773 25.594935-25.596981 0-14.130835-11.455913-25.611308-25.611308-25.611308L947.393251 679.125345zM998.617913 295.052946 896.193149 295.052946c-14.155395 0-25.594935 11.480472-25.594935 25.594935 0 14.155395 11.43954 25.596981 25.594935 25.596981l102.424764 0c14.153348 0 25.594935-11.441587 25.594935-25.596981C1024.212848 306.517045 1012.771261 295.052946 998.617913 295.052946L998.617913 295.052946zM998.617913 295.052946" p-id="5507" fill="#333" ></path></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="19.819" height="19.816" viewBox="0 0 19.819 19.816">\n  <path id="路径_964" data-name="路径 964" d="M9.909,19.816A9.908,9.908,0,0,1,2.9,2.9,9.91,9.91,0,0,1,16.92,16.914a9.855,9.855,0,0,1-7.011,2.9Zm0-18.525A8.618,8.618,0,0,0,3.815,16,8.62,8.62,0,0,0,16.007,3.814a8.566,8.566,0,0,0-6.1-2.523ZM6.389,12.612a4.334,4.334,0,0,0,3.52,1.856,5.563,5.563,0,0,0,3.906-1.856.873.873,0,0,1,.876.928,5.954,5.954,0,0,1-4.782,2.165A4.649,4.649,0,0,1,5.586,13.54s-.032-.928.8-.928Zm.64-5.89A1.213,1.213,0,1,0,8.243,7.936,1.215,1.215,0,0,0,7.029,6.722Zm6.219,0a1.213,1.213,0,1,0,1.214,1.214,1.214,1.214,0,0,0-1.214-1.214Z" transform="translate(0)" fill="#777"/>\n</svg>',picture='<svg xmlns="http://www.w3.org/2000/svg" width="19.816" height="19.816" viewBox="0 0 19.816 19.816">\n  <path id="路径_1180" data-name="路径 1180" d="M120.154,104.877a2.477,2.477,0,1,0,2.477,2.477,2.484,2.484,0,0,0-2.477-2.477Zm0,3.716a1.239,1.239,0,1,1,1.239-1.239A1.242,1.242,0,0,1,120.154,108.593Zm12.385-6.193H117.677a2.484,2.484,0,0,0-2.477,2.477v14.862a2.484,2.484,0,0,0,2.477,2.477h14.862a2.484,2.484,0,0,0,2.477-2.477V104.877A2.484,2.484,0,0,0,132.539,102.4Zm-14.862,18.578a1.242,1.242,0,0,1-1.238-1.238v-.557l4.892-4.4,6.254,6.193Zm16.1-1.238a1.242,1.242,0,0,1-1.239,1.238h-3.22l-4.521-4.644,5.264-5.264,3.716,3.716Zm0-6.75-3.716-3.777-6.131,6.254-2.539-2.539-4.954,4.521V104.877a1.242,1.242,0,0,1,1.238-1.238h14.862a1.242,1.242,0,0,1,1.239,1.238Z" transform="translate(-115.2 -102.4)" fill="#777"/>\n</svg>\n'},20:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c}));n(300),n(25);var r=function(time){var e=(window.currentTime||new Date)-new Date(time);return parseInt(parseInt(e/1e3,0)/60,0)<60?"".concat(Math.ceil(e/1e3/60)>0?Math.ceil(e/1e3/60):1,"分钟前"):parseInt(parseInt(parseInt(e/1e3,0)/60,0)/60,0)<16?"".concat(Math.ceil(e/1e3/60/60)>0?Math.ceil(e/1e3/60/60):1,"小时前"):time.replace(/T/," ").replace(/Z/,"").substring(0,16)},o=function(e){var t=e-Math.round(new Date/1e3);return parseInt(t/86400,0)},c=function(e){var t=Math.round(new Date(e)/1e3),n=Math.round(new Date/1e3)-t,r=parseInt(n/86400,0);return r>365?parseInt(n/86400/365,0)+"年":r+"天"}},254:function(e,t,n){e.exports={methods:{handleAttachmentError:function(e){if(e&&e.message){var t=e.message.errors,n=t[0].detail?t[0].detail[0]:t[0].code,r=t[0].detail?t[0].detail[0]:this.$t("core.".concat(n));this.$message.error(r)}else this.$message.error(this.$t("post.imageUploadFail"))}}}},255:function(e,t,n){n(18),n(45),n(36),n(9),n(17);var r=n(792);e.exports={watch:{fileList:{handler:function(){var e;this.fileList.length>this.previewFiles.length&&0===this.previewFiles.length&&((e=this.previewFiles).push.apply(e,r(this.fileList)),this.previewFiles.map((function(e){e.progress=100})))},deep:!0,immediate:!0}},methods:{onClick:function(){this.input.dispatchEvent(new MouseEvent("click"))},onInput:function(e){var t=this,n=e.target.files,r=[];if(this.onUploadImage)return this.$message.warning("请等待上传中的图片完成上传");if(this.checkSizeLimit(n)&&this.checkLengthLimit(n)){for(var i=0;i<n.length;i++){var o=this.getObjectURL(n[i]);this.previewFiles.push({name:n[i].name,url:o,progress:0,deleted:!1,size:n[i].size}),r.push(n[i])}var c=r.reduce((function(e,n,r,o){return e.push(t.uploadFile(n,r,o.length)),e}),[]);this.uploadFiles(c)}},uploadFile:function(e,t,n){var r=this,o={onUploadProgress:function(e){e.lengthComputable?r.previewFiles[r.previewFiles.length-n+t].progress=.9*parseInt(Math.round(e.loaded/e.total*100).toString()):r.previewFiles[r.previewFiles.length-n+t].progress=100}},c=new FormData,l="Image"===this.type?1:0;return c.append("type",l),c.append("file",e),this.service.post(this.action,c,o)},uploadFiles:function(e){var t=this;this.$emit("update:onUpload".concat(this.type),!0),Promise.all(e).then((function(e){t.previewFiles.map((function(e){e.progress=100}));var n=e.map((function(e){return e.data.data})),o=r(t.fileList);n.forEach((function(e){return o.push({id:e.id,name:e.attributes.fileName,url:e.attributes.url})})),t.input.value="",t.$emit("success",o),t.$emit("update:onUpload".concat(t.type),!1)}),(function(n){t.input.value="";var r=e.length;t.$emit("update:onUpload".concat(t.type),!1),t.previewFiles.splice(t.previewFiles.length-r,r),t.handleError(n).then((function(){}))}))},removeItem:function(e){var t=this;this.$confirm(this.$t("topic.confirmDelete"),this.$t("discuzq.msgBox.title"),{confirmButtonText:this.$t("discuzq.msgBox.confirm"),cancelButtonText:this.$t("discuzq.msgBox.cancel"),type:"warning"}).then((function(){t.previewFiles[e].deleted=!0;var n=r(t.fileList);n.splice(e,1),t.$emit("remove",n),setTimeout((function(){t.previewFiles.splice(e,1),t.$message.success("删除成功")}),900)}),(function(){}))},checkSizeLimit:function(e){for(var t=!0,i=0;i<e.length;i++)e[i].size>this.sizeLimit&&(t=!1);return t||this.$message.error("图片不可大于 ".concat(this.sizeLimit/1024/1024," MB")),t},checkLengthLimit:function(e){return!(this.previewFiles.length+e.length>this.limit)||(this.$message.warning("图片最多上传".concat(this.limit,"张")),this.$emit("exceed",e),!1)},getObjectURL:function(e){var t=null;return window.createObjectURL?t=window.createObjectURL(e):window.URL?t=window.URL.createObjectURL(e):window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}}}},256:function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="day",s="week",u="month",a="quarter",o="year",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},f={s:d,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+d(r,2,"0")+":"+d(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.add(r,u),s=n-i<0,a=t.add(r+(s?-1:1),u);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return{M:u,y:o,w:s,d:i,D:"date",h:r,m:n,s:t,ms:e,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",y={};y[m]=h;var v=function(e){return e instanceof S},C=function(e,t,n){var r;if(!e)return m;if("string"==typeof e)y[e]&&(r=e),t&&(y[e]=t,r=e);else{var i=e.name;y[i]=e,r=i}return!n&&r&&(m=r),r||!n&&m},g=function(e,t){if(v(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},k=f;k.l=C,k.i=v,k.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var S=function(){function d(e){this.$L=this.$L||C(e.locale,null,!0),this.parse(e)}var f=d.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(c);if(r){var i=r[2]-1||0;return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return k},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(e,t){var n=g(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return g(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<g(e)},f.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},f.year=function(e){return this.$g(e,"$y",o)},f.month=function(e){return this.$g(e,"$M",u)},f.day=function(e){return this.$g(e,"$W",i)},f.date=function(e){return this.$g(e,"$D","date")},f.hour=function(e){return this.$g(e,"$H",r)},f.minute=function(e){return this.$g(e,"$m",n)},f.second=function(e){return this.$g(e,"$s",t)},f.millisecond=function(t){return this.$g(t,"$ms",e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,a){var c=this,l=!!k.u(a)||a,d=k.p(e),f=function(e,t){var n=k.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return l?n:n.endOf(i)},h=function(e,t){return k.w(c.toDate()[e].apply(c.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},m=this.$W,y=this.$M,v=this.$D,C="set"+(this.$u?"UTC":"");switch(d){case o:return l?f(1,0):f(31,11);case u:return l?f(1,y):f(0,y+1);case s:var g=this.$locale().weekStart||0,S=(m<g?m+7:m)-g;return f(l?v-S:v+(6-S),y);case i:case"date":return h(C+"Hours",0);case r:return h(C+"Minutes",1);case n:return h(C+"Seconds",2);case t:return h(C+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(s,a){var c,l=k.p(s),d="set"+(this.$u?"UTC":""),f=(c={},c.day=d+"Date",c.date=d+"Date",c[u]=d+"Month",c[o]=d+"FullYear",c[r]=d+"Hours",c[n]=d+"Minutes",c[t]=d+"Seconds",c[e]=d+"Milliseconds",c)[l],h=l===i?this.$D+(a-this.$W):a;if(l===u||l===o){var m=this.clone().set("date",1);m.$d[f](h),m.init(),this.$d=m.set("date",Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[k.p(e)]()},f.add=function(e,a){var c,l=this;e=Number(e);var d=k.p(a),f=function(t){var n=g(l);return k.w(n.date(n.date()+Math.round(t*e)),l)};if(d===u)return this.set(u,this.$M+e);if(d===o)return this.set(o,this.$y+e);if(d===i)return f(1);if(d===s)return f(7);var h=(c={},c[n]=6e4,c[r]=36e5,c[t]=1e3,c)[d]||1,m=this.$d.getTime()+e*h;return k.w(m,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=k.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,c=i.months,d=function(e,r,i,s){return e&&(e[r]||e(t,n))||i[r].substr(0,s)},f=function(e){return k.s(s%12||12,e,"0")},h=i.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:k.s(a+1,2,"0"),MMM:d(i.monthsShort,a,c,3),MMMM:d(c,a),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:d(i.weekdaysMin,this.$W,o,2),ddd:d(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:k.s(s,2,"0"),h:f(1),hh:f(2),a:h(s,u,!0),A:h(s,u,!1),m:String(u),mm:k.s(u,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:r};return n.replace(l,(function(e,t){return t||m[e]||r.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,c,l){var d,f=k.p(c),h=g(e),m=6e4*(h.utcOffset()-this.utcOffset()),y=this-h,v=k.m(this,h);return v=(d={},d[o]=v/12,d[u]=v,d[a]=v/3,d[s]=(y-m)/6048e5,d.day=(y-m)/864e5,d[r]=y/36e5,d[n]=y/6e4,d[t]=y/1e3,d)[f]||y,l?v:k.a(v)},f.daysInMonth=function(){return this.endOf(u).$D},f.$locale=function(){return y[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=C(e,t,!0);return r&&(n.$L=r),n},f.clone=function(){return k.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}();return g.prototype=S.prototype,g.extend=function(e,t){return e(t,S,g),g},g.locale=C,g.isDayjs=v,g.unix=function(e){return g(1e3*e)},g.en=y[m],g.Ls=y,g}()},397:function(e,t,n){"use strict";t.a={data:function(){return{scrollTop:0}},mounted:function(){this.addEventListener(window,"scroll",this.handleScroll)},destroyed:function(){this.removeEventListener(window,"scroll",this.handleScroll)},methods:{handleScroll:function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;Math.ceil(e+t+10)>=n&&this.scrollLoadMore(),this.scrollTop=e},addEventListener:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}}}},48:function(e,t,n){e.exports={data:function(){return{diffModulus:[[1e3,60,this.$t("discuzq.date.sec")],[6e4,60,this.$t("discuzq.date.min")],[36e5,24,this.$t("discuzq.date.hour")],[864e5,30,this.$t("discuzq.date.day")],[2592e6,12,this.$t("discuzq.date.mon")],[31104e6,1e6,this.$t("discuzq.date.year")]]}},methods:{timerDiff:function(e,t){e instanceof Date||(e=new Date(e)),t instanceof Date||(t=window.currentTime||new Date),t||(t=window.currentTime||new Date);for(var n,r=t-e,i=0;i<this.diffModulus.length;i++){var o=this.diffModulus[i];if(r/o[0]<o[1]){n=Math.ceil(r/o[0])+" "+o[2];break}}return n||""}}}},793:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(840),c=n(843),l=function(){function e(e){this.allowReport=!0,this.enableResume=!0,this.getSignature=e.getSignature,void 0!==e.allowReport&&(this.allowReport=e.allowReport),void 0!==e.enableResume&&(this.enableResume=e.enableResume),this.appId=e.appId,this.reportId=e.reportId}return e.prototype.upload=function(e){var t=r({getSignature:this.getSignature,appId:this.appId,reportId:this.reportId,enableResume:this.enableResume},e),n=new o.default(t);return this.allowReport&&this.initReporter(n),n.start(),n},e.prototype.initReporter=function(e){new c.VodReporter(e)},e}();t.default=l},839:function(e,t,n){"use strict";var r=n(848),o=n(849),c=n(850),l=n(851);function d(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}var f=function(){},h=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]);return t};function m(e){return map(e,(function(e){return"object"==typeof e?m(e):e}))}function y(e,source){return C(source,(function(t,n){e[n]=source[n]})),e}function v(e){return e instanceof Array}function C(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)}function map(e,t){var n=v(e)?[]:{};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i));return n}var k,S,x,w,_,R=function(e,t){if(t=y({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var n=t.Headers||{};if(t&&"object"==typeof t){!function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(n[e]=t[e])}();A.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"},(function(e,r){void 0!==t[e]&&(n[r]=t[e])})),t.Headers=h(n)}}return t},T=function(e){return Date.now()+(e||0)},A={noop:f,formatParams:R,apiWrapper:function(e,t){return function(n,r){"function"==typeof n&&(r=n,n={}),n=R(e,n);var o=function(e){return e&&e.headers&&(e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},c=function(e,data){r&&r(o(e),o(data))};if("getService"!==e&&"abortUploadTask"!==e){var l;if(l=function(e,t){var n=t.Bucket,r=t.Region,o=t.Key;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(!n)return"Bucket";if(!r)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(!n)return"Bucket";if(!r)return"Region";if(!o)return"Key"}return!1}(e,n))return void c({error:"missing param "+l});if(n.Region){if(n.Region.indexOf("cos.")>-1)return void c({error:'param Region should not be start with "cos."'});if(!/^([a-z\d-]+)$/.test(n.Region))return void c({error:"Region format error."});this.options.CompatibilityMode||-1!==n.Region.indexOf("-")||"yfb"===n.Region||"default"===n.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(n.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(n.Bucket))if(n.AppId)n.Bucket=n.Bucket+"-"+n.AppId;else{if(!this.options.AppId)return void c({error:'Bucket should format as "test-1250000000".'});n.Bucket=n.Bucket+"-"+this.options.AppId}n.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete n.AppId)}!this.options.UseRawKey&&n.Key&&"/"===n.Key.substr(0,1)&&(n.Key=n.Key.substr(1))}var d=t.call(this,n,c);if("getAuth"===e||"getObjectUrl"===e)return d}},xml2json:c,json2xml:l,md5:r,clearKey:h,getFileMd5:function(e,t){!function(e,t){var n,r=new FileReader;FileReader.prototype.readAsBinaryString?(n=FileReader.prototype.readAsBinaryString,r.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?n=function(e){var n="",r=new FileReader;r.onload=function(e){for(var o=new Uint8Array(r.result),c=o.byteLength,i=0;i<c;i++)n+=String.fromCharCode(o[i]);t(n)},r.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),n.call(r,e)}(e,(function(content){var e=r(content,!0);t(null,e)}))},binaryBase64:function(e){var i,t,n,r="";for(i=0,t=e.length/2;i<t;i++)n=parseInt(e[2*i]+e[2*i+1],16),r+=String.fromCharCode(n);return btoa(r)},extend:y,isArray:v,isInArray:function(e,t){for(var n=!1,i=0;i<e.length;i++)if(t===e[i]){n=!0;break}return n},each:C,map:map,filter:function(e,t){var n=v(e),r=n?[]:{};for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)&&(n?r.push(e[i]):r[i]=e[i]);return r},clone:m,uuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},camSafeUrlEncode:d,throttleOnProgress:function(e,t){var n,r,o=this,c=0,l=0,d=Date.now();function f(){if(r=0,t&&"function"==typeof t){n=Date.now();var o,f=Math.max(0,Math.round((l-c)/((n-d)/1e3)*100)/100);o=0===l&&0===e?1:Math.round(l/e*100)/100||0,d=n,c=l;try{t({loaded:l,total:e,speed:f,percent:o})}catch(e){}}}return function(t,n){if(t&&(l=t.loaded,e=t.total),n)clearTimeout(r),f();else{if(r)return;r=setTimeout(f,o.options.ProgressInterval)}}},getFileSize:function(e,t,n){var r;"string"==typeof t.Body&&(t.Body=new Blob([t.Body],{type:"text/plain"})),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(r=t.Body.size,t.ContentLength=r,n(null,r)):n({error:"params body format error, Only allow File|Blob|String."})},getSkewTime:T,getAuth:function(e){var t,n=(e=e||{}).SecretId,r=e.SecretKey,c=(e.method||e.Method||"get").toLowerCase(),l=m(e.Query||e.params||{}),f=m(e.Headers||e.headers||{}),h=e.Key||"";if(e.UseRawKey?t=e.Pathname||e.pathname||"/"+h:0!==(t=e.Pathname||e.pathname||h).indexOf("/")&&(t="/"+t),!n)return console.error("missing param SecretId");if(!r)return console.error("missing param SecretKey");var y=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort((function(a,b){return(a=a.toLowerCase())===(b=b.toLowerCase())?0:a>b?1:-1}))},v=function(e){var i,t,n,r=[],o=y(e);for(i=0;i<o.length;i++)n=void 0===e[t=o[i]]||null===e[t]?"":""+e[t],t=d(t=t.toLowerCase()),n=d(n)||"",r.push(t+"="+n);return r.join("&")},C=Math.round(T(e.SystemClockOffset)/1e3)-1,k=C,S=e.Expires||e.expires,x=n,w=C+";"+(k+=void 0===S?900:1*S||0),_=C+";"+k,R=y(f).join(";").toLowerCase(),A=y(l).join(";").toLowerCase(),E=o.HmacSHA1(_,r).toString(),B=[c,t,v(l),v(f),""].join("\n"),P=["sha1",w,o.SHA1(B).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+x,"q-sign-time="+w,"q-key-time="+_,"q-header-list="+R,"q-url-param-list="+A,"q-signature="+o.HmacSHA1(P,E).toString()].join("&")},isBrowser:!0},E=(_=function(a,b){a=a.split("."),b=b.split(".");for(var i=0;i<b.length;i++)if(a[i]!==b[i])return parseInt(a[i])>parseInt(b[i])?1:-1;return 0},k=navigator&&navigator.userAgent,S=(k.match(/Chrome\/([.\d]+)/)||[])[1],x=(k.match(/QBCore\/([.\d]+)/)||[])[1],w=(k.match(/QQBrowser\/([.\d]+)/)||[])[1],S&&_(S,"53.0.2785.116")<0&&x&&_(x,"3.53.991.400")<0&&w&&_(w,"9.0.2524.400")<=0||!1);A.fileSlice=function(e,t,n,r,o){var c;if(e.slice?c=e.slice(t,n):e.mozSlice?c=e.mozSlice(t,n):e.webkitSlice&&(c=e.webkitSlice(t,n)),r&&E){var l=new FileReader;l.onload=function(e){c=null,o(new Blob([l.result]))},l.readAsArrayBuffer(c)}else o(c)},A.getFileUUID=function(e,t){return e.name&&e.size&&e.lastModifiedDate&&t?A.md5([e.name,e.size,e.lastModifiedDate,t].join("::")):null},A.getBodyMd5=function(e,t,n){n=n||f,e?"string"==typeof t?n(A.md5(t,!0)):Blob&&t instanceof Blob?A.getFileMd5(t,(function(e,t){n(t)})):n():n()},e.exports=A},840:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])})(e,b)},function(e,b){function t(){this.constructor=e}r(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},d=this&&this.__generator||function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UploaderEvent=t.vodAxios=void 0;var f,h=n(845),m=n(846),y=n(860),v=n(60),C=n(842),k=n(843),S=n(862);t.vodAxios=v.default.create(),function(e){e.video_progress="video_progress",e.media_progress="media_progress",e.video_upload="video_upload",e.media_upload="media_upload",e.cover_progress="cover_progress",e.cover_upload="cover_upload"}(f=t.UploaderEvent||(t.UploaderEvent={}));var x=function(e){function n(t){var n=e.call(this)||this;return n.sessionName="",n.vodSessionKey="",n.appId=0,n.reqKey=S(),n.reportId="",n.enableResume=!0,n.applyRequestTimeout=5e3,n.applyRequestRetryCount=3,n.commitRequestTimeout=5e3,n.commitRequestRetryCount=3,n.retryDelay=1e3,n.validateInitParams(t),n.videoFile=t.mediaFile||t.videoFile,n.getSignature=t.getSignature,n.enableResume=t.enableResume,n.videoName=t.mediaName||t.videoName,n.coverFile=t.coverFile,n.fileId=t.fileId,n.applyRequestTimeout=t.applyRequestTimeout||n.applyRequestTimeout,n.commitRequestTimeout=t.commitRequestTimeout||n.commitRequestTimeout,n.retryDelay=t.retryDelay||n.retryDelay,n.appId=t.appId||n.appId,n.reportId=t.reportId||n.reportId,n.genFileInfo(),n}return o(n,e),n.prototype.setStorage=function(e,t){if(e){var n="webugc_"+h(e);try{localStorage.setItem(n,t)}catch(e){}}},n.prototype.getStorage=function(e){if(e){var t="webugc_"+h(e),n=null;try{n=localStorage.getItem(t)}catch(e){}return n}},n.prototype.delStorage=function(e){if(e){var t="webugc_"+h(e);try{localStorage.removeItem(t)}catch(e){}}},n.prototype.validateInitParams=function(e){if(!C.default.isFunction(e.getSignature))throw new Error("getSignature must be a function");if(e.videoFile&&!C.default.isFile(e.videoFile))throw new Error("videoFile must be a File")},n.prototype.genFileInfo=function(){var e=this.videoFile;if(e){var t=e.name.lastIndexOf("."),n="";if(this.videoName){if(!C.default.isString(this.videoName))throw new Error("mediaName must be a string");if(/[:*?<>\"\\/|]/g.test(this.videoName))throw new Error('Cant use these chars in filename: \\ / : * ? " < > |');n=this.videoName}else n=e.name.substring(0,t);this.videoInfo={name:n,type:e.name.substring(t+1).toLowerCase(),size:e.size},this.sessionName+=e.name+"_"+e.size+";"}var r=this.coverFile;if(r){var o=r.name,c=o.lastIndexOf(".");this.coverInfo={name:o.substring(0,c),type:o.substring(c+1).toLowerCase(),size:r.size},this.sessionName+=r.name+"_"+r.size+";"}},n.prototype.applyUploadUGC=function(e){return void 0===e&&(e=0),l(this,void 0,void 0,(function(){function n(t){return l(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:if(r.emit(k.VodReportEvent.report_apply,{err:t,requestStartTime:y}),r.delStorage(r.sessionName),r.applyRequestRetryCount==e){if(t)throw t;throw new Error("apply upload failed")}return[4,C.default.delay(r.retryDelay)];case 1:return n.sent(),[2,r.applyUploadUGC(e+1)]}}))}))}var r,o,c,f,h,m,y,v,S,x,w,_;return d(this,(function(e){switch(e.label){case 0:return r=this,[4,this.getSignature()];case 1:if(o=e.sent(),f=this.videoInfo,h=this.coverInfo,m=this.vodSessionKey||this.enableResume&&this.getStorage(this.sessionName))c={signature:o,vodSessionKey:m};else if(f)c={signature:o,videoName:f.name,videoType:f.type,videoSize:f.size},h&&(c.coverName=h.name,c.coverType=h.type,c.coverSize=h.size);else{if(!this.fileId||!h)throw"Wrong params, please check and try again";c={signature:o,fileId:this.fileId,coverName:h.name,coverType:h.type,coverSize:h.size}}y=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://vod2.qcloud.com/v3/index.php?Action=ApplyUploadUGC",c,{timeout:this.applyRequestTimeout,withCredentials:!1})];case 3:return v=e.sent(),[3,5];case 4:return[2,n(e.sent())];case 5:return 0==(S=v.data).code?(x=S.data,w=x.vodSessionKey,this.setStorage(this.sessionName,w),this.vodSessionKey=w,this.appId=x.appId,this.emit(k.VodReportEvent.report_apply,{data:x,requestStartTime:y}),[2,x]):((_=new Error(S.message)).code=S.code,[2,n(_)])}}))}))},n.prototype.uploadToCos=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,h,y,v,S;return d(this,(function(x){switch(x.label){case 0:return t=this,n={bucket:e.storageBucket+"-"+e.storageAppId,region:e.storageRegionV5},r=new m({getAuthorization:function(t,n){return l(this,void 0,void 0,(function(){return d(this,(function(t){return n({TmpSecretId:e.tempCertificate.secretId,TmpSecretKey:e.tempCertificate.secretKey,XCosSecurityToken:e.tempCertificate.token,StartTime:e.timestamp,ExpiredTime:e.tempCertificate.expiredTime}),[2]}))}))}}),this.cos=r,o=[],this.videoFile&&(h=c(c({},n),{file:this.videoFile,key:e.video.storagePath,onProgress:function(data){t.emit(f.video_progress,data),t.emit(f.media_progress,data)},onUpload:function(data){t.emit(f.video_upload,data),t.emit(f.media_upload,data)},onTaskReady:function(e){t.taskId=e}}),o.push(h)),this.coverFile&&(y=c(c({},n),{file:this.coverFile,key:e.cover.storagePath,onProgress:function(data){t.emit(f.cover_progress,data)},onUpload:function(data){t.emit(f.cover_upload,data)},onTaskReady:C.default.noop}),o.push(y)),v=new Date,S=o.map((function(e){return new Promise((function(n,o){r.sliceUploadFile({Bucket:e.bucket,Region:e.region,Key:e.key,Body:e.file,onTaskReady:e.onTaskReady,onProgress:e.onProgress},(function(r,data){return e.file===t.videoFile&&t.emit(k.VodReportEvent.report_cos_upload,{err:r,requestStartTime:v}),r?(t.delStorage(t.sessionName),'{"error":"error","headers":{}}'===JSON.stringify(r)?o(new Error("cors error")):void o(r)):(e.onUpload(data),n())}))}))})),[4,Promise.all(S)];case 1:return[2,x.sent()]}}))}))},n.prototype.commitUploadUGC=function(e){return void 0===e&&(e=0),l(this,void 0,void 0,(function(){function n(t){return l(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:if(r.emit(k.VodReportEvent.report_commit,{err:t,requestStartTime:f}),r.commitRequestRetryCount==e){if(t)throw t;throw new Error("commit upload failed")}return[4,C.default.delay(r.retryDelay)];case 1:return n.sent(),[2,r.commitUploadUGC(e+1)]}}))}))}var r,o,c,f,h,m,y;return d(this,(function(e){switch(e.label){case 0:return r=this,[4,this.getSignature()];case 1:o=e.sent(),this.delStorage(this.sessionName),c=this.vodSessionKey,f=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://vod2.qcloud.com/v3/index.php?Action=CommitUploadUGC",{signature:o,vodSessionKey:c},{timeout:this.commitRequestTimeout,withCredentials:!1})];case 3:return h=e.sent(),[3,5];case 4:return[2,n(e.sent())];case 5:return 0==(m=h.data).code?(this.emit(k.VodReportEvent.report_commit,{data:m.data,requestStartTime:f}),[2,m.data]):((y=new Error(m.message)).code=m.code,[2,n(y)])}}))}))},n.prototype.start=function(){var e=this,t=new Date;this.donePromise=this._start().then((function(n){return e.emit(k.VodReportEvent.report_done,{err:{code:0},requestStartTime:t}),n})).catch((function(n){throw e.emit(k.VodReportEvent.report_done,{err:{code:n&&n.code||C.default.CLIENT_ERROR_CODE.UPLOAD_FAIL},requestStartTime:t}),n}))},n.prototype._start=function(){return l(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,this.applyUploadUGC()];case 1:return e=t.sent(),[4,this.uploadToCos(e)];case 2:return t.sent(),[4,this.commitUploadUGC()];case 3:return[2,t.sent()]}}))}))},n.prototype.done=function(){return this.donePromise},n.prototype.cancel=function(){this.cos.cancelTask(this.taskId)},n}(y.EventEmitter);t.default=x},841:function(e,t){var n=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),n(e).push(t)},e.off=function(e,t){for(var r=n(e),i=r.length-1;i>=0;i--)t===r[i]&&r.splice(i,1)},e.emit=function(e,data){for(var t=n(e).map((function(e){return e})),i=0;i<t.length;i++)t[i](data)}};e.exports.init=n,e.exports.EventProxy=function(){n(this)}},842:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UPLOAD_FAIL=1]="UPLOAD_FAIL"}(r||(r={})),t.default={isFile:function(e){return"[object File]"==Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},noop:function(){},delay:function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},isTest:!1,isDev:!1,CLIENT_ERROR_CODE:r}},843:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VodReporter=t.VodReportEvent=void 0;var o,c,l=n(840),d=n(861),f=n(842);!function(e){e.report_apply="report_apply",e.report_cos_upload="report_cos_upload",e.report_commit="report_commit",e.report_done="report_done"}(o=t.VodReportEvent||(t.VodReportEvent={})),function(e){e[e.apply=10001]="apply",e[e.cos_upload=20001]="cos_upload",e[e.commit=10002]="commit",e[e.done=40001]="done"}(c||(c={}));var h=function(){function e(e,t){this.baseReportData={version:d.version,platform:3e3,device:navigator.userAgent},this.reportUrl="https://vodreport.qcloud.com/ugcupload_new",this.uploader=e,this.options=t,this.init()}return e.prototype.init=function(){this.uploader.on(o.report_apply,this.onApply.bind(this)),this.uploader.on(o.report_cos_upload,this.onCosUpload.bind(this)),this.uploader.on(o.report_commit,this.onCommit.bind(this)),this.uploader.on(o.report_done,this.onDone.bind(this))},e.prototype.onApply=function(e){try{var t=this.uploader;if(!t.videoFile)return;Object.assign(this.baseReportData,{appId:t.appId,fileSize:t.videoFile.size,fileName:t.videoFile.name,fileType:t.videoFile.type,vodSessionKey:t.vodSessionKey,reqKey:t.reqKey,reportId:t.reportId});var n={reqType:c.apply,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(n.errCode=1,n.vodErrCode=e.err.code,n.errMsg=e.err.message),e.data&&(this.baseReportData.cosRegion=e.data.storageRegionV5),this.report(n)}catch(e){if(console.error("onApply",e),f.default.isTest)throw e}},e.prototype.onCosUpload=function(e){try{var t={reqType:c.cos_upload,errCode:0,cosErrCode:"",errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.cosErrCode=e.err.error?e.err.error.Code:e.err,e.err&&"error"===e.err.error&&(t.cosErrCode="cors error"),t.errMsg=JSON.stringify(e.err)),this.report(t)}catch(e){if(console.error("onCosUpload",e),f.default.isTest)throw e}},e.prototype.onCommit=function(e){try{var t={reqType:c.commit,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.vodErrCode=e.err.code,t.errMsg=e.err.message),e.data&&(this.baseReportData.fileId=e.data.fileId),this.report(t)}catch(e){if(console.error("onCommit",e),f.default.isTest)throw e}},e.prototype.onDone=function(e){try{var t={reqType:c.done,errCode:e.err&&e.err.code,reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};this.report(t)}catch(e){if(console.error("onDone",e),f.default.isTest)throw e}},e.prototype.report=function(e){e=r(r({},this.baseReportData),e),this.send(e)},e.prototype.send=function(e){f.default.isDev||f.default.isTest?console.log("send reportData",e):l.vodAxios.post(this.reportUrl,e)},e}();t.VodReporter=h},844:function(e,t){},845:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(794),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var i=0;i<OUTPUT_TYPES.length;++i){var t=OUTPUT_TYPES[i];e[t]=createOutputMethod(t)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var code,i,n=0,r=e.length||0,o=this.blocks;n<r;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(i=this.start;n<r&&i<64;++n)o[i>>2]|=e[n]<<SHIFT[3&i++];else for(i=this.start;n<r&&i<64;++n)(code=e.charCodeAt(n))<128?o[i>>2]|=code<<SHIFT[3&i++]:code<2048?(o[i>>2]|=(192|code>>6)<<SHIFT[3&i++],o[i>>2]|=(128|63&code)<<SHIFT[3&i++]):code<55296||code>=57344?(o[i>>2]|=(224|code>>12)<<SHIFT[3&i++],o[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&code)<<SHIFT[3&i++]):(code=65536+((1023&code)<<10|1023&e.charCodeAt(++n)),o[i>>2]|=(240|code>>18)<<SHIFT[3&i++],o[i>>2]|=(128|code>>12&63)<<SHIFT[3&i++],o[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&code)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,i=this.lastByteIndex;e[16]=this.block,e[i>>2]|=EXTRA[3&i],this.block=e[16],i>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,a=this.h0,b=this.h1,n=this.h2,r=this.h3,o=this.h4,c=this.blocks;for(e=16;e<80;++e)t=c[e-3]^c[e-8]^c[e-14]^c[e-16],c[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b&n|~b&r)+o+1518500249+c[e]<<0)<<5|o>>>27)+(a&(b=b<<30|b>>>2)|~a&n)+r+1518500249+c[e+1]<<0)<<5|r>>>27)+(o&(a=a<<30|a>>>2)|~o&b)+n+1518500249+c[e+2]<<0)<<5|n>>>27)+(r&(o=o<<30|o>>>2)|~r&a)+b+1518500249+c[e+3]<<0)<<5|b>>>27)+(n&(r=r<<30|r>>>2)|~n&o)+a+1518500249+c[e+4]<<0,n=n<<30|n>>>2;for(;e<40;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b^n^r)+o+1859775393+c[e]<<0)<<5|o>>>27)+(a^(b=b<<30|b>>>2)^n)+r+1859775393+c[e+1]<<0)<<5|r>>>27)+(o^(a=a<<30|a>>>2)^b)+n+1859775393+c[e+2]<<0)<<5|n>>>27)+(r^(o=o<<30|o>>>2)^a)+b+1859775393+c[e+3]<<0)<<5|b>>>27)+(n^(r=r<<30|r>>>2)^o)+a+1859775393+c[e+4]<<0,n=n<<30|n>>>2;for(;e<60;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b&n|b&r|n&r)+o-1894007588+c[e]<<0)<<5|o>>>27)+(a&(b=b<<30|b>>>2)|a&n|b&n)+r-1894007588+c[e+1]<<0)<<5|r>>>27)+(o&(a=a<<30|a>>>2)|o&b|a&b)+n-1894007588+c[e+2]<<0)<<5|n>>>27)+(r&(o=o<<30|o>>>2)|r&a|o&a)+b-1894007588+c[e+3]<<0)<<5|b>>>27)+(n&(r=r<<30|r>>>2)|n&o|r&o)+a-1894007588+c[e+4]<<0,n=n<<30|n>>>2;for(;e<80;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b^n^r)+o-899497514+c[e]<<0)<<5|o>>>27)+(a^(b=b<<30|b>>>2)^n)+r-899497514+c[e+1]<<0)<<5|r>>>27)+(o^(a=a<<30|a>>>2)^b)+n-899497514+c[e+2]<<0)<<5|n>>>27)+(r^(o=o<<30|o>>>2)^a)+b-899497514+c[e+3]<<0)<<5|b>>>27)+(n^(r=r<<30|r>>>2)^o)+a-899497514+c[e+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+o<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[15&h1]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>8&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[15&h2]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[15&h3]+HEX_CHARS[h4>>28&15]+HEX_CHARS[h4>>24&15]+HEX_CHARS[h4>>20&15]+HEX_CHARS[h4>>16&15]+HEX_CHARS[h4>>12&15]+HEX_CHARS[h4>>8&15]+HEX_CHARS[h4>>4&15]+HEX_CHARS[15&h4]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,h1>>24&255,h1>>16&255,h1>>8&255,255&h1,h2>>24&255,h2>>16&255,h2>>8&255,255&h2,h3>>24&255,h3>>16&255,h3>>8&255,255&h3,h4>>24&255,h4>>16&255,h4>>8&255,255&h4]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(302),__webpack_require__(40))},846:function(e,t,n){var r=n(847);e.exports=r},847:function(e,t,n){"use strict";var r=n(839),o=n(841),c=n(852),base=n(853),l=n(858),d={AppId:"",SecretId:"",SecretKey:"",XCosSecurityToken:"",FileParallelLimit:3,ChunkParallelLimit:3,ChunkRetryTimes:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,UploadQueueSize:1e4,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadIdCacheLimit:50},f=function(e){this.options=r.extend(r.clone(d),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),o.init(this),c.init(this)};base.init(f,c),l.init(f,c),f.getAuthorization=r.getAuth,f.version="0.5.16",e.exports=f},848:function(e,t){function n(e,t){var a=e[0],b=e[1],n=e[2],r=e[3];a=o(a,b,n,r,t[0],7,-680876936),r=o(r,a,b,n,t[1],12,-389564586),n=o(n,r,a,b,t[2],17,606105819),b=o(b,n,r,a,t[3],22,-1044525330),a=o(a,b,n,r,t[4],7,-176418897),r=o(r,a,b,n,t[5],12,1200080426),n=o(n,r,a,b,t[6],17,-1473231341),b=o(b,n,r,a,t[7],22,-45705983),a=o(a,b,n,r,t[8],7,1770035416),r=o(r,a,b,n,t[9],12,-1958414417),n=o(n,r,a,b,t[10],17,-42063),b=o(b,n,r,a,t[11],22,-1990404162),a=o(a,b,n,r,t[12],7,1804603682),r=o(r,a,b,n,t[13],12,-40341101),n=o(n,r,a,b,t[14],17,-1502002290),a=c(a,b=o(b,n,r,a,t[15],22,1236535329),n,r,t[1],5,-165796510),r=c(r,a,b,n,t[6],9,-1069501632),n=c(n,r,a,b,t[11],14,643717713),b=c(b,n,r,a,t[0],20,-373897302),a=c(a,b,n,r,t[5],5,-701558691),r=c(r,a,b,n,t[10],9,38016083),n=c(n,r,a,b,t[15],14,-660478335),b=c(b,n,r,a,t[4],20,-405537848),a=c(a,b,n,r,t[9],5,568446438),r=c(r,a,b,n,t[14],9,-1019803690),n=c(n,r,a,b,t[3],14,-187363961),b=c(b,n,r,a,t[8],20,1163531501),a=c(a,b,n,r,t[13],5,-1444681467),r=c(r,a,b,n,t[2],9,-51403784),n=c(n,r,a,b,t[7],14,1735328473),a=l(a,b=c(b,n,r,a,t[12],20,-1926607734),n,r,t[5],4,-378558),r=l(r,a,b,n,t[8],11,-2022574463),n=l(n,r,a,b,t[11],16,1839030562),b=l(b,n,r,a,t[14],23,-35309556),a=l(a,b,n,r,t[1],4,-1530992060),r=l(r,a,b,n,t[4],11,1272893353),n=l(n,r,a,b,t[7],16,-155497632),b=l(b,n,r,a,t[10],23,-1094730640),a=l(a,b,n,r,t[13],4,681279174),r=l(r,a,b,n,t[0],11,-358537222),n=l(n,r,a,b,t[3],16,-722521979),b=l(b,n,r,a,t[6],23,76029189),a=l(a,b,n,r,t[9],4,-640364487),r=l(r,a,b,n,t[12],11,-421815835),n=l(n,r,a,b,t[15],16,530742520),a=d(a,b=l(b,n,r,a,t[2],23,-995338651),n,r,t[0],6,-198630844),r=d(r,a,b,n,t[7],10,1126891415),n=d(n,r,a,b,t[14],15,-1416354905),b=d(b,n,r,a,t[5],21,-57434055),a=d(a,b,n,r,t[12],6,1700485571),r=d(r,a,b,n,t[3],10,-1894986606),n=d(n,r,a,b,t[10],15,-1051523),b=d(b,n,r,a,t[1],21,-2054922799),a=d(a,b,n,r,t[8],6,1873313359),r=d(r,a,b,n,t[15],10,-30611744),n=d(n,r,a,b,t[6],15,-1560198380),b=d(b,n,r,a,t[13],21,1309151649),a=d(a,b,n,r,t[4],6,-145523070),r=d(r,a,b,n,t[11],10,-1120210379),n=d(n,r,a,b,t[2],15,718787259),b=d(b,n,r,a,t[9],21,-343485551),e[0]=v(a,e[0]),e[1]=v(b,e[1]),e[2]=v(n,e[2]),e[3]=v(r,e[3])}function r(q,a,b,e,s,t){return a=v(v(a,q),v(e,t)),v(a<<s|a>>>32-s,b)}function o(a,b,e,t,n,s,o){return r(b&e|~b&t,a,b,n,s,o)}function c(a,b,e,t,n,s,o){return r(b&t|e&~t,a,b,n,s,o)}function l(a,b,e,t,n,s,o){return r(b^e^t,a,b,n,s,o)}function d(a,b,e,t,n,s,o){return r(e^(b|~t),a,b,n,s,o)}function f(s){var i,e=[];for(i=0;i<64;i+=4)e[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return e}var h="0123456789abcdef".split("");function m(e){for(var s="",t=0;t<4;t++)s+=h[e>>8*t+4&15]+h[e>>8*t&15];return s}function y(s,e){return e||(s=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(s)),function(e){for(var i=0;i<e.length;i++)e[i]=m(e[i]);return e.join("")}(function(s){var i,e=s.length,t=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)n(t,f(s.substring(i-64,i)));s=s.substring(i-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)r[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(n(t,r),i=0;i<16;i++)r[i]=0;return r[14]=8*e,n(t,r),t}(s))}var v=function(a,b){return a+b&4294967295};"5d41402abc4b2a76b9719d911017c592"!=y("hello")&&(v=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),e.exports=y},849:function(e,t,n){var g,r,o,c,l,d,f,h=h||function(g,e){var t={},n=t.lib={},r=function(){},o=n.Base={extend:function(a){r.prototype=this;var e=new r;return a&&e.mixIn(a),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var e in a)a.hasOwnProperty(e)&&(this[e]=a[e]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},p=n.WordArray=o.extend({init:function(a,e){a=this.words=a||[],this.sigBytes=null!=e?e:4*a.length},toString:function(a){return(a||c).stringify(this)},concat:function(a){var e=this.words,q=a.words,t=this.sigBytes;if(a=a.sigBytes,this.clamp(),t%4)for(var b=0;b<a;b++)e[t+b>>>2]|=(q[b>>>2]>>>24-b%4*8&255)<<24-(t+b)%4*8;else if(65535<q.length)for(b=0;b<a;b+=4)e[t+b>>>2]=q[b>>>2];else e.push.apply(e,q);return this.sigBytes+=a,this},clamp:function(){var a=this.words,e=this.sigBytes;a[e>>>2]&=4294967295<<32-e%4*8,a.length=g.ceil(e/4)},clone:function(){var a=o.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var e=[],b=0;b<a;b+=4)e.push(4294967296*g.random()|0);return new p.init(e,a)}}),b=t.enc={},c=b.Hex={stringify:function(a){var e=a.words;a=a.sigBytes;for(var b=[],t=0;t<a;t++){var n=e[t>>>2]>>>24-t%4*8&255;b.push((n>>>4).toString(16)),b.push((15&n).toString(16))}return b.join("")},parse:function(a){for(var e=a.length,b=[],t=0;t<e;t+=2)b[t>>>3]|=parseInt(a.substr(t,2),16)<<24-t%8*4;return new p.init(b,e/2)}},l=b.Latin1={stringify:function(a){var e=a.words;a=a.sigBytes;for(var b=[],t=0;t<a;t++)b.push(String.fromCharCode(e[t>>>2]>>>24-t%4*8&255));return b.join("")},parse:function(a){for(var e=a.length,b=[],t=0;t<e;t++)b[t>>>2]|=(255&a.charCodeAt(t))<<24-t%4*8;return new p.init(b,e)}},d=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(l.stringify(a)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(a){return l.parse(unescape(encodeURIComponent(a)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=d.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var e=this._data,b=e.words,t=e.sigBytes,n=this.blockSize,r=t/(4*n);if(a=(r=a?g.ceil(r):g.max((0|r)-this._minBufferSize,0))*n,t=g.min(4*a,t),a){for(var o=0;o<a;o+=n)this._doProcessBlock(b,o);o=b.splice(0,a),e.sigBytes-=t}return new p.init(o,t)},clone:function(){var a=o.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});n.Hasher=f.extend({cfg:o.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return new a.init(e).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return new s.HMAC.init(a,e).finalize(b)}}});var s=t.algo={};return t}(Math);r=(l=(g=h).lib).WordArray,o=l.Hasher,c=[],l=g.algo.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var b=this._hash.words,n=b[0],r=b[1],o=b[2],g=b[3],l=b[4],a=0;80>a;a++){if(16>a)c[a]=0|e[t+a];else{var d=c[a-3]^c[a-8]^c[a-14]^c[a-16];c[a]=d<<1|d>>>31}d=(n<<5|n>>>27)+l+c[a],d=20>a?d+(1518500249+(r&o|~r&g)):40>a?d+(1859775393+(r^o^g)):60>a?d+((r&o|r&g|o&g)-1894007588):d+((r^o^g)-899497514),l=g,g=o,o=r<<30|r>>>2,r=n,n=d}b[0]=b[0]+n|0,b[1]=b[1]+r|0,b[2]=b[2]+o|0,b[3]=b[3]+g|0,b[4]=b[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,b=8*this._nDataBytes,g=8*e.sigBytes;return t[g>>>5]|=128<<24-g%32,t[14+(g+64>>>9<<4)]=Math.floor(b/4294967296),t[15+(g+64>>>9<<4)]=b,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),g.SHA1=o._createHelper(l),g.HmacSHA1=o._createHmacHelper(l),function(){var g=h,e=g.enc.Utf8;g.algo.HMAC=g.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var g=t.blockSize,r=4*g;n.sigBytes>r&&(n=t.finalize(n)),n.clamp();for(var p=this._oKey=n.clone(),b=this._iKey=n.clone(),o=p.words,c=b.words,l=0;l<g;l++)o[l]^=1549556828,c[l]^=909522486;p.sigBytes=b.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),f=(d=h).lib.WordArray,d.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,map=this._map;e.clamp();for(var r=[],i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)r.push(map.charAt(o>>>6*(3-c)&63));var l=map.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,map=this._map,n=map.charAt(64);if(n){var r=e.indexOf(n);-1!=r&&(t=r)}for(var o=[],c=0,i=0;i<t;i++)if(i%4){var l=map.indexOf(e.charAt(i-1))<<i%4*2,d=map.indexOf(e.charAt(i))>>>6-i%4*2;o[c>>>2]|=(l|d)<<24-c%4*8,c++}return f.create(o,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=h},850:function(e,t,n){var r=n(866).DOMParser,o=function(){this.version="1.3.5";var e={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},t=new RegExp(/(?!xmlns)^.*:/);new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){if(e){var n=this.stringToXML(e);return n.getElementsByTagName("parsererror").length?null:this.parseXML(n,t)}return null},this.parseXML=function(n,r){for(var c in r)e[c]=r[c];var l={},d=0,f="";if(n.childNodes.length)for(var h,m,y,v=0;v<n.childNodes.length;v++)4===(h=n.childNodes.item(v)).nodeType?e.mergeCDATA&&(f+=h.nodeValue):3===h.nodeType?f+=h.nodeValue:1===h.nodeType&&(0===d&&(l={}),m=e.stripElemPrefix?h.nodeName.replace(t,""):h.nodeName,y=o.parseXML(h),l.hasOwnProperty(m)?(l[m].constructor!==Array&&(l[m]=[l[m]]),l[m].push(y)):(l[m]=y,d++));return Object.keys(l).length||(l=f||""),l},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new r).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}.call({});e.exports=function(e){return o.parseString(e)}},851:function(e,t){var n=new RegExp("^([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�])|^((x|X)(m|M)(l|L))|([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�-.0-9·̀-ͯ‿⁀])","g"),r=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,o=function(e){var t=[];if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},c=function(e,t){var c=function(e,content,r,o,c){var l=void 0!==t.indent?t.indent:"\t",d=t.prettyPrint?"\n"+new Array(o).join(l):"";t.removeIllegalNameCharacters&&(e=e.replace(n,"_"));var f=[d,"<",e,r||""];return content&&content.length>0?(f.push(">"),f.push(content),c&&f.push(d),f.push("</"),f.push(e),f.push(">")):f.push("/>"),f.join("")};return function e(n,l,d){var f=typeof n;switch((Array.isArray?Array.isArray(n):n instanceof Array)?f="array":n instanceof Date&&(f="date"),f){case"array":var h=[];return n.map((function(t){h.push(e(t,1,d+1))})),t.prettyPrint&&h.push("\n"),h.join("");case"date":return n.toJSON?n.toJSON():n+"";case"object":var m=[];for(var y in n)if(n.hasOwnProperty(y))if(n[y]instanceof Array)for(var v=0;v<n[y].length;v++)n[y].hasOwnProperty(v)&&m.push(c(y,e(n[y][v],0,d+1),null,d+1,o(n[y][v]).length));else m.push(c(y,e(n[y],0,d+1),null,d+1));return t.prettyPrint&&m.length>0&&m.push("\n"),m.join("");case"function":return n();default:return t.escape?(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(r,""):""+n}}(e,0,0)},l=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")};e.exports=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var n="",r="";return t&&("object"==typeof t?(t.xmlHeader&&(n=l(!!t.xmlHeader.standalone)),void 0!==t.docType&&(r="<!DOCTYPE "+t.docType+">")):n=l()),[n,(t=t||{}).prettyPrint&&r?"\n":"",r,c(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")}},852:function(e,t,n){var r=n(839),o={};e.exports.transferToTaskMethod=function(e,t){o[t]=e[t],e[t]=function(e,n){e.SkipTask?o[t].call(this,e,n):this._addTask(t,e,n)}},e.exports.init=function(e){var t=[],n={},c=0,l=0,d=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),t},f=function(){e.emit("task-list-update",{list:r.map(t,d)}),e.emit("list-update",{list:r.map(t,d)})},h=function(){if(!(t.length<=e.options.UploadQueueSize)){for(var i=0;i<l&&i<t.length&&t.length>e.options.UploadQueueSize;){var r="waiting"===t[i].state||"checking"===t[i].state||"uploading"===t[i].state;t[i]&&r?i++:(n[t[i].id]&&delete n[t[i].id],t.splice(i,1),l--)}f()}},m=function(){if(l<t.length&&c<e.options.FileParallelLimit){var n=t[l];if(l++,"waiting"===n.state){c++,n.state="checking",n.params.onTaskStart&&n.params.onTaskStart(d(n)),!n.params.UploadData&&(n.params.UploadData={});var y=r.formatParams(n.api,n.params);o[n.api].call(e,y,(function(t,data){e._isRunningTask(n.id)&&("checking"!==n.state&&"uploading"!==n.state||(n.state=t?"error":"success",t&&(n.error=t),c--,f(),m(e),n.callback&&n.callback(t,data),"success"===n.state&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),h())})),f()}m(e)}},y=function(t,r){var o=n[t];if(o){var l=o&&"waiting"===o.state,d=o&&("checking"===o.state||"uploading"===o.state);if("canceled"===r&&"canceled"!==o.state||"paused"===r&&l||"paused"===r&&d){if("paused"===r&&o.params.Body&&"function"==typeof o.params.Body.pipe)return void console.error("stream not support pause");o.state=r,e.emit("inner-kill-task",{TaskId:t,toState:r}),f(),d&&(c--,m(e)),"canceled"===r&&(o.params&&(delete o.params.UploadData,delete o.params.Body,delete o.params),delete o.callback)}h()}};e._addTasks=function(t){r.each(t,(function(t){e._addTask(t.api,t.params,t.callback,!0)})),f()};var v=!0;e._addTask=function(o,c,l,d){c=r.formatParams(o,c);var y=r.uuid();c.TaskId=y,c.onTaskReady&&c.onTaskReady(y),c.TaskReady&&(c.TaskReady(y),v&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),v=!1);var C={params:c,callback:l,api:o,index:t.length,id:y,Bucket:c.Bucket,Region:c.Region,Key:c.Key,FilePath:c.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null},k=c.onHashProgress;c.onHashProgress=function(t){e._isRunningTask(C.id)&&(C.hashPercent=t.percent,k&&k(t),f())};var S=c.onProgress;return c.onProgress=function(t){e._isRunningTask(C.id)&&("checking"===C.state&&(C.state="uploading"),C.loaded=t.loaded,C.speed=t.speed,C.percent=t.percent,S&&S(t),f())},r.getFileSize(o,c,(function(r,o){r?l(r):(n[y]=C,t.push(C),C.size=o,!d&&f(),m(e),h())})),y},e._isRunningTask=function(e){var t=n[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return r.map(t,d)},e.cancelTask=function(e){y(e,"canceled")},e.pauseTask=function(e){y(e,"paused")},e.restartTask=function(e){var t=n[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",f(),l=Math.min(l,t.index),m())},e.isUploadRunning=function(){return c||l<t.length}}},853:function(e,t,n){var r=n(854),o=n(839);function c(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},r=e.AccessControlList.Grant;r&&(r=o.isArray(r)?r:[r]);var c={READ:0,WRITE:0,FULL_CONTROL:0};return r.length&&o.each(r,(function(r){"qcs::cam::anyone:anyone"===r.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===r.Grantee.URI?c[r.Permission]=1:r.Grantee.ID!==e.Owner.ID&&t[n[r.Permission]].push('id="'+r.Grantee.ID+'"')})),c.FULL_CONTROL||c.WRITE&&c.READ?t.ACL="public-read-write":c.READ?t.ACL="public-read":t.ACL="private",o.each(n,(function(e){t[e]=l(t[e].join(","))})),t}function l(e){var i,t,n=e.split(","),r={};for(i=0;i<n.length;)r[t=n[i].trim()]?n.splice(i,1):(r[t]=!0,n[i]=t,i++);return n.join(",")}function d(e){var t=e.bucket,n=t.substr(0,t.lastIndexOf("-")),r=t.substr(t.lastIndexOf("-")+1),c=e.domain,l=e.region,object=e.object,d=e.protocol||(o.isBrowser&&"http:"===location.protocol?"http:":"https:");c||(c=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(l)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(c="{Bucket}."+c)),c=(c=c.replace(/\{\{AppId\}\}/gi,r).replace(/\{\{Bucket\}\}/gi,n).replace(/\{\{Region\}\}/gi,l).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,r).replace(/\{BucketName\}/gi,n).replace(/\{Bucket\}/gi,t).replace(/\{Region\}/gi,l).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(c)||(c=d+"//"+c),"/"===c.slice(-1)&&(c=c.slice(0,-1));var f=c;return e.ForcePathStyle&&(f+="/"+t),f+="/",object&&(f+=o.camSafeUrlEncode(object).replace(/%2F/g,"/")),e.isLocation&&(f=f.replace(/^https?:\/\//,"")),f}function f(e,t){var n=o.clone(e.Headers);delete n["Content-Type"],delete n["Cache-Control"],o.each(n,(function(e,t){""===e&&delete n[t]}));var r=function(e){var n=!1,r=e.Authorization;if(r)if(r.indexOf(" ")>-1)n=!1;else if(r.indexOf("q-sign-algorithm=")>-1&&r.indexOf("q-ak=")>-1&&r.indexOf("q-sign-time=")>-1&&r.indexOf("q-key-time=")>-1&&r.indexOf("q-url-param-list=")>-1)n=!0;else try{(r=atob(r)).indexOf("a=")>-1&&r.indexOf("k=")>-1&&r.indexOf("t=")>-1&&r.indexOf("r=")>-1&&r.indexOf("b=")>-1&&(n=!0)}catch(e){}n?t&&t(null,e):t&&t("authorization error")},c=this,l=e.Bucket||"",d=e.Region||"",f=e.Key||"";c.options.ForcePathStyle&&l&&(f=l+"/"+f);var h="/"+f,m={},y=e.Scope;if(!y){var v=e.Action||"",C=e.ResourceKey||e.Key||"";y=e.Scope||[{action:v,bucket:l,region:d,prefix:C}]}var k=o.md5(JSON.stringify(y));c._StsCache=c._StsCache||[],function(){var i,e;for(i=c._StsCache.length-1;i>=0;i--){e=c._StsCache[i];var t=Math.round(o.getSkewTime(c.options.SystemClockOffset)/1e3)+30;if(e.StartTime&&t<e.StartTime||t>=e.ExpiredTime)c._StsCache.splice(i,1);else if(!e.ScopeLimit||e.ScopeLimit&&e.ScopeKey===k){m=e;break}}}();var S,x=function(){var t={Authorization:o.getAuth({SecretId:m.TmpSecretId,SecretKey:m.TmpSecretKey,Method:e.Method,Pathname:h,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset}),XCosSecurityToken:m.XCosSecurityToken||"",Token:m.Token||"",ClientIP:m.ClientIP||"",ClientUA:m.ClientUA||""};r(t)};if(m.ExpiredTime&&m.ExpiredTime-o.getSkewTime(c.options.SystemClockOffset)/1e3>60)x();else if(c.options.getAuthorization)c.options.getAuthorization.call(c,{Bucket:l,Region:d,Method:e.Method,Key:f,Pathname:h,Query:e.Query,Headers:n,Scope:y},(function(e){"string"==typeof e&&(e={Authorization:e}),e.TmpSecretId&&e.TmpSecretKey&&e.XCosSecurityToken&&e.ExpiredTime?((m=e||{}).Scope=y,m.ScopeKey=k,c._StsCache.push(m),x()):r(e)}));else{if(!c.options.getSTS)return S={Authorization:o.getAuth({SecretId:e.SecretId||c.options.SecretId,SecretKey:e.SecretKey||c.options.SecretKey,Method:e.Method,Pathname:h,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset}),XCosSecurityToken:c.options.XCosSecurityToken},r(S),S;c.options.getSTS.call(c,{Bucket:l,Region:d},(function(data){(m=data||{}).Scope=y,m.ScopeKey=k,m.TmpSecretId=m.SecretId,m.TmpSecretKey=m.SecretKey,c._StsCache.push(m),x()}))}return""}function h(e){var t=!1,n=!1,r=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var c=e.error.Code,l=e.error.Message;("RequestTimeTooSkewed"===c||"AccessDenied"===c&&"Request has expired"===l)&&(n=!0)}catch(e){}if(e)if(n&&r){var d=Date.parse(r);this.options.CorrectClockSkew&&Math.abs(o.getSkewTime(this.options.SystemClockOffset)-d)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=d-Date.now(),t=!0)}else 5===Math.round(e.statusCode/100)&&(t=!0);return t}function m(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=o.clearKey(e.qs),e.headers&&(e.headers=o.clearKey(e.headers)),e.qs&&(e.qs=o.clearKey(e.qs));var r=o.clone(e.qs);e.action&&(r[e.action]="");var c=function(o){var l=n.options.SystemClockOffset;f.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:r,Headers:e.headers,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope},(function(r,d){r?t(r):(e.AuthData=d,y.call(n,e,(function(r,data){r&&o<2&&(l!==n.options.SystemClockOffset||h.call(n,r))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,delete e.headers["x-cos-security-token"]),c(o+1)):t(r,data)})))}))};c(0)}function y(e,t){var n=this,c=e.TaskId;if(!c||n._isRunningTask(c)){var l=e.Bucket,f=e.Region,object=e.Key,h=e.method||"GET",m=e.url,body=e.body,y=e.json,v=e.rawBody;m=m||d({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:l,region:f,object:object}),e.action&&(m=m+"?"+e.action);var C={method:h,url:m,headers:e.headers,qs:e.qs,body:body,json:y};if(C.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(C.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(C.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(C.headers.clientUA=e.AuthData.ClientUA),e.AuthData.XCosSecurityToken&&(C.headers["x-cos-security-token"]=e.AuthData.XCosSecurityToken),C.headers&&(C.headers=o.clearKey(C.headers)),C=o.clearKey(C),e.onProgress&&"function"==typeof e.onProgress){var k=body&&(body.size||body.length)||0;C.onProgress=function(t){if(!c||n._isRunningTask(c)){var r=t?t.loaded:0;e.onProgress({loaded:r,total:k})}}}this.options.Timeout&&(C.timeout=this.options.Timeout),n.emit("before-send",C);var S=r(C,(function(e,r,body){if("abort"!==e){var l,d=function(e,data){if(c&&n.off("inner-kill-task",x),!l){l=!0;var d={};r&&r.statusCode&&(d.statusCode=r.statusCode),r&&r.headers&&(d.headers=r.headers),e?(e=o.extend(e||{},d),t(e,null)):(data=o.extend(data||{},d),t(null,data)),S=null}};if(e)d({error:e});else{var f;try{f=body&&body.indexOf("<")>-1&&body.indexOf(">")>-1&&o.xml2json(body)||{}}catch(e){f=body||{}}var h=r.statusCode;2===Math.floor(h/100)?(v&&((f={}).body=body),f.Error?d({error:f.Error}):d(null,f)):d({error:f.Error||f})}}})),x=function(data){data.TaskId===c&&(S&&S.abort&&S.abort(),n.off("inner-kill-task",x))};c&&n.on("inner-kill-task",x)}}var v={getBucket:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,m.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},(function(e,data){if(e)return t(e);var n=data.ListBucketResult||{},r=n.Contents||[],c=n.CommonPrefixes||[];r=o.isArray(r)?r:[r],c=o.isArray(c)?c:[c];var l=o.clone(n);o.extend(l,{Contents:r,CommonPrefixes:c,statusCode:data.statusCode,headers:data.headers}),t(null,l)}))},headBucket:function(e,t){m.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},(function(e,data){t(e,data)}))},deleteBucket:function(e,t){m.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketAcl:function(e,t){m.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},(function(e,data){if(e)return t(e);var n=data.AccessControlPolicy||{},r=n.Owner||{},l=n.AccessControlList.Grant||[];l=o.isArray(l)?l:[l];var d=c(n);data.headers&&data.headers["x-cos-acl"]&&(d.ACL=data.headers["x-cos-acl"]),d=o.extend(d,{Owner:r,Grants:l,statusCode:data.statusCode,headers:data.headers}),t(null,d)}))},putBucketAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var c=o.clone(e.AccessControlPolicy||{}),d=c.Grants||c.Grant;d=o.isArray(d)?d:[d],delete c.Grant,delete c.Grants,c.AccessControlList={Grant:d},r=o.json2xml({AccessControlPolicy:c}),n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(r))}o.each(n,(function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=l(n[t]))})),m.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:r},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketCors:function(e,t){m.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,data){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var n={CORSRules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var r=data.CORSConfiguration||{},c=r.CORSRules||r.CORSRule||[];c=o.clone(o.isArray(c)?c:[c]),o.each(c,(function(e){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t,n){var r=t+"s",c=e[r]||e[t]||[];delete e[t],e[r]=o.isArray(c)?c:[c]}))})),t(null,{CORSRules:c,statusCode:data.statusCode,headers:data.headers})}}))},putBucketCors:function(e,t){var n=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];n=o.clone(o.isArray(n)?n:[n]),o.each(n,(function(e){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t,n){var r=t+"s",c=e[r]||e[t]||[];delete e[r],e[t]=o.isArray(c)?c:[c]}))}));var r=o.json2xml({CORSConfiguration:{CORSRule:n}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"cors",headers:c},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},deleteBucketCors:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode||e.statusCode,headers:data.headers})}))},getBucketLocation:function(e,t){m.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},(function(e,data){if(e)return t(e);t(null,data)}))},putBucketTagging:function(e,t){var n=e.Tagging||{},r=n.TagSet||n.Tags||e.Tags||[];r=o.clone(o.isArray(r)?r:[r]);var c=o.json2xml({Tagging:{TagSet:{Tag:r}}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=o.binaryBase64(o.md5(c)),m.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"tagging",headers:l},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketTagging:function(e,t){m.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,data){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var n={Tags:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else{var r=[];try{r=data.Tagging.TagSet.Tag||[]}catch(e){}r=o.clone(o.isArray(r)?r:[r]),t(null,{Tags:r,statusCode:data.statusCode,headers:data.headers})}}))},deleteBucketTagging:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketPolicy:function(e,t){m.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},(function(e,data){if(e)return e.statusCode&&403===e.statusCode?t({ErrorStatus:"Access Denied"}):e.statusCode&&405===e.statusCode?t({ErrorStatus:"Method Not Allowed"}):e.statusCode&&404===e.statusCode?t({ErrorStatus:"Policy Not Found"}):t(e);var n={};try{n=JSON.parse(data.body)}catch(e){}t(null,{Policy:n,statusCode:data.statusCode,headers:data.headers})}))},putBucketPolicy:function(e,t){var n=e.Policy,r=n;try{"string"==typeof n?n=JSON.parse(r):r=JSON.stringify(n)}catch(e){t({error:"Policy format error"})}var c=e.Headers;c["Content-Type"]="application/json",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:o.isBrowser?r:n,headers:c,json:!0},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},deleteBucketPolicy:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode||e.statusCode,headers:data.headers})}))},getBucketLifecycle:function(e,t){m.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,data){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var n={Rules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var r=[];try{r=data.LifecycleConfiguration.Rule||[]}catch(e){}r=o.clone(o.isArray(r)?r:[r]),t(null,{Rules:r,statusCode:data.statusCode,headers:data.headers})}}))},putBucketLifecycle:function(e,t){var n=(e.LifecycleConfiguration||{}).Rules||[];n=o.clone(n);var r=o.json2xml({LifecycleConfiguration:{Rule:n}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"lifecycle",headers:c},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},deleteBucketLifecycle:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},putBucketVersioning:function(e,t){if(e.VersioningConfiguration){var n=e.VersioningConfiguration||{},r=o.json2xml({VersioningConfiguration:n}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"versioning",headers:c},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))}else t({error:"missing param VersioningConfiguration"})},getBucketVersioning:function(e,t){m.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},(function(e,data){e||!data.VersioningConfiguration&&(data.VersioningConfiguration={}),t(e,data)}))},putBucketReplication:function(e,t){var n=o.clone(e.ReplicationConfiguration),r=o.json2xml({ReplicationConfiguration:n});r=(r=r.replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>");var c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"replication",headers:c},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketReplication:function(e,t){m.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,data){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var n={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else e||!data.ReplicationConfiguration&&(data.ReplicationConfiguration={}),data.ReplicationConfiguration.Rule&&(data.ReplicationConfiguration.Rules=data.ReplicationConfiguration.Rule,delete data.ReplicationConfiguration.Rule),t(e,data)}))},deleteBucketReplication:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getObject:function(e,t){var n={};n["response-content-type"]=e.ResponseContentType,n["response-content-language"]=e.ResponseContentLanguage,n["response-expires"]=e.ResponseExpires,n["response-cache-control"]=e.ResponseCacheControl,n["response-content-disposition"]=e.ResponseContentDisposition,n["response-content-encoding"]=e.ResponseContentEncoding,m.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,qs:n,rawBody:!0},(function(n,data){if(n){var r=n.statusCode;return e.Headers["If-Modified-Since"]&&r&&304===r?t(null,{NotModified:!0}):t(n)}var c={};c.Body=data.body,data.headers&&data.headers.etag&&(c.ETag=data.headers&&data.headers.etag),o.extend(c,{statusCode:data.statusCode,headers:data.headers}),t(null,c)}))},headObject:function(e,t){m.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(n,data){if(n){var r=n.statusCode;return e.Headers["If-Modified-Since"]&&r&&304===r?t(null,{NotModified:!0,statusCode:r}):t(n)}data.headers&&data.headers.etag&&(data.ETag=data.headers&&data.headers.etag),t(null,data)}))},listObjectVersions:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,m.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions"},(function(e,data){if(e)return t(e);var n=data.ListVersionsResult||{},r=n.DeleteMarker||[];r=o.isArray(r)?r:[r];var c=n.Version||[];c=o.isArray(c)?c:[c];var l=o.clone(n);delete l.DeleteMarker,delete l.Version,o.extend(l,{DeleteMarkers:r,Versions:c,statusCode:data.statusCode,headers:data.headers}),t(null,l)}))},putObject:function(e,t){var n=this,r=e.ContentLength,c=o.throttleOnProgress.call(n,r,e.onProgress),l=e.Headers;!l["Cache-Control"]&&(l["Cache-Control"]="");var f=l["Content-Type"]||e.Body&&e.Body.type;!l["Content-Type"]&&f&&(l["Content-Type"]=f),o.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,(function(l){l&&(e.Headers["Content-MD5"]=o.binaryBase64(l)),void 0!==e.ContentLength&&(e.Headers["Content-Length"]=e.ContentLength),m.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,body:e.Body,onProgress:c},(function(o,data){if(o)return c(null,!0),t(o);if(c({loaded:r,total:r},!0),data&&data.headers&&data.headers.etag){var l=d({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});return l=l.substr(l.indexOf("://")+3),t(null,{Location:l,ETag:data.headers.etag,statusCode:data.statusCode,headers:data.headers})}t(null,data)}))}))},deleteObject:function(e,t){m.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId},(function(e,data){if(e){var n=e.statusCode;return n&&204===n?t(null,{statusCode:n}):n&&404===n?t(null,{BucketNotFound:!0,statusCode:n}):t(e)}t(null,{statusCode:data.statusCode,headers:data.headers})}))},getObjectAcl:function(e,t){m.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},(function(e,data){if(e)return t(e);var n=data.AccessControlPolicy||{},r=n.Owner||{},l=n.AccessControlList&&n.AccessControlList.Grant||[];l=o.isArray(l)?l:[l];var d=c(n);data.headers&&data.headers["x-cos-acl"]&&(d.ACL=data.headers["x-cos-acl"]),d=o.extend(d,{Owner:r,Grants:l,statusCode:data.statusCode,headers:data.headers}),t(null,d)}))},putObjectAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var c=o.clone(e.AccessControlPolicy||{}),d=c.Grants||c.Grant;d=o.isArray(d)?d:[d],delete c.Grant,delete c.Grants,c.AccessControlList={Grant:d},r=o.json2xml({AccessControlPolicy:c}),n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(r))}o.each(n,(function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=l(n[t]))})),m.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:r},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},optionsObject:function(e,t){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,m.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},(function(e,data){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var n=data.headers||{};t(null,{AccessControlAllowOrigin:n["access-control-allow-origin"],AccessControlAllowMethods:n["access-control-allow-methods"],AccessControlAllowHeaders:n["access-control-allow-headers"],AccessControlExposeHeaders:n["access-control-expose-headers"],AccessControlMaxAge:n["access-control-max-age"],statusCode:data.statusCode,headers:data.headers})}))},putObjectCopy:function(e,t){var n=e.Headers;!n["Cache-Control"]&&(n["Cache-Control"]="");var r=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(r){var c=r[1],l=r[3],d=decodeURIComponent(r[4]);m.call(this,{Scope:[{action:"name/cos:GetObject",bucket:c,region:l,prefix:d},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(e,data){if(e)return t(e);var n=o.clone(data.CopyObjectResult||{});o.extend(n,{statusCode:data.statusCode,headers:data.headers}),t(null,n)}))}else t({error:"CopySource format error"})},deleteMultipleObject:function(e,t){var n=e.Objects||[],r=e.Quiet;n=o.isArray(n)?n:[n];var c=o.json2xml({Delete:{Object:n,Quiet:r||!1}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=o.binaryBase64(o.md5(c));var d=o.map(n,(function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}}));m.call(this,{Scope:d,method:"POST",Bucket:e.Bucket,Region:e.Region,body:c,action:"delete",headers:l},(function(e,data){if(e)return t(e);var n=data.DeleteResult||{},r=n.Deleted||[],c=n.Error||[];r=o.isArray(r)?r:[r],c=o.isArray(c)?c:[c];var l=o.clone(n);o.extend(l,{Error:c,Deleted:r,statusCode:data.statusCode,headers:data.headers}),t(null,l)}))},restoreObject:function(e,t){var n=e.Headers;if(e.RestoreRequest){var r=e.RestoreRequest||{},c=o.json2xml({RestoreRequest:r});n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(c)),m.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:c,action:"restore",headers:n},(function(e,data){t(e,data)}))}else t({error:"missing param RestoreRequest"})},uploadPartCopy:function(e,t){var n=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(n){var r=n[1],c=n[3],l=decodeURIComponent(n[4]);m.call(this,{Scope:[{action:"name/cos:GetObject",bucket:r,region:c,prefix:l},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},(function(e,data){if(e)return t(e);var n=o.clone(data.CopyPartResult||{});o.extend(n,{statusCode:data.statusCode,headers:data.headers}),t(null,n)}))}else t({error:"CopySource format error"})},multipartInit:function(e,t){var n,r=e.Headers,c=(navigator&&navigator.userAgent||"").match(/ TBS\/(\d{6}) /);"http:"===location.protocol&&c&&c[1].length<=6&&c[1]<"044429"&&(n=o.json2xml({}),r["Content-MD5"]=o.binaryBase64(o.md5(n)),r["Content-Type"]||(r["Content-Type"]=e.Body&&e.Body.type||"application/octet-stream")),!r["Cache-Control"]&&(r["Cache-Control"]=""),m.call(this,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,body:n},(function(e,data){return e?t(e):(data=o.clone(data||{}))&&data.InitiateMultipartUploadResult?t(null,o.extend(data.InitiateMultipartUploadResult,{statusCode:data.statusCode,headers:data.headers})):void t(null,data)}))},multipartUpload:function(e,t){var n=this;o.getFileSize("multipartUpload",e,(function(){o.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,(function(r){r&&(e.Headers["Content-MD5"]=o.binaryBase64(r)),m.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null},(function(e,data){if(e)return t(e);data.headers=data.headers||{},t(null,{ETag:data.headers.etag||"",statusCode:data.statusCode,headers:data.headers})}))}))}))},multipartComplete:function(e,t){for(var n=this,r=e.UploadId,c=e.Parts,i=0,l=c.length;i<l;i++)0!==c[i].ETag.indexOf('"')&&(c[i].ETag='"'+c[i].ETag+'"');var f=o.json2xml({CompleteMultipartUpload:{Part:c}}),h=e.Headers;h["Content-Type"]="application/xml",h["Content-MD5"]=o.binaryBase64(o.md5(f)),m.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:r},body:f,headers:h},(function(r,data){if(r)return t(r);var c=d({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),l=data.CompleteMultipartUploadResult||{},f=o.extend(l,{Location:c,statusCode:data.statusCode,headers:data.headers});t(null,f)}))},multipartList:function(e,t){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=o.clearKey(n),m.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads"},(function(e,data){if(e)return t(e);if(data&&data.ListMultipartUploadsResult){var n=data.ListMultipartUploadsResult.Upload||[],r=data.ListMultipartUploadsResult.CommonPrefixes||[];r=o.isArray(r)?r:[r],n=o.isArray(n)?n:[n],data.ListMultipartUploadsResult.Upload=n,data.ListMultipartUploadsResult.CommonPrefixes=r}var c=o.clone(data.ListMultipartUploadsResult||{});o.extend(c,{statusCode:data.statusCode,headers:data.headers}),t(null,c)}))},multipartListPart:function(e,t){var n={};n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,m.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},(function(e,data){if(e)return t(e);var n=data.ListPartsResult||{},r=n.Part||[];r=o.isArray(r)?r:[r],n.Part=r;var c=o.clone(n);o.extend(c,{statusCode:data.statusCode,headers:data.headers}),t(null,c)}))},multipartAbort:function(e,t){var n={};n.uploadId=e.UploadId,m.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},getObjectUrl:function(e,t){var n=d({ForcePathStyle:this.options.ForcePathStyle,protocol:e.Protocol||this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});if(void 0!==e.Sign&&!e.Sign)return t(null,{Url:n}),n;var r=f.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires},(function(e,r){if(t)if(e)t(e);else{var o=n;o+="?"+(r.Authorization.indexOf("q-signature")>-1?r.Authorization:"sign="+encodeURIComponent(r.Authorization)),r.XCosSecurityToken&&(o+="&x-cos-security-token="+r.XCosSecurityToken),r.ClientIP&&(o+="&clientIP="+r.ClientIP),r.ClientUA&&(o+="&clientUA="+r.ClientUA),r.Token&&(o+="&token="+r.Token),setTimeout((function(){t(null,{Url:o})}))}}));return r?n+"?"+r.Authorization+(r.XCosSecurityToken?"&x-cos-security-token="+r.XCosSecurityToken:""):n},getAuth:function(e){return o.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:this.options.UseRawKey,SystemClockOffset:this.options.SystemClockOffset})}};e.exports.init=function(e,t){t.transferToTaskMethod(v,"putObject"),o.each(v,(function(t,n){e.prototype[n]=o.apiWrapper(n,t),function(e,t,n){o.each(["Cors","Acl"],(function(r){if(e.slice(-r.length)===r){var c=e.slice(0,-r.length)+r.toUpperCase(),l=o.apiWrapper(e,t),d=!1;n[c]=function(){!d&&console.warn("warning: cos."+c+" has been deprecated. Please Use cos."+e+" instead."),d=!0,l.apply(this,arguments)}}}))}(n,t,e.prototype)}))}},854:function(e,t,n){var r=n(855),o=function(){var e=[],t=e.slice,n=e.concat,r=e.push,o=e.indexOf,c={},l=c.toString,d=c.hasOwnProperty,f={},h="1.11.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-dimensions,-offset,-deprecated,-event-alias,-wrap",m=function(e,t){return new m.fn.init(e,t)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,C=/-([\da-z])/gi,k=function(e,t){return t.toUpperCase()};function S(e){var t=e.length,n=m.type(e);return"function"!==n&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}m.fn=m.prototype={jquery:h,constructor:m,selector:"",length:0,toArray:function(){return t.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:t.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var e=this.length,t=+i+(i<0?e:0);return this.pushStack(t>=0&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:r,sort:e.sort,splice:e.splice},m.extend=m.fn.extend=function(){var e,t,n,r,o,c,l=arguments[0]||{},i=1,d=arguments.length,f=!1;for("boolean"==typeof l&&(f=l,l=arguments[i]||{},i++),"object"==typeof l||m.isFunction(l)||(l={}),i===d&&(l=this,i--);i<d;i++)if(null!=(o=arguments[i]))for(r in o)e=l[r],l!==(n=o[r])&&(f&&n&&(m.isPlainObject(n)||(t=m.isArray(n)))?(t?(t=!1,c=e&&m.isArray(e)?e:[]):c=e&&m.isPlainObject(e)?e:{},l[r]=m.extend(f,c,n)):void 0!==n&&(l[r]=n));return l},m.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray||function(e){return"array"===m.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==m.type(e)||e.nodeType||m.isWindow(e))return!1;try{if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(f.ownLast)for(t in e)return d.call(e,t);for(t in e);return void 0===t||d.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[l.call(e)]||"object":typeof e},globalEval:function(data){data&&m.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(e){return e.replace(v,"ms-").replace(C,k)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,r=e.length,o=S(e);if(n){if(o)for(;i<r&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(o)for(;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(text){return null==text?"":(text+"").replace(y,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?m.merge(n,"string"==typeof e?[e]:e):r.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(o)return o.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,c=!n;i<o;i++)!t(e[i],i)!==c&&r.push(e[i]);return r},map:function(e,t,r){var o,i=0,c=e.length,l=[];if(S(e))for(;i<c;i++)null!=(o=t(e[i],i,r))&&l.push(o);else for(i in e)null!=(o=t(e[i],i,r))&&l.push(o);return n.apply([],l)},guid:1,proxy:function(e,n){var r,o,c;if("string"==typeof n&&(c=e[n],n=e,e=c),m.isFunction(e))return r=t.call(arguments,2),(o=function(){return e.apply(n||this,r.concat(t.call(arguments)))}).guid=e.guid=e.guid||m.guid++,o},now:function(){return+new Date},support:f}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(i,e){c["[object "+e+"]"]=e.toLowerCase()}));var x,w=window.document,_=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:_.exec(e))||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),rsingleTag.test(n[1])&&m.isPlainObject(t))for(n in t)m.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=w.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=w,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==x.ready?x.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,x=m(w);var R,T=/\S+/g,A={};function E(){w.addEventListener?(w.removeEventListener("DOMContentLoaded",B,!1),window.removeEventListener("load",B,!1)):(w.detachEvent("onreadystatechange",B),window.detachEvent("onload",B))}function B(){(w.addEventListener||"load"===event.type||"complete"===w.readyState)&&(E(),m.ready())}m.Callbacks=function(e){e="string"==typeof e?A[e]||function(e){var object=A[e]={};return m.each(e.match(T)||[],(function(e,t){object[t]=!0})),object}(e):m.extend({},e);var t,n,r,o,c,l,d=[],f=!e.once&&[],h=function(data){for(n=e.memory&&data,r=!0,c=l||0,l=0,o=d.length,t=!0;d&&c<o;c++)if(!1===d[c].apply(data[0],data[1])&&e.stopOnFalse){n=!1;break}t=!1,d&&(f?f.length&&h(f.shift()):n?d=[]:y.disable())},y={add:function(){if(d){var r=d.length;!function t(n){m.each(n,(function(n,r){var o=m.type(r);"function"===o?e.unique&&y.has(r)||d.push(r):r&&r.length&&"string"!==o&&t(r)}))}(arguments),t?o=d.length:n&&(l=r,h(n))}return this},remove:function(){return d&&m.each(arguments,(function(e,n){for(var r;(r=m.inArray(n,d,r))>-1;)d.splice(r,1),t&&(r<=o&&o--,r<=c&&c--)})),this},has:function(e){return e?m.inArray(e,d)>-1:!(!d||!d.length)},empty:function(){return d=[],o=0,this},disable:function(){return d=f=n=void 0,this},disabled:function(){return!d},lock:function(){return f=void 0,n||y.disable(),this},locked:function(){return!f},fireWith:function(e,n){return!d||r&&!f||(n=[e,(n=n||[]).slice?n.slice():n],t?f.push(n):h(n)),this},fire:function(){return y.fireWith(this,arguments),this},fired:function(){return!!r}};return y},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(n){m.each(t,(function(i,t){var c=m.isFunction(e[i])&&e[i];o[t[1]]((function(){var e=c&&c.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===r?n.promise():this,c?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,r):r}},o={};return r.pipe=r.then,m.each(t,(function(i,e){var c=e[2],l=e[3];r[e[1]]=c.add,l&&c.add((function(){n=l}),t[1^i][2].disable,t[2][2].lock),o[e[0]]=function(){return o[e[0]+"With"](this===o?r:this,arguments),this},o[e[0]+"With"]=c.fireWith})),r.promise(o),e&&e.call(o,o),o},when:function(e){var n,r,o,i=0,c=t.call(arguments),l=c.length,d=1!==l||e&&m.isFunction(e.promise)?l:0,f=1===d?e:m.Deferred(),h=function(i,e,r){return function(o){e[i]=this,r[i]=arguments.length>1?t.call(arguments):o,r===n?f.notifyWith(e,r):--d||f.resolveWith(e,r)}};if(l>1)for(n=new Array(l),r=new Array(l),o=new Array(l);i<l;i++)c[i]&&m.isFunction(c[i].promise)?c[i].promise().done(h(i,o,c)).fail(f.reject).progress(h(i,r,n)):--d;return d||f.resolveWith(o,c),f.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){if(!(!0===e?--m.readyWait:m.isReady)){if(!w.body)return setTimeout(m.ready);m.isReady=!0,!0!==e&&--m.readyWait>0||(R.resolveWith(w,[m]),m.fn.triggerHandler&&(m(w).triggerHandler("ready"),m(w).off("ready")))}}}),m.ready.promise=function(e){if(!R)if(R=m.Deferred(),"complete"===w.readyState)setTimeout(m.ready);else if(w.addEventListener)w.addEventListener("DOMContentLoaded",B,!1),window.addEventListener("load",B,!1);else{w.attachEvent("onreadystatechange",B),window.attachEvent("onload",B);var t=!1;try{t=null==window.frameElement&&w.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!m.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}E(),m.ready()}}()}return R.promise(e)};var i;for(i in m(f))break;f.ownLast="0"!==i,f.inlineBlockNeedsLayout=!1,m((function(){var e,div,body,t;(body=w.getElementsByTagName("body")[0])&&body.style&&(div=w.createElement("div"),(t=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(t).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",f.inlineBlockNeedsLayout=e=3===div.offsetWidth,e&&(body.style.zoom=1)),body.removeChild(t))})),function(){var div=w.createElement("div");if(null==f.deleteExpando){f.deleteExpando=!0;try{delete div.test}catch(e){f.deleteExpando=!1}}div=null}(),m.acceptData=function(e){var t=m.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function L(e,t,data){if(void 0===data&&1===e.nodeType){var n="data-"+t.replace(O,"-$1").toLowerCase();if("string"==typeof(data=e.getAttribute(n))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:P.test(data)?m.parseJSON(data):data)}catch(e){}m.data(e,t,data)}else data=void 0}return data}function I(e){var t;for(t in e)if(("data"!==t||!m.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function M(t,n,data,r){if(m.acceptData(t)){var o,c,l=m.expando,d=t.nodeType,f=d?m.cache:t,h=d?t[l]:t[l]&&l;if(h&&f[h]&&(r||f[h].data)||void 0!==data||"string"!=typeof n)return h||(h=d?t[l]=e.pop()||m.guid++:l),f[h]||(f[h]=d?{}:{toJSON:m.noop}),"object"!=typeof n&&"function"!=typeof n||(r?f[h]=m.extend(f[h],n):f[h].data=m.extend(f[h].data,n)),c=f[h],r||(c.data||(c.data={}),c=c.data),void 0!==data&&(c[m.camelCase(n)]=data),"string"==typeof n?null==(o=c[n])&&(o=c[m.camelCase(n)]):o=c,o}}function D(e,t,n){if(m.acceptData(e)){var r,i,o=e.nodeType,c=o?m.cache:e,l=o?e[m.expando]:m.expando;if(c[l]){if(t&&(r=n?c[l]:c[l].data)){i=(t=m.isArray(t)?t.concat(m.map(t,m.camelCase)):t in r||(t=m.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!I(r):!m.isEmptyObject(r))return}(n||(delete c[l].data,I(c[l])))&&(o?m.cleanData([e],!0):f.deleteExpando||c!=c.window?delete c[l]:c[l]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?m.cache[e[m.expando]]:e[m.expando])&&!I(e)},data:function(e,t,data){return M(e,t,data)},removeData:function(e,t){return D(e,t)},_data:function(e,t,data){return M(e,t,data,!0)},_removeData:function(e,t){return D(e,t,!0)}}),m.fn.extend({data:function(e,t){var i,n,data,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(data=m.data(r),1===r.nodeType&&!m._data(r,"parsedAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&L(r,n=m.camelCase(n.slice(5)),data[n]);m._data(r,"parsedAttrs",!0)}return data}return"object"==typeof e?this.each((function(){m.data(this,e)})):arguments.length>1?this.each((function(){m.data(this,e,t)})):r?L(r,e,m.data(r,e)):void 0},removeData:function(e){return this.each((function(){m.removeData(this,e)}))}}),m.extend({queue:function(e,t,data){var n;if(e)return t=(t||"fx")+"queue",n=m._data(e,t),data&&(!n||m.isArray(data)?n=m._data(e,t,m.makeArray(data)):n.push(data)),n||[]},dequeue:function(e,t){t=t||"fx";var n=m.queue(e,t),r=n.length,o=n.shift(),c=m._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete c.stop,o.call(e,(function(){m.dequeue(e,t)}),c)),!r&&c&&c.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return m._data(e,n)||m._data(e,n,{empty:m.Callbacks("once memory").add((function(){m._removeData(e,t+"queue"),m._removeData(e,n)}))})}}),m.fn.extend({queue:function(e,data){var t=2;return"string"!=typeof e&&(data=e,e="fx",t--),arguments.length<t?m.queue(this[0],e):void 0===data?this:this.each((function(){var t=m.queue(this,e,data);m._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=m.Deferred(),c=this,i=this.length,l=function(){--r||o.resolveWith(c,[c])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=m._data(c[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),o.promise(t)}}),m.event={global:{},add:function(e,t,n,data,r){var o,c,l,d,f,h,y,v,C,k,S,x=m._data(e);if(x){for(n.handler&&(n=(d=n).handler,r=d.selector),n.guid||(n.guid=m.guid++),(c=x.events)||(c=x.events={}),(h=x.handle)||((h=x.handle=function(e){return void 0===m||e&&m.event.triggered===e.type?void 0:m.event.dispatch.apply(h.elem,arguments)}).elem=e),l=(t=(t||"").match(T)||[""]).length;l--;)C=S=(o=N.exec(t[l])||[])[1],k=(o[2]||"").split(".").sort(),C&&(f=m.event.special[C]||{},C=(r?f.delegateType:f.bindType)||C,f=m.event.special[C]||{},y=m.extend({type:C,origType:S,data:data,handler:n,guid:n.guid,selector:r,needsContext:r&&m.expr.match.needsContext.test(r),namespace:k.join(".")},d),(v=c[C])||((v=c[C]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,data,k,h)||(e.addEventListener?e.addEventListener(C,h,!1):e.attachEvent&&e.attachEvent("on"+C,h))),f.add&&(f.add.call(e,y),y.handler.guid||(y.handler.guid=n.guid)),r?v.splice(v.delegateCount++,0,y):v.push(y),m.event.global[C]=!0);e=null}},remove:function(e,t,n,r,o){var c,l,d,f,h,y,v,C,k,S,x,w=m.hasData(e)&&m._data(e);if(w&&(y=w.events)){for(h=(t=(t||"").match(T)||[""]).length;h--;)if(k=x=(d=N.exec(t[h])||[])[1],S=(d[2]||"").split(".").sort(),k){for(v=m.event.special[k]||{},C=y[k=(r?v.delegateType:v.bindType)||k]||[],d=d[2]&&new RegExp("(^|\\.)"+S.join("\\.(?:.*\\.|)")+"(\\.|$)"),f=c=C.length;c--;)l=C[c],!o&&x!==l.origType||n&&n.guid!==l.guid||d&&!d.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(C.splice(c,1),l.selector&&C.delegateCount--,v.remove&&v.remove.call(e,l));f&&!C.length&&(v.teardown&&!1!==v.teardown.call(e,S,w.handle)||m.removeEvent(e,k,w.handle),delete y[k])}else for(k in y)m.event.remove(e,k+t[h],n,r,!0);m.isEmptyObject(y)&&(delete w.handle,m._removeData(e,"events"))}},trigger:function(e,data,t,n){var r,o,c,l,f,h,i,y=[t||w],v=d.call(e,"type")?e.type:e,C=d.call(e,"namespace")?e.namespace.split("."):[];if(c=h=t=t||w,3!==t.nodeType&&8!==t.nodeType&&!F.test(v+m.event.triggered)&&(v.indexOf(".")>=0&&(C=v.split("."),v=C.shift(),C.sort()),o=v.indexOf(":")<0&&"on"+v,(e=e[m.expando]?e:new m.Event(v,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=C.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=t),data=null==data?[e]:m.makeArray(data,[e]),f=m.event.special[v]||{},n||!f.trigger||!1!==f.trigger.apply(t,data))){if(!n&&!f.noBubble&&!m.isWindow(t)){for(l=f.delegateType||v,F.test(l+v)||(c=c.parentNode);c;c=c.parentNode)y.push(c),h=c;h===(t.ownerDocument||w)&&y.push(h.defaultView||h.parentWindow||window)}for(i=0;(c=y[i++])&&!e.isPropagationStopped();)e.type=i>1?l:f.bindType||v,(r=(m._data(c,"events")||{})[e.type]&&m._data(c,"handle"))&&r.apply(c,data),(r=o&&c[o])&&r.apply&&m.acceptData(c)&&(e.result=r.apply(c,data),!1===e.result&&e.preventDefault());if(e.type=v,!n&&!e.isDefaultPrevented()&&(!f._default||!1===f._default.apply(y.pop(),data))&&m.acceptData(t)&&o&&t[v]&&!m.isWindow(t)){(h=t[o])&&(t[o]=null),m.event.triggered=v;try{t[v]()}catch(e){}m.event.triggered=void 0,h&&(t[o]=h)}return e.result}},dispatch:function(e){e=m.event.fix(e);var i,n,r,o,c,l=[],d=t.call(arguments),f=(m._data(this,"events")||{})[e.type]||[],h=m.event.special[e.type]||{};if(d[0]=e,e.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,e)){for(l=m.event.handlers.call(this,e,f),i=0;(o=l[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,c=0;(r=o.handlers[c++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(n=((m.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,d))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,c=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&(!e.button||"click"!==e.type))for(;d!=this;d=d.parentNode||this)if(1===d.nodeType&&(!0!==d.disabled||"click"!==e.type)){for(o=[],i=0;i<l;i++)void 0===o[n=(r=t[i]).selector+" "]&&(o[n]=r.needsContext?m(n,this).index(d)>=0:m.find(n,this,null,[d]).length),o[n]&&o.push(r);o.length&&c.push({elem:d,handlers:o})}return l<t.length&&c.push({elem:this,handlers:t.slice(l)}),c},fix:function(e){if(e[m.expando])return e;var i,t,n,r=e.type,o=e,c=this.fixHooks[r];for(c||(this.fixHooks[r]=c=U.test(r)?this.mouseHooks:H.test(r)?this.keyHooks:{}),n=c.props?this.props.concat(c.props):this.props,e=new m.Event(o),i=n.length;i--;)e[t=n[i]]=o[t];return e.target||(e.target=o.srcElement||w),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,c.filter?c.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var body,n,r,button=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||w).documentElement,body=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||body&&body.scrollLeft||0)-(r&&r.clientLeft||body&&body.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||body&&body.scrollTop||0)-(r&&r.clientTop||body&&body.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===button||(e.which=1&button?1:2&button?3:4&button?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(m.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var o=m.extend(new m.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?m.event.trigger(o,null,t):m.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},m.removeEvent=w.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?K:z):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0};var j=/^(?:input|select|textarea)$/i,H=/^key/,U=/^(?:mouse|pointer|contextmenu)|click/,F=/^(?:focusinfocus|focusoutblur)$/,N=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function z(){return!1}m.Event.prototype={isDefaultPrevented:z,isPropagationStopped:z,isImmediatePropagationStopped:z,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=K,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},f.submitBubbles||(m.event.special.submit={setup:function(){if(m.nodeName(this,"form"))return!1;m.event.add(this,"click._submit keypress._submit",(function(e){var t=e.target,form=m.nodeName(t,"input")||m.nodeName(t,"button")?t.form:void 0;form&&!m._data(form,"submitBubbles")&&(m.event.add(form,"submit._submit",(function(e){e._submit_bubble=!0})),m._data(form,"submitBubbles",!0))}))},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&m.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(m.nodeName(this,"form"))return!1;m.event.remove(this,"._submit")}}),f.changeBubbles||(m.event.special.change={setup:function(){if(j.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(m.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),m.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,e,!0)}))),!1;m.event.add(this,"beforeactivate._change",(function(e){var t=e.target;j.test(t.nodeName)&&!m._data(t,"changeBubbles")&&(m.event.add(t,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||m.event.simulate("change",this.parentNode,e,!0)})),m._data(t,"changeBubbles",!0))}))},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return m.event.remove(this,"._change"),!j.test(this.nodeName)}}),f.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=m._data(r,t);o||r.addEventListener(e,n,!0),m._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=m._data(r,t)-1;o?m._data(r,t,o):(r.removeEventListener(e,n,!0),m._removeData(r,t))}}})),m.fn.extend({on:function(e,t,data,n,r){var o,c;if("object"==typeof e){for(o in"string"!=typeof t&&(data=data||t,t=void 0),e)this.on(o,t,data,e[o],r);return this}if(null==data&&null==n?(n=t,data=t=void 0):null==n&&("string"==typeof t?(n=data,data=void 0):(n=data,data=t,t=void 0)),!1===n)n=z;else if(!n)return this;return 1===r&&(c=n,(n=function(e){return m().off(e),c.apply(this,arguments)}).guid=c.guid||(c.guid=m.guid++)),this.each((function(){m.event.add(this,e,n,data,t)}))},one:function(e,t,data,n){return this.on(e,t,data,n,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,m(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=z),this.each((function(){m.event.remove(this,e,n,t)}))},trigger:function(e,data){return this.each((function(){m.event.trigger(e,data,this)}))},triggerHandler:function(e,data){var t=this[0];if(t)return m.event.trigger(e,data,t,!0)}}),m.fn.delay=function(time,e){return time=m.fx&&m.fx.speeds[time]||time,e=e||"fx",this.queue(e,(function(e,t){var n=setTimeout(e,time);t.stop=function(){clearTimeout(n)}}))};var $=m.now(),X=/\?/,G=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var e,t=null,n=m.trim(data+"");return n&&!m.trim(n.replace(G,(function(n,r,o,c){return e&&r&&(t=0),0===t?n:(e=o||r,t+=!c-!o,"")})))?Function("return "+n)():m.error("Invalid JSON: "+data)},m.parseXML=function(data){var e;if(!data||"string"!=typeof data)return null;try{window.DOMParser?e=(new DOMParser).parseFromString(data,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(data))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+data),e};var V,W,J=/#.*$/,Y=/([?&])_=[^&]*/,Z=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Q=/^(?:GET|HEAD)$/,ee=/^\/\//,te=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ne={},re={},oe="*/".concat("*");try{W=location.href}catch(e){(W=w.createElement("a")).href="",W=W.href}function ie(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(m.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ae(e,t,n,r){var o={},c=e===re;function l(d){var f;return o[d]=!0,m.each(e[d]||[],(function(e,d){var h=d(t,n,r);return"string"!=typeof h||c||o[h]?c?!(f=h):void 0:(t.dataTypes.unshift(h),l(h),!1)})),f}return l(t.dataTypes[0])||!o["*"]&&l("*")}function se(e,t){var n,r,o=m.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&m.extend(!0,e,n),e}V=te.exec(W.toLowerCase())||[],m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:W,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(V[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?se(se(e,m.ajaxSettings),t):se(m.ajaxSettings,e)},ajaxPrefilter:ie(ne),ajaxTransport:ie(re),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,r,o,c,l,d,f,s=m.ajaxSetup({},t),h=s.context||s,y=s.context&&(h.nodeType||h.jquery)?m(h):m.event,v=m.Deferred(),C=m.Callbacks("once memory"),k=s.statusCode||{},S={},x={},w=0,_="canceled",R={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!f)for(f={};t=Z.exec(o);)f[t[1].toLowerCase()]=t[2];t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=x[n]=x[n]||e,S[e]=t),this},overrideMimeType:function(e){return w||(s.mimeType=e),this},statusCode:function(map){var code;if(map)if(w<2)for(code in map)k[code]=[k[code],map[code]];else R.always(map[R.status]);return this},abort:function(e){var t=e||_;return d&&d.abort(t),A(0,t),this}};if(v.promise(R).complete=C.add,R.success=R.done,R.error=R.fail,s.url=((e||s.url||W)+"").replace(J,"").replace(ee,V[1]+"//"),s.type=t.method||t.type||s.method||s.type,s.dataTypes=m.trim(s.dataType||"*").toLowerCase().match(T)||[""],null==s.crossDomain&&(n=te.exec(s.url.toLowerCase()),s.crossDomain=!(!n||n[1]===V[1]&&n[2]===V[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(V[3]||("http:"===V[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=m.param(s.data,s.traditional)),ae(ne,s,t,R),2===w)return R;for(i in(l=s.global)&&0==m.active++&&m.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!Q.test(s.type),r=s.url,s.hasContent||(s.data&&(r=s.url+=(X.test(r)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=Y.test(r)?r.replace(Y,"$1_="+$++):r+(X.test(r)?"&":"?")+"_="+$++)),s.ifModified&&(m.lastModified[r]&&R.setRequestHeader("If-Modified-Since",m.lastModified[r]),m.etag[r]&&R.setRequestHeader("If-None-Match",m.etag[r])),(s.data&&s.hasContent&&!1!==s.contentType||t.contentType)&&R.setRequestHeader("Content-Type",s.contentType),s.headers)R.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(h,R,s)||2===w))return R.abort();for(i in _="abort",{success:1,error:1,complete:1})R[i](s[i]);if(d=ae(re,s,t,R)){R.readyState=1,l&&y.trigger("ajaxSend",[R,s]),s.async&&s.timeout>0&&(c=setTimeout((function(){R.abort("timeout")}),s.timeout));try{w=1,d.send(S,A)}catch(e){if(!(w<2))throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,t,n,f){var S,x,_,T,A,E=t;2!==w&&(w=2,c&&clearTimeout(c),d=void 0,o=f||"",R.readyState=e>0?4:0,S=e>=200&&e<300||304===e,n&&(T=function(s,e,t){for(var n,r,o,c,l=s.contents,d=s.dataTypes;"*"===d[0];)d.shift(),void 0===r&&(r=s.mimeType||e.getResponseHeader("Content-Type"));if(r)for(c in l)if(l[c]&&l[c].test(r)){d.unshift(c);break}if(d[0]in t)o=d[0];else{for(c in t){if(!d[0]||s.converters[c+" "+d[0]]){o=c;break}n||(n=c)}o=o||n}if(o)return o!==d[0]&&d.unshift(o),t[o]}(s,R,n)),T=function(s,e,t,n){var r,o,c,l,d,f={},h=s.dataTypes.slice();if(h[1])for(c in s.converters)f[c.toLowerCase()]=s.converters[c];for(o=h.shift();o;)if(s.responseFields[o]&&(t[s.responseFields[o]]=e),!d&&n&&s.dataFilter&&(e=s.dataFilter(e,s.dataType)),d=o,o=h.shift())if("*"===o)o=d;else if("*"!==d&&d!==o){if(!(c=f[d+" "+o]||f["* "+o]))for(r in f)if((l=r.split(" "))[1]===o&&(c=f[d+" "+l[0]]||f["* "+l[0]])){!0===c?c=f[r]:!0!==f[r]&&(o=l[0],h.unshift(l[1]));break}if(!0!==c)if(c&&s.throws)e=c(e);else try{e=c(e)}catch(e){return{state:"parsererror",error:c?e:"No conversion from "+d+" to "+o}}}return{state:"success",data:e}}(s,T,R,S),S?(s.ifModified&&((A=R.getResponseHeader("Last-Modified"))&&(m.lastModified[r]=A),(A=R.getResponseHeader("etag"))&&(m.etag[r]=A)),204===e||"HEAD"===s.type?E="nocontent":304===e?E="notmodified":(E=T.state,x=T.data,S=!(_=T.error))):(_=E,!e&&E||(E="error",e<0&&(e=0))),R.status=e,R.statusText=(t||E)+"",S?v.resolveWith(h,[x,E,R]):v.rejectWith(h,[R,E,_]),R.statusCode(k),k=void 0,l&&y.trigger(S?"ajaxSuccess":"ajaxError",[R,s,S?x:_]),C.fireWith(h,[R,E]),l&&(y.trigger("ajaxComplete",[R,s]),--m.active||m.event.trigger("ajaxStop")))}return R},getJSON:function(e,data,t){return m.get(e,data,t,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(i,e){m[e]=function(t,data,n,r){return m.isFunction(data)&&(r=r||n,n=data,data=void 0),m.ajax({url:t,type:e,dataType:r,data:data,success:n})}})),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(i,e){m.fn[e]=function(t){return this.on(e,t)}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};var ce=/%20/g,ue=/\[\]$/,le=/\r?\n/g,de=/^(?:submit|button|image|reset|file)$/i,pe=/^(?:input|select|textarea|keygen)/i;function fe(e,t,n,r){var o;if(m.isArray(t))m.each(t,(function(i,t){n||ue.test(e)?r(e,t):fe(e+"["+("object"==typeof t?i:"")+"]",t,n,r)}));else if(n||"object"!==m.type(t))r(e,t);else for(o in t)fe(e+"["+o+"]",t[o],n,r)}m.param=function(a,e){var t,s=[],n=function(e,t){t=m.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===e&&(e=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,(function(){n(this.name,this.value)}));else for(t in a)fe(t,a[t],e,n);return s.join("&").replace(ce,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&pe.test(this.nodeName)&&!de.test(e)&&(this.checked||!rcheckableType.test(e))})).map((function(i,e){var t=m(this).val();return null==t?null:m.isArray(t)?m.map(t,(function(t){return{name:e.name,value:t.replace(le,"\r\n")}})):{name:e.name,value:t.replace(le,"\r\n")}})).get()}}),m.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&ye()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:ye;var he=0,ge={},me=m.ajaxSettings.xhr();function ye(){try{return new window.XMLHttpRequest}catch(e){}}window.ActiveXObject&&m(window).on("unload",(function(){for(var e in ge)ge[e](void 0,!0)})),f.cors=!!me&&"withCredentials"in me,(me=f.ajax=!!me)&&m.ajaxTransport((function(e){var t;if(!e.crossDomain||f.cors)return{send:function(n,r){var i,o=e.xhr(),c=++he;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];for(i in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.upload&&e.progress&&(o.upload.onprogress=e.progress),o.send(e.hasContent&&(e.body||e.data)||null),t=function(n,l){var d,f,h;if(t&&(l||4===o.readyState))if(delete ge[c],t=void 0,o.onreadystatechange=m.noop,l)4!==o.readyState&&o.abort();else{h={},d=o.status,"string"==typeof o.responseText&&(h.text=o.responseText);try{f=o.statusText}catch(e){f=""}d||!e.isLocal||e.crossDomain?1223===d&&(d=204):d=h.text?200:404}h&&r(d,f,h,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=ge[c]=t:t()},abort:function(){t&&t(void 0,!0)}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return m.globalEval(text),text}}}),m.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)})),m.ajaxTransport("script",(function(s){if(s.crossDomain){var script,head=w.head||m("head")[0]||w.documentElement;return{send:function(e,t){(script=w.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(e,n){(n||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,n||t(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}}));var ve=[],Ce=/(=)\?(?=&|$)|\?\?/;return m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ve.pop()||m.expando+"_"+$++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(s,e,t){var n,r,o,c=!1!==s.jsonp&&(Ce.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ce.test(s.data)&&"data");if(c||"jsonp"===s.dataTypes[0])return n=s.jsonpCallback=m.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,c?s[c]=s[c].replace(Ce,"$1"+n):!1!==s.jsonp&&(s.url+=(X.test(s.url)?"&":"?")+s.jsonp+"="+n),s.converters["script json"]=function(){return o||m.error(n+" was not called"),o[0]},s.dataTypes[0]="json",r=window[n],window[n]=function(){o=arguments},t.always((function(){window[n]=r,s[n]&&(s.jsonpCallback=e.jsonpCallback,ve.push(n)),o&&m.isFunction(r)&&r(o[0]),o=r=void 0})),"script"})),m.parseHTML=function(data,e,t){if(!data||"string"!=typeof data)return null;"boolean"==typeof e&&(t=e,e=!1),e=e||w;var n=rsingleTag.exec(data),r=!t&&[];return n?[e.createElement(n[1])]:(n=m.buildFragment([data],e,r),r&&r.length&&m(r).remove(),m.merge([],n.childNodes))},m}();e.exports=function(e,t){if((e=o.extend(!0,{headers:{},qs:{}},e)).type=e.method,delete e.method,e.onProgress&&(e.progress=e.onProgress,delete e.onProgress),e.qs){var n=r.stringify(e.qs);n&&(e.url+=(-1===e.url.indexOf("?")?"?":"&")+n),delete e.qs}if(e.json&&(e.data=e.body,delete e.json,delete e.body,!e.headers&&(e.headers={}),e.headers["Content-Type"]="application/json"),e.body&&(e.body instanceof Blob||"[object File]"===e.body.toString()||"[object Blob]"===e.body.toString()||(e.data=e.body,delete e.body)),e.headers){var c=e.headers;delete e.headers,e.beforeSend=function(e){for(var t in c)c.hasOwnProperty(t)&&"content-length"!==t.toLowerCase()&&"user-agent"!==t.toLowerCase()&&"origin"!==t.toLowerCase()&&"host"!==t.toLowerCase()&&e.setRequestHeader(t,c[t])}}var l=function(e){var t={};return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var n=e.indexOf(":"),r=e.substr(0,n).trim().toLowerCase(),o=e.substr(n+1).trim();t[r]=o}})),{statusCode:e.status,statusMessage:e.statusText,headers:t}};return e.success=function(data,e,n){t(null,l(n),data)},e.error=function(e){e.responseText?t(null,l(e),e.responseText):t(e.statusText,l(e),e.responseText)},e.dataType="text",o.ajax(e)}},855:function(e,t,n){"use strict";t.decode=t.parse=n(856),t.encode=t.stringify=n(857)},856:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,c){t=t||"&",n=n||"=";var l={};if("string"!=typeof e||0===e.length)return l;var d=/\+/g;e=e.split(t);var f=1e3;c&&"number"==typeof c.maxKeys&&(f=c.maxKeys);var h=e.length;f>0&&h>f&&(h=f);for(var i=0;i<h;++i){var m,y,v,C,k=e[i].replace(d,"%20"),S=k.indexOf(n);S>=0?(m=k.substr(0,S),y=k.substr(S+1)):(m=k,y=""),v=decodeURIComponent(m),C=decodeURIComponent(y),r(l,v)?o(l[v])?l[v].push(C):l[v]=[l[v],C]:l[v]=C}return l};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},857:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?map(c(e),(function(c){var l=encodeURIComponent(r(c))+n;return o(e[c])?map(e[c],(function(e){return l+encodeURIComponent(r(e))})).join(t):l+encodeURIComponent(r(e[c]))})).join(t):l?encodeURIComponent(r(l))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function map(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var c=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},858:function(e,t,n){var r,o=n(859),c=n(841).EventProxy,l=n(839);var d={};function f(){var e=this.options.UploadIdCacheLimit;if(!r){if(e)try{r=JSON.parse(localStorage.getItem("cos_sdk_upload_cache"))||[]}catch(e){}r||(r=[])}}function h(e,t,n){f.call(this);for(var i=r.length-1;i>=0;i--)r[i][0]===e&&r[i][1]===t&&r.splice(i,1);r.unshift([e,t]);var o=this.options.UploadIdCacheLimit;r.length>o&&r.splice(o),o&&setTimeout((function(){try{localStorage.setItem("cos_sdk_upload_cache",JSON.stringify(r))}catch(e){}}))}function m(e){f.call(this),delete d[e];for(var i=r.length-1;i>=0;i--)r[i][1]===e&&r.splice(i,1);var t=this.options.UploadIdCacheLimit;r.length>t&&r.splice(t),t&&setTimeout((function(){try{r.length?localStorage.setItem("cos_sdk_upload_cache",JSON.stringify(r)):localStorage.removeItem("cos_sdk_upload_cache")}catch(e){}}))}function y(e){f.call(this);for(var t=[],i=0;i<r.length;i++)r[i][0]===e&&t.push(r[i][1]);return t.length?t:null}function v(e,t){var n=e.TaskId,r=e.Bucket,f=e.Region,h=e.Key,v=e.StorageClass,S=this,x={},w=e.FileSize,_=e.SliceSize,R=Math.ceil(w/_),T=0,A=l.throttleOnProgress.call(S,w,e.onHashProgress),E=function(t,n){var r=t.length;if(0===r)return n(null,!0);if(r>R)return n(null,!1);if(r>1&&Math.max(t[0].Size,t[1].Size)!==_)return n(null,!1);var o=function(c){if(c<r){var d=t[c];!function(t,n){var r=_*(t-1),o=Math.min(r+_,w),c=o-r;x[t]?n(null,{PartNumber:t,ETag:x[t],Size:c}):l.fileSlice(e.Body,r,o,!1,(function(e){l.getFileMd5(e,(function(e,r){if(e)return n(e);var o='"'+r+'"';x[t]=o,1,T+=c,n(e,{PartNumber:t,ETag:o,Size:c}),A({loaded:T,total:w})}))}))}(d.PartNumber,(function(e,t){t&&t.ETag===d.ETag&&t.Size===d.Size?o(c+1):n(null,!1)}))}else n(null,!0)};o(0)},B=new c;B.on("error",(function(e){if(S._isRunningTask(n))return t(e)})),B.on("upload_id_ready",(function(e){var map={},n=[];l.each(e.PartList,(function(e){map[e.PartNumber]=e}));for(var r=1;r<=R;r++){var o=map[r];o?(o.PartNumber=r,o.Uploaded=!0):o={PartNumber:r,ETag:null,Uploaded:!1},n.push(o)}e.PartList=n,t(null,e)})),B.on("no_available_upload_id",(function(){if(S._isRunningTask(n)){var o=l.extend({Bucket:r,Region:f,Key:h,Headers:l.clone(e.Headers),StorageClass:v,Body:e.Body},e),c=e.Headers["Content-Type"]||e.Body&&e.Body.type;c&&(o.Headers["Content-Type"]=c),S.multipartInit(o,(function(e,data){if(S._isRunningTask(n)){if(e)return B.emit("error",e);var r=data.UploadId;if(!r)return t({Message:"no upload id"});B.emit("upload_id_ready",{UploadId:r,PartList:[]})}}))}})),B.on("has_upload_id",(function(e){e=e.reverse(),o.eachLimit(e,1,(function(e,t){S._isRunningTask(n)&&(d[e]?t():k.call(S,{Bucket:r,Region:f,Key:h,UploadId:e},(function(r,o){if(S._isRunningTask(n)){if(r)return m.call(S,e),B.emit("error",r);var c=o.PartList;c.forEach((function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""})),E(c,(function(r,o){if(S._isRunningTask(n))return r?B.emit("error",r):void(o?t({UploadId:e,PartList:c}):t())}))}})))}),(function(e){S._isRunningTask(n)&&(A(null,!0),e&&e.UploadId?B.emit("upload_id_ready",e):B.emit("no_available_upload_id"))}))})),B.on("seek_local_avail_upload_id",(function(t){var o,c=l.getFileUUID(e.Body,e.ChunkSize);if(c&&(o=y.call(S,c))){var v=function(e){if(e>=o.length)B.emit("has_upload_id",t);else{var c=o[e];if(!l.isInArray(t,c))return m.call(S,c),void v(e+1);d[c]?v(e+1):k.call(S,{Bucket:r,Region:f,Key:h,UploadId:c},(function(t,r){S._isRunningTask(n)&&(t?(m.call(S,c),v(e+1)):B.emit("upload_id_ready",{UploadId:c,PartList:r.PartList}))}))}};v(0)}else B.emit("has_upload_id",t)})),B.on("get_remote_upload_id_list",(function(t){C.call(S,{Bucket:r,Region:f,Key:h},(function(t,data){if(S._isRunningTask(n)){if(t)return B.emit("error",t);var r=l.filter(data.UploadList,(function(e){return e.Key===h&&(!v||e.StorageClass.toUpperCase()===v.toUpperCase())})).reverse().map((function(e){return e.UploadId||e.UploadID}));if(r.length)B.emit("seek_local_avail_upload_id",r);else{var o,c=l.getFileUUID(e.Body,e.ChunkSize);c&&(o=y.call(S,c))&&l.each(o,(function(e){m.call(S,e)})),B.emit("no_available_upload_id")}}}))})),B.emit("get_remote_upload_id_list")}function C(e,t){var n=this,r=[],o={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key},c=function(){n.multipartList(o,(function(e,data){if(e)return t(e);r.push.apply(r,data.Upload||[]),"true"===data.IsTruncated?(o.KeyMarker=data.NextKeyMarker,o.UploadIdMarker=data.NextUploadIdMarker,c()):t(null,{UploadList:r})}))};c()}function k(e,t){var n=this,r=[],o={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId},c=function(){n.multipartListPart(o,(function(e,data){if(e)return t(e);r.push.apply(r,data.Part||[]),"true"===data.IsTruncated?(o.PartNumberMarker=data.NextPartNumberMarker,c()):t(null,{PartList:r})}))};c()}function S(e,t){var n=this,r=e.TaskId,c=e.Bucket,d=e.Region,f=e.Key,h=e.UploadData,m=e.FileSize,y=e.SliceSize,v=Math.min(e.AsyncLimit||n.options.ChunkParallelLimit||1,256),C=e.Body,k=Math.ceil(m/y),S=0,w=e.ServerSideEncryption,_=l.filter(h.PartList,(function(e){return e.Uploaded&&(S+=e.PartNumber>=k&&m%y||y),!e.Uploaded})),R=e.onProgress;o.eachLimit(_,v,(function(e,t){if(n._isRunningTask(r)){var o=e.PartNumber,v=Math.min(m,e.PartNumber*y)-(e.PartNumber-1)*y,k=0;x.call(n,{TaskId:r,Bucket:c,Region:d,Key:f,SliceSize:y,FileSize:m,PartNumber:o,ServerSideEncryption:w,Body:C,UploadData:h,onProgress:function(data){S+=data.loaded-k,k=data.loaded,R({loaded:S,total:m})}},(function(o,data){n._isRunningTask(r)&&(!l.isBrowser||o||data.ETag||(o='get ETag error, please add "ETag" to CORS ExposeHeader setting.'),o?S-=k:(S+=v-k,e.ETag=data.ETag),t(o||null,data))}))}}),(function(e){if(n._isRunningTask(r))return e?t(e):void t(null,{UploadId:h.UploadId,SliceList:h.PartList})}))}function x(e,t){var n=this,r=e.TaskId,c=e.Bucket,d=e.Region,f=e.Key,h=e.FileSize,m=e.Body,y=1*e.PartNumber,v=e.SliceSize,C=e.ServerSideEncryption,k=e.UploadData,S=n.options.ChunkRetryTimes+1,x=v*(y-1),w=v,_=x+v;_>h&&(w=(_=h)-x);var R=k.PartList[y-1];o.retry(S,(function(t){n._isRunningTask(r)&&l.fileSlice(m,x,_,!0,(function(o){n.multipartUpload({TaskId:r,Bucket:c,Region:d,Key:f,ContentLength:w,PartNumber:y,UploadId:k.UploadId,ServerSideEncryption:C,Body:o,onProgress:e.onProgress},(function(e,data){if(n._isRunningTask(r))return e?t(e):(R.Uploaded=!0,t(null,data))}))}))}),(function(e,data){if(n._isRunningTask(r))return t(e,data)}))}function w(e,t){var n=e.Bucket,r=e.Region,c=e.Key,l=e.UploadId,d=e.SliceList,f=this,h=this.options.ChunkRetryTimes+1,m=d.map((function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}));o.retry(h,(function(e){f.multipartComplete({Bucket:n,Region:r,Key:c,UploadId:l,Parts:m},e)}),(function(e,data){t(e,data)}))}function _(e,t){var n=e.Bucket,r=e.Region,c=e.Key,l=e.AbortArray,d=e.AsyncLimit||1,f=this,h=0,m=new Array(l.length);o.eachLimit(l,d,(function(t,o){var l=h;if(c&&c!==t.Key)return m[l]={error:{KeyNotMatch:!0}},void o(null);var d=t.UploadId||t.UploadID;f.multipartAbort({Bucket:n,Region:r,Key:t.Key,Headers:e.Headers,UploadId:d},(function(e,data){var c={Bucket:n,Region:r,Key:t.Key,UploadId:d};m[l]={error:e,task:c},o(null)})),h++}),(function(e){if(e)return t(e);for(var n=[],r=[],i=0,o=m.length;i<o;i++){var c=m[i];c.task&&(c.error?r.push(c.task):n.push(c.task))}return t(null,{successList:n,errorList:r})}))}function R(e,t){var n=e.TaskId,r=e.Bucket,c=e.Region,l=e.Key,d=e.CopySource,f=e.UploadId,h=1*e.PartNumber,m=e.CopySourceRange,y=this.options.ChunkRetryTimes+1,v=this;o.retry(y,(function(t){v.uploadPartCopy({TaskId:n,Bucket:r,Region:c,Key:l,CopySource:d,UploadId:f,PartNumber:h,CopySourceRange:m,onProgress:e.onProgress},(function(e,data){t(e||null,data)}))}),(function(e,data){return t(e,data)}))}var T={sliceUploadFile:function(e,t){var n,r,o=this,f=new c,y=e.TaskId,C=e.Bucket,k=e.Region,x=e.Key,_=e.Body,R=e.ChunkSize||e.SliceSize||o.options.ChunkSize,T=e.AsyncLimit,A=e.StorageClass||"Standard",E=e.ServerSideEncryption,B=e.onHashProgress;f.on("error",(function(e){if(o._isRunningTask(y))return t(e)})),f.on("upload_complete",(function(e){t(null,e)})),f.on("upload_slice_complete",(function(e){w.call(o,{Bucket:C,Region:k,Key:x,UploadId:e.UploadId,SliceList:e.SliceList},(function(t,data){if(o._isRunningTask(y)){if(delete d[e.UploadId],t)return r(null,!0),f.emit("error",t);r({loaded:n,total:n},!0),m.call(o,e.UploadId),f.emit("upload_complete",data)}}))})),f.on("get_upload_data_finish",(function(t){var c=l.getFileUUID(_,e.ChunkSize);c&&h.call(o,c,t.UploadId),d[t.UploadId]=!0,y&&o.on("inner-kill-task",(function(data){data.TaskId===y&&"canceled"===data.toState&&delete d[t.UploadId]})),S.call(o,{TaskId:y,Bucket:C,Region:k,Key:x,Body:_,FileSize:n,SliceSize:R,AsyncLimit:T,ServerSideEncryption:E,UploadData:t,onProgress:r},(function(e,data){if(o._isRunningTask(y))return e?(r(null,!0),f.emit("error",e)):void f.emit("upload_slice_complete",data)}))})),f.on("get_file_size_finish",(function(){if(r=l.throttleOnProgress.call(o,n,e.onProgress),e.UploadData.UploadId)f.emit("get_upload_data_finish",e.UploadData);else{var t=l.extend({TaskId:y,Bucket:C,Region:k,Key:x,Headers:e.Headers,StorageClass:A,Body:_,FileSize:n,SliceSize:R,onHashProgress:B},e);v.call(o,t,(function(t,n){if(o._isRunningTask(y)){if(t)return f.emit("error",t);e.UploadData.UploadId=n.UploadId,e.UploadData.PartList=n.PartList,f.emit("get_upload_data_finish",e.UploadData)}}))}})),n=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),l.each(e.Headers,(function(t,n){"content-length"===n.toLowerCase()&&delete e.Headers[n]})),function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],r=1048576,i=0;i<t.length&&!(n/(r=1024*t[i]*1024)<=o.options.MaxPartNumber);i++);e.ChunkSize=e.SliceSize=R=Math.max(R,r)}(),0===n?(e.Body="",e.ContentLength=0,e.SkipTask=!0,o.putObject(e,(function(e,data){if(e)return t(e);t(null,data)}))):f.emit("get_file_size_finish")},abortUploadTask:function(e,t){var n=e.Bucket,r=e.Region,o=e.Key,l=e.UploadId,d=e.Level||"task",f=e.AsyncLimit,h=this,m=new c;if(m.on("error",(function(e){return t(e)})),m.on("get_abort_array",(function(c){_.call(h,{Bucket:n,Region:r,Key:o,Headers:e.Headers,AsyncLimit:f,AbortArray:c},(function(e,data){if(e)return t(e);t(null,data)}))})),"bucket"===d)C.call(h,{Bucket:n,Region:r},(function(e,data){if(e)return t(e);m.emit("get_abort_array",data.UploadList||[])}));else if("file"===d){if(!o)return t({error:"abort_upload_task_no_key"});C.call(h,{Bucket:n,Region:r,Key:o},(function(e,data){if(e)return t(e);m.emit("get_abort_array",data.UploadList||[])}))}else{if("task"!==d)return t({error:"abort_unknown_level"});if(!l)return t({error:"abort_upload_task_no_id"});if(!o)return t({error:"abort_upload_task_no_key"});m.emit("get_abort_array",[{Key:o,UploadId:l}])}},uploadFiles:function(e,t){var n=void 0===e.SliceSize?this.options.SliceSize:e.SliceSize,r=0,o=0,c=l.throttleOnProgress.call(this,o,e.onProgress),d=e.files.length,f=e.onFileFinish,h=Array(d),m=function(e,data,n){c(null,!0),f&&f(e,data,n),h[n.Index]={options:n,error:e,data:data},--d<=0&&t&&t(null,{files:h})},y=[];l.each(e.files,(function(e,t){!function(){var d=e.Body,f=d.size||d.length||0,h={Index:t,TaskId:""};r+=f,l.each(e,(function(e,t){"object"!=typeof e&&"function"!=typeof e&&(h[t]=e)}));var v=e.onTaskReady;e.onTaskReady=function(e){h.TaskId=e,v&&v(e)};var C=0,k=e.onProgress;e.onProgress=function(e){o=o-C+e.loaded,C=e.loaded,k&&k(e),c({loaded:o,total:r})};var S=e.onFileFinish,x=f>=n?"sliceUploadFile":"putObject";y.push({api:x,params:e,callback:function(e,data){S&&S(e,data),m&&m(e,data,h)}})}()})),this._addTasks(y)},sliceCopyFile:function(e,t){var n=new c,r=this,d=e.Bucket,f=e.Region,h=e.Key,m=e.CopySource,y=m.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(y){var v=y[1],C=y[3],k=decodeURIComponent(y[4]),S=void 0===e.SliceSize?r.options.CopySliceSize:e.SliceSize;S=Math.max(0,Math.min(S,5368709120));var x,w,_=e.ChunkSize||this.options.CopyChunkSize,T=this.options.CopyChunkParallelLimit,A=0;n.on("copy_slice_complete",(function(e){r.multipartComplete({Bucket:d,Region:f,Key:h,UploadId:e.UploadId,Parts:e.PartList},(function(e,data){if(e)return w(null,!0),t(e);w({loaded:x,total:x},!0),t(null,data)}))})),n.on("get_copy_data_finish",(function(e){o.eachLimit(e.PartList,T,(function(t,n){var o=t.PartNumber,c=t.CopySourceRange,l=t.end-t.start,y=0;R.call(r,{Bucket:d,Region:f,Key:h,CopySource:m,UploadId:e.UploadId,PartNumber:o,CopySourceRange:c,onProgress:function(data){A+=data.loaded-y,y=data.loaded,w({loaded:A,total:x})}},(function(e,data){if(e)return n(e);w({loaded:A,total:x}),A+=l-y,t.ETag=data.ETag,n(e||null,data)}))}),(function(r){if(r)return w(null,!0),t(r);n.emit("copy_slice_complete",e)}))})),n.on("get_file_size_finish",(function(o){var c;!function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,i=0;i<t.length&&!(x/(n=1024*t[i]*1024)<=r.options.MaxPartNumber);i++);e.ChunkSize=_=Math.max(_,n);for(var o=Math.ceil(x/_),c=[],l=1;l<=o;l++){var d=(l-1)*_,f=l*_<x?l*_-1:x-1,h={PartNumber:l,start:d,end:f,CopySourceRange:"bytes="+d+"-"+f};c.push(h)}e.PartList=c}(),(c="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:o)["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||o["x-cos-storage-class"],c=l.clearKey(c),r.multipartInit({Bucket:d,Region:f,Key:h,Headers:c},(function(r,data){if(r)return t(r);e.UploadId=data.UploadId,n.emit("get_copy_data_finish",e)}))})),r.headObject({Bucket:v,Region:C,Key:k},(function(o,data){if(o)o.statusCode&&404===o.statusCode?t({ErrorStatus:k+" Not Exist"}):t(o);else if(void 0!==(x=e.FileSize=data.headers["content-length"])&&x)if(w=l.throttleOnProgress.call(r,x,e.onProgress),x<=S)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),r.putObjectCopy(e,(function(e,data){if(e)return w(null,!0),t(e);w({loaded:x,total:x},!0),t(e,data)}));else{var c=data.headers,d={"Cache-Control":c["cache-control"],"Content-Disposition":c["content-disposition"],"Content-Encoding":c["content-encoding"],"Content-Type":c["content-type"],Expires:c.expires,"x-cos-storage-class":c["x-cos-storage-class"]};l.each(c,(function(e,t){0===t.indexOf("x-cos-meta-")&&t.length>"x-cos-meta-".length&&(d[t]=e)})),n.emit("get_file_size_finish",d)}else t({error:'get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.'})}))}else t({error:"CopySource format error"})}};e.exports.init=function(e,t){t.transferToTaskMethod(T,"sliceUploadFile"),l.each(T,(function(t,n){e.prototype[n]=l.apiWrapper(n,t)}))}},859:function(e,t){var n={eachLimit:function(e,t,n,r){if(r=r||function(){},!e.length||t<=0)return r();var o=0,c=0,l=0;!function d(){if(o>=e.length)return r();for(;l<t&&c<e.length;)l+=1,n(e[(c+=1)-1],(function(t){t?(r(t),r=function(){}):(l-=1,(o+=1)>=e.length?r():d())}))}()},retry:function(e,t,n){var r=function(o){t((function(t,data){t&&o<e?r(o+1):n(t,data)}))};e<1?n():r(1)}};e.exports=n},86:function(e,t){t.extensionList=["7Z","AI","APK","CAD","CDR","DOC","DOCX","EPS","EXE","IPA","MP3","MP4","PDF","PPT","PSD","RAR","TXT","XLS","XLSX","ZIP","JPG","WAV"]},860:function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,c=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var l=Number.isNaN||function(e){return e!=e};function d(){d.init.call(this)}e.exports=d,e.exports.once=function(e,t){return new Promise((function(n,r){function o(){void 0!==c&&e.removeListener("error",c),n([].slice.call(arguments))}var c;"error"!==t&&(c=function(n){e.removeListener(t,o),r(n)},e.once("error",c)),e.once(t,o)}))},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var f=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function m(e){return void 0===e._maxListeners?d.defaultMaxListeners:e._maxListeners}function y(e,t,n,r){var o,c,l,d;if(h(n),void 0===(c=e._events)?(c=e._events=Object.create(null),e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),l=c[t]),void 0===l)l=c[t]=n,++e._eventsCount;else if("function"==typeof l?l=c[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(o=m(e))>0&&l.length>o&&!l.warned){l.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=l.length,d=f,console&&console.warn&&console.warn(d)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=v.bind(r);return o.listener=n,r.wrapFn=o,o}function k(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(o):x(o,o.length)}function S(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function x(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),d.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},d.prototype.getMaxListeners=function(){return m(this)},d.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var d=r[e];if(void 0===d)return!1;if("function"==typeof d)c(d,this,t);else{var f=d.length,h=x(d,f);for(i=0;i<f;++i)c(h[i],this,t)}return!0},d.prototype.addListener=function(e,t){return y(this,e,t,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(e,t){return y(this,e,t,!0)},d.prototype.once=function(e,t){return h(t),this.on(e,C(this,e,t)),this},d.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,C(this,e,t)),this},d.prototype.removeListener=function(e,t){var n,r,o,i,c;if(h(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){c=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,c||t)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},d.prototype.listeners=function(e){return k(this,e,!0)},d.prototype.rawListeners=function(e){return k(this,e,!1)},d.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):S.call(e,t)},d.prototype.listenerCount=S,d.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},861:function(e){e.exports=JSON.parse('{"name":"vod-js-sdk-v6","version":"1.4.10","description":"tencent cloud vod js sdk v6","main":"lib/src/tc_vod.js","unpkg":"dist/vod-js-sdk-v6.js","typings":"lib/src/tc_vod.d.ts","scripts":{"test":"cross-env NODE_ENV=test mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","cover":"cross-env NODE_ENV=test nyc mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","dev":"webpack --config webpack.dev.config.js --watch","dist":"webpack --config webpack.config.js","build":"npm run test && npm run dist && npm run compile","compile":"tsc -p tsconfig.json","prepublish":"npm run build","lint":"tsc --noEmit && eslint \'src/**/*.{js,ts,tsx}\' --quiet --fix"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/vod-js-sdk-v6.git"},"keywords":["tencentcloud","sdk","vod"],"author":"alsotang <alsotang@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/tencentyun/vod-js-sdk-v6/issues"},"homepage":"https://github.com/tencentyun/vod-js-sdk-v6#readme","dependencies":{"axios":"^0.18.0","cos-js-sdk-v5":"0.5.16","js-sha1":"^0.6.0","uuid":"^3.3.2"},"devDependencies":{"@types/mocha":"^5.2.5","@types/semver":"^6.0.0","@types/sha1":"^1.1.1","@types/uuid":"^3.4.4","@typescript-eslint/eslint-plugin":"^1.9.0","@typescript-eslint/parser":"^1.9.0","cross-env":"^6.0.3","eslint":"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.0","espower-typescript":"^9.0.1","jsdom":"^13.1.0","jsdom-global":"^3.0.2","mm":"^2.4.1","mocha":"^5.2.0","nyc":"^13.1.0","power-assert":"^1.6.1","prettier":"^1.17.1","semver":"^6.1.1","ts-loader":"^5.3.3","typescript":"^3.5.3","webpack":"^4.28.1","webpack-cli":"^3.2.1"},"nyc":{"extension":[".ts",".tsx"],"include":["src"],"reporter":["html"],"all":true}}')},862:function(e,t,n){var r=n(863),o=n(864);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||r)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var l=0;l<16;++l)t[i+l]=c[l];return t||o(c)}},863:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,i=0;i<16;i++)0==(3&i)&&(e=4294967296*Math.random()),o[i]=e>>>((3&i)<<3)&255;return o}}},864:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}}}]);