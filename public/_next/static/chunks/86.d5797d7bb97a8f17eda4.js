(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[86],{aPxr:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ie}));n("ma9I"),n("2B1R");var i=n("lwsE"),c=n.n(i),r=n("W8MJ"),o=n.n(r),a=n("7W2i"),s=n.n(a),l=n("a1gu"),d=n.n(l),u=n("Nsbk"),v=n.n(u),h=n("nKUr"),f=n("q1tI"),p=n.n(f),j=n("CQoW"),b=n("jqTq"),x=n.n(b),m=n("z6Ap"),O=function(e){var t=e.visible,n=void 0!==t&&t,i=e.conNum,c=void 0===i?0:i,r=e.goRefresh,o=void 0===r?m.e:r,a=Object(f.useState)(!1),s=a[0],l=a[1];return Object(h.jsx)("div",{children:n&&Object(h.jsxs)("div",{className:j.a.container,onClick:function(){l(!0),o()},children:[Object(h.jsxs)("span",{className:j.a.text,children:["\u6709",c,"\u6761\u65b0\u53d1\u5e03\u7684\u5185\u5bb9"]}),Object(h.jsx)("div",{className:j.a.refreshBtn,children:"\u70b9\u51fb\u5237\u65b0"}),s&&Object(h.jsx)(x.a,{size:14,className:j.a.spin,type:"spinner"})]})})},g=p.a.memo(O),y=n("y4MR"),w=(n("QWBl"),n("yXV3"),n("+2oP"),n("pDQq"),n("4l63"),n("rB9j"),n("EnZy"),n("FZtP"),n("JG93")),N=n("WtUC"),A=n.n(N),C=[{label:"\u6240\u6709",type:"all",isActive:!0},{label:"\u7cbe\u534e",type:"essence",isActive:!1},{label:"\u5df2\u5173\u6ce8",type:"attention",isActive:!1},{label:"\u7c7b\u578b",type:"types",children:[{label:"\u4e0d\u9650",value:"",isActive:!0},{label:"\u89c6\u9891",value:"103",isActive:!1},{label:"\u56fe\u7247",value:"101",isActive:!1},{label:"\u8bed\u97f3",value:"102",isActive:!1},{label:"\u5546\u54c1",value:"104",isActive:!1},{label:"\u7ea2\u5305",value:"106",isActive:!1},{label:"\u6295\u7968",value:"109",isActive:!1},{label:"\u60ac\u8d4f\u95ee\u7b54",value:"107",isActive:!1},{label:"\u6587\u4ef6\u9644\u4ef6",value:"108",isActive:!1}]},{label:"\u6392\u5e8f",type:"sort",isActive:!1,children:[{label:"\u4e0d\u9650",value:"1",isActive:!0},{label:"\u53d1\u5e03\u65f6\u95f4",value:"1",isActive:!1},{label:"\u8bc4\u8bba\u65f6\u95f4",value:"2",isActive:!1},{label:"\u70ed\u95e8\u5185\u5bb9",value:"3",isActive:!1}]}],S=n("1RP4"),R=n("kMSe"),P=Object(R.c)("index")(Object(R.d)((function(e){var t=e.index,n=e.onSubmit,i=void 0===n?m.e:n,c=e.isShowDefault,r=void 0!==c&&c,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u5bfc\u822a";return Object(h.jsx)("span",{children:e})},a=C.slice();r&&a.splice(1,0,{label:"\u63a8\u8350",type:"sequence",isActive:!1});var s=Object(f.useState)(Object(S.a)(a)),l=s[0],d=s[1],u=function(e,n){t.topMenuIndex=e;var c=Object(S.a)(a);if(c[0].isActive=!1,"-1"!=="".concat(n)&&-1!=="".concat(e).indexOf("/")){var r,o=parseInt(e.split("/")[1]);(null===(r=c[n])||void 0===r?void 0:r.children.map((function(e){return e.isActive=!1,e})))[o].isActive=!0,c[n].isActive=!0}else if("-1"==="".concat(n)){c.map((function(e){var t;return null!==(t=e.children)&&void 0!==t&&t.length||(e.isActive=!1),e}))[e].isActive=!0}else isNaN(n)&&c.map((function(e){var t;null!==(t=e.children)&&void 0!==t&&t.length||(e.isActive=!1)}));var s=v(c);i(s),d(c)},v=function(e){var t={sequence:0,filter:{sort:1,attention:0,types:[],essence:0}};return e.forEach((function(e){var n;"sequence"===e.type?t.sequence=e.isActive?"1":"0":null!==(n=e.children)&&void 0!==n&&n.length?e.children.forEach((function(n){n.isActive&&n.value&&("types"===e.type&&n.value?t.filter[e.type]=[n.value]:t.filter[e.type]=n.value)})):"all"!==e.type&&(t.filter[e.type]=e.isActive?"1":"0")})),t},p=function(e){l.map((function(t,n){"".concat(n)==="".concat(e)?t.isActive=!0:t.isActive=!1}))},j=Object(f.useMemo)((function(){if(-1!==t.topMenuIndex.indexOf("/")){var e=t.topMenuIndex.split("/")[0];return p(e),e}p(t.topMenuIndex)}),[t.topMenuIndex]);return Object(h.jsx)("div",{className:w.a.container,children:Object(h.jsx)(A.a,{mode:"horizontal",menuTrigger:"hover",defaultActives:["".concat(t.topMenuIndex)],defaultSubmenuActives:["".concat(j)],children:null===l||void 0===l?void 0:l.map((function(e,t){return e.children?Object(h.jsx)(A.a.SubMenu,{index:"".concat(t),title:o(e.label),style:{padding:"3px 10px",height:"55px"},onClick:u,children:e.children.map((function(e,n){return Object(h.jsx)(A.a.Item,{divided:!0,index:"".concat(t,"/").concat(n),style:{padding:"10px 20px"},onClick:u,children:e.label},"".concat(t,"/").concat(n))}))},t):Object(h.jsx)(A.a.Item,{onClick:u,index:"".concat(t),style:0===t?{padding:"0 10px 0 0"}:{padding:"0 10px"},children:Object(h.jsxs)("div",{className:w.a.label,children:[e.label,e.isActive&&Object(h.jsx)("div",{className:w.a.line})]})},t)}))})})}))),k=n("5f2u"),I=n.n(k),T=n("z/8X"),M=(n("07d7"),n("5s+n"),n("p532"),n("x83w"),n("R5XZ"),n("lSNA")),D=n.n(M),H=n("RIqP"),E=n.n(H),B=(n("TxWK"),n("L8Lu")),q=Object(R.d)((function(e){var t,n=Object(f.useRef)(null);Object(f.useEffect)((function(){i()}),[null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.clientHeight]);var i=function(){try{"function"===typeof e.measure&&e.measure()}catch(t){}},c=function(){i&&i()};return Object(f.useEffect)((function(){if(n.current){try{var e=new MutationObserver(c);return e.observe(n.current,{attributes:!0,childList:!0,subtree:!0}),function(){e.disconnect()}}catch(t){}}}),[n]),Object(h.jsx)("div",{ref:n,children:e.children})})),_=n("0w0X"),F=n("HkP4"),W=n("HUxe"),L=n("c7k8"),V=n("Ohbp");function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){D()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X,G,Q,U={},Z=0,K=!1;function Y(e,t){var n,i,c,r,o=e.vlist.cache,a=(e.platform,e.left),s=e.right,l=e.top;e.pageName;o||(o=new L.c({fixedWidth:!0,show:!1}),(r=o).getDefaultHeight=function(e){var t=e.index,n=e.data;if(!n)return 0;var i=Object(W.a)(n);return U[t]=i,i+0+10},r.rowHeight=function(e){var t=e.index,n=e.data,i=r._keyMapper(t,0);return void 0!==r._rowHeightCache[i]?r._rowHeightCache[i]:r.getDefaultHeight({index:t,data:n})},e.vlist.setCache(o));var d=Object(f.useState)([{type:"header"}].concat(E()(e.list||[]),[{type:"footer"}])),u=d[0],v=d[1],p=Object(f.useRef)(null),j=u.length,b=Object(f.useState)(0),x=b[0],m=b[1],O=Object(f.useState)(!0),g=O[0],y=O[1];Object(f.useEffect)((function(){p&&p.scrollToPosition(e.vlist.home||0)}),[null===(n=p)||void 0===n||null===(i=n.Grid)||void 0===i?void 0:i.getTotalRowsHeight()]),Object(f.useEffect)((function(){v([{type:"header"}].concat(E()(e.list||[]),[{type:"footer"}]))}),[null===e||void 0===e||null===(c=e.list)||void 0===c?void 0:c.length]),Object(f.useEffect)((function(){w(0)}),[e.sticks]),Object(f.useEffect)((function(){w(0)}),[e.visible]);var w=function(e,t){var n,i;t&&(u[e]=t),(null===(n=p)||void 0===n?void 0:n.recomputeRowHeights)&&(null===(i=p)||void 0===i||i.recomputeRowHeights(e))},N=function(e){var t=e.index,n=u[t];return n?"footer"===n.type?60:o.rowHeight({index:t,data:n}):0},A=function(t,n,i,c){var r=c.index,o=c.key;c.parent,c.style;switch(t){case"header":return Object(h.jsx)(q,{measure:function(){i()},children:e.children},o);case"footer":return Object(h.jsx)(_.a,{noMore:e.noMore,isError:e.requestError,errorText:e.errorText,platform:e.platform});default:return Object(h.jsx)(B.a,{data:n,isLast:r===(null===u||void 0===u?void 0:u.length)-2,measure:i,recomputeRowHeights:function(e){return w(r,e)}},o)}},C=function(e){var t=e.index,n=e.key,i=e.parent,c=e.style,r=u[t];return r?Object(h.jsx)(L.b,{cache:o,columnIndex:0,rowIndex:t,parent:i,children:function(e){var o=e.measure,a=e.registerChild;return Object(h.jsx)("div",{ref:a,style:c,className:V.a.center,"data-index":t,"data-id":r.threadId,"data-height":U[t],children:A(r.type,r,g?o:null,{index:t,key:"".concat(n,"-").concat(r._time||""),parent:i,style:c})},"".concat(n,"-").concat(r.threadId,"-").concat(r._time||""))}},"".concat(n,"-").concat(r._time||"")):""},S=function(t){var n=t.scrollTop,i=t.clientHeight,c=t.scrollHeight;if(y(!(n<Z)),Z=n,m(n),clearTimeout(X),X=setTimeout((function(){y(!0)}),100),e.onScroll&&e.onScroll({scrollTop:n,clientHeight:i,scrollHeight:c,startNum:G,stopNum:Q}),0!==n&&e.vlist.setPosition(n),n+i+3e3>=c&&!K&&!e.noMore&&(K=!0,e.loadNextPage)){var r=e.loadNextPage();r?r.finally((function(){K=!1})):K=!1}},R=function(e){var t=e.cellCount,n=e.scrollDirection,i=e.overscanCellsCount,c=e.startIndex,r=e.stopIndex;return G=c,Q=r,-1===n?{overscanStartIndex:Math.max(0,c),overscanStopIndex:Math.min(t-1,r+i)}:{overscanStartIndex:Math.max(0,c-i),overscanStopIndex:Math.min(t-1,r)}},P=function(){p&&p.scrollToPosition(0),e.vlist.setPosition(0)};return Object(h.jsx)("div",{className:"page",children:Object(h.jsx)(L.d,{isRowLoaded:function(e){var t=e.index;return!!u[t]},loadMoreRows:function(){return Promise.resolve()},rowCount:j,children:function(t){var n=t.onRowsRendered,i=t.registerChild;return Object(h.jsx)(L.a,{className:"list",children:function(t){var c=t.height,r=t.width;return Object(h.jsxs)("div",{className:"".concat(V.a.list," ").concat(V.a.fixed),children:[Object(h.jsx)("div",{className:"baselayout-left ".concat(V.a.left),children:"function"===typeof a?a(J({},e)):a}),Object(h.jsx)("div",{className:"".concat(V.a.top," ").concat(V.a.center," top"),children:l}),Object(h.jsx)(L.e,{ref:function(e){p=e,i(e)},onScroll:S,deferredMeasurementCache:o,height:c,overscanRowCount:20,onRowsRendered:function(){n.apply(void 0,arguments)},className:V.a.scrollArea,rowCount:j,rowHeight:N,rowRenderer:C,width:r,overscanIndicesGetter:R}),Object(h.jsx)("div",{className:"baselayout-right ".concat(V.a.right),children:"function"===typeof s?s(J({},e)):s}),x>100&&Object(h.jsx)(F.a,{onClick:P})]})}})}})})}var $=Object(R.c)("vlist")(Object(R.d)(Object(f.forwardRef)(Y))),ee=n("NNkC");function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var c=v()(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return d()(this,n)}}var ne=function(e){var t=e.onFilterClick,n=e.isShowDefault,i=e.onPostThread,c=e.ishide;return Object(h.jsx)("div",{className:ee.a.topWrapper,style:{visibility:c?"hidden":"visible"},children:Object(h.jsxs)("div",{className:ee.a.topBox,children:[Object(h.jsx)(P,{onSubmit:t,isShowDefault:n}),Object(h.jsx)("div",{className:ee.a.PostTheme,children:Object(h.jsx)(I.a,{type:"primary",className:ee.a.publishBtn,onClick:i,children:"\u53d1\u5e03"})})]})})},ie=function(e){s()(n,e);var t=te(n);function n(e){var i;return c()(this,n),(i=t.call(this,e)).renderContent=function(e){var t=i.props,n=t.visible,c=t.conNum,r=t.isShowDefault,o=t.onFilterClick,a=t.onPostThread,s=t.goRefresh,l=e.sticks,d=(e.threads||{}).pageData;return Object(h.jsxs)("div",{className:ee.a.indexContent,children:[Object(h.jsx)(ne,{onFilterClick:o,onPostThread:a,isShowDefault:r}),Object(h.jsxs)("div",{className:ee.a.contnetTop,children:[(null===l||void 0===l?void 0:l.length)>0&&Object(h.jsx)("div",{className:"".concat(ee.a.TopNewsBox," ").concat(!n&&ee.a.noBorder),children:Object(h.jsx)(y.a,{data:l,platform:"pc",isShowBorder:!1})}),n&&Object(h.jsx)("div",{className:ee.a.topNewContent,children:Object(h.jsx)(g,{visible:n,conNum:c,goRefresh:s})})]}),Object(h.jsx)("div",{className:ee.a.themeBox,children:Object(h.jsx)("div",{className:ee.a.themeItem,children:null===d||void 0===d?void 0:d.map((function(e,t){return Object(h.jsx)(T.a,{className:ee.a.threadContent,data:e},"".concat(e.threadId,"-").concat(e.createdAt||"","-").concat(e.updatedAt||""))}))})})]})},i.renderTop=function(){var e=i.props,t=e.onFilterClick,n=e.isShowDefault,c=e.onPostThread;return Object(h.jsx)(ne,{onFilterClick:t,onPostThread:c,isShowDefault:n,ishide:!1})},i.renderVlist=function(e){var t,n=i.props,c=n.visible,r=n.conNum,o=n.isShowDefault,a=n.onFilterClick,s=n.onPostThread,l=n.goRefresh,d=n.loadNextPage,u=n.renderRight,v=n.renderLeft,f=n.requestError,p=n.noMore,j=n.errorText,b=n.onScroll,x=void 0===b?function(){}:b,m=e.sticks,O=(e.threads||{}).pageData,w=i.props.siteStore,N=((null===w||void 0===w||null===(t=w.webConfig)||void 0===t?void 0:t.other)||{}).countThreads,A=void 0===N?0:N;return Object(h.jsx)($,{list:O,sticks:m,platform:"pc",pageName:"home",onScroll:x,loadNextPage:d,noMore:p,requestError:f,errorText:j,left:v(A),right:u(),top:i.renderTop(),visible:c,renderItem:function(e,t,n,i,c){return Object(h.jsx)(T.a,{onContentHeightChange:c,onImageReady:c,onVideoReady:c,data:e,className:ee.a.listItem,recomputeRowHeights:c},"".concat(e.threadId,"-").concat(e.updatedAt))},children:Object(h.jsxs)("div",{className:ee.a.indexContent,children:[Object(h.jsx)(ne,{onFilterClick:a,onPostThread:s,isShowDefault:o,ishide:!0}),Object(h.jsxs)("div",{className:ee.a.contnetTop,children:[(null===m||void 0===m?void 0:m.length)>0&&Object(h.jsx)("div",{className:"".concat(ee.a.TopNewsBox," ").concat(!c&&ee.a.noBorder),children:Object(h.jsx)(y.a,{data:m,platform:"pc",isShowBorder:!1})}),c&&Object(h.jsx)("div",{className:ee.a.topNewContent,children:Object(h.jsx)(g,{visible:c,conNum:r,goRefresh:l})})]})]})})},i}return o()(n,[{key:"render",value:function(){var e=this.props.indexStore;return this.props.enabledVList?this.renderVlist(e):this.renderContent(e)}}]),n}(p.a.Component)}}]);