_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[74],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=a,t.useAmp=function(){return a(o.default.useContext(i.AmpStateContext))};var r,o=(r=n("q1tI"))&&r.__esModule?r:{default:r},i=n("lwAK");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,r=e.hybrid,o=void 0!==r&&r,i=e.hasQuery,a=void 0!==i&&i;return n||o&&a}},"/Nde":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return h}));var r=n("lSNA"),o=n.n(r),i=(n("o0o1"),n("ls82"),n("yXPU"),n("+3IH")),a=n("dJ22");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={Code:"common_0001",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0"},f={Code:"common_0002",Message:"\u9700\u8981\u8865\u5145\u9644\u52a0\u4fe1\u606f"},l={Code:"common_0003",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0\u548c\u9644\u52a0\u4fe1\u606f"},d=-4009,p=2,b=-4007,h=function(e){var t=e.webConfig.setSite;return"1"===(t=void 0===t?{}:t).openExtFields},v=function(e){if(function(e){var t=Object(i.a)(e,"data.isMissNickname",!1),n=10===Object(i.a)(e,"data.userStatus"),r=Object(i.a)(e,"data.accessToken","");if(-8e3!==e.code){var o=Object(i.a)(e,"data.uid","");if(Object(a.a)({accessToken:r}),n&&t)throw c({uid:o},l);if(t)throw c({uid:o},u);if(n)throw c({uid:o},f)}}(e),0===e.code||e.code===d||e.code===b){var t=e.code,n=Object(i.a)(e,"data.userStatus",0),r=Object(i.a)(e,"data.uid","");if(0===t&&n===p){var o=Object(i.a)(e,"data.accessToken","");Object(a.a)({accessToken:o}),t=n}if(t)throw{Code:t,Message:Object(i.a)(e,"data.rejectReason",""),uid:r}}}},"1ABj":function(e,t){e.exports=function(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},"4Brf":function(e,t,n){"use strict";var r=n("I+eb"),o=n("g6v/"),i=n("2oRo"),a=n("UTVS"),s=n("hh1v"),c=n("m/L8").f,u=n("6JNq"),f=i.Symbol;if(o&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var l={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new f(e):void 0===e?f():f(e);return""===e&&(l[t]=!0),t};u(d,f);var p=d.prototype=f.prototype;p.constructor=d;var b=p.toString,h="Symbol(test)"==String(f("test")),v=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=b.call(e);if(a(l,e))return"";var n=h?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},"4xcg":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("ma9I");var r,o=n("nKUr"),i=n("lwsE"),a=n.n(i),s=n("W8MJ"),c=n.n(s),u=n("7W2i"),f=n.n(u),l=n("a1gu"),d=n.n(l),p=n("Nsbk"),b=n.n(p),h=n("q1tI"),v=n.n(h),m=n("kMSe"),g=n("+3IH"),y=n("g4pe"),O=n.n(y),w=(n("yXV3"),n("rB9j"),function(e,t,n,r){var o=j(e+t),i=[],a=[];if(n||!P(o,i)){n&&document.getElementById(o)&&document.getElementById(o).parentNode.removeChild(document.getElementById(o)),i.push(o);var s=document.createElement("script");s.type="text/javascript",s.id=o;try{e?(s.src=e,s.onloadDone=!1,s.onload=function(){s.onloadDone=!0,a[e]=1},s.onreadystatechange=function(){"loaded"!==s.readyState&&"complete"!==s.readyState||s.onloadDone||(s.onloadDone=!0,a[e]=1)}):t&&(s.text=t),document.getElementsByTagName("head")[0].appendChild(s)}catch(c){console.log(c)}}}),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=0,r=0,o="",i="";for(i=t-e.length%t,r=0;r<i;r+=1)e+="0";for(;n<e.length;)o=k(o,e.substr(n,t)),n+=t;return o},k=function(e,t){for(var n="",r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e.charCodeAt(o)^t.charCodeAt(o);n+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(i%52)}return n},P=function(e,t){if("string"===typeof e||"number"===typeof e)for(var n in t)if(t[n]===e)return!0;return!1};function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var x=Object(m.c)("site")(r=Object(m.d)(r=function(e){f()(n,e);var t=S(n);function n(e){return a()(this,n),t.call(this,e)}return c()(n,[{key:"componentDidMount",value:function(){var e,t,n;!function(e){if(-1===e.indexOf("<script"))return e;for(var t=/<script[^\>]*?>([^\x00]*?)<\/script>/gi,n=[];n=t.exec(e);){var r=/<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\/script>/i,o=[];(o=r.exec(n[0]))?w(o[1],"",o[2],o[3]):(o=(r=/<script(.*?)>([^\x00]+?)<\/script>/i).exec(n[0]),w("",o[2],-1!==o[1].indexOf("reload=")))}}((null===(e=this.props.site)||void 0===e||null===(t=e.webConfig)||void 0===t||null===(n=t.setSite)||void 0===n?void 0:n.siteStat)||"")}},{key:"formatTitle",value:function(){var e=this.props,t=e.site,n=e.title,r=e.showSiteName,o=void 0===r||r,i=Object(g.a)(t,"webConfig.setSite.siteName","\u6b22\u8fce\u60a8");return n&&""!==n&&(i="".concat(n).concat(o?" - ".concat(i):"")),i}},{key:"formatKeywords",value:function(){var e=this.props,t=e.site,n=e.keywords,r=Object(g.a)(t,"webConfig.setSite.siteKeywords","\u6b22\u8fce\u60a8");return n&&""!==n&&(r="".concat(n," - ").concat(r)),r}},{key:"formatDescription",value:function(){var e=this.props,t=e.site,n=e.description,r=Object(g.a)(t,"webConfig.setSite.siteIntroduction","\u6b22\u8fce\u60a8");return n&&""!==n&&(r=n),r}},{key:"render",value:function(){var e,t,n,r=(null===(e=this.props.site)||void 0===e||null===(t=e.webConfig)||void 0===t||null===(n=t.setSite)||void 0===n?void 0:n.siteFavicon)||"";return Object(o.jsxs)(O.a,{children:[Object(o.jsx)("meta",{name:"keywords",content:this.formatKeywords()}),Object(o.jsx)("meta",{name:"description",content:this.formatDescription()}),r&&Object(o.jsx)("link",{rel:"icon",href:r}),Object(o.jsx)("title",{children:this.formatTitle()})]})}}]),n}(v.a.Component))||r)||r;t.a=x},"5DmW":function(e,t,n){var r=n("I+eb"),o=n("0Dky"),i=n("/GqU"),a=n("Bs8V").f,s=n("g6v/"),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},"5Tg+":function(e,t,n){var r=n("tiKp");t.f=r},"8Kt/":function(e,t,n){"use strict";n("lSNA");t.__esModule=!0,t.defaultHead=f,t.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),i=(r=n("Xuae"))&&r.__esModule?r:{default:r},a=n("lwAK"),s=n("FYa8"),c=n("/0+H");function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(o.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function l(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var d=["name","httpEquiv","charSet","itemProp"];function p(e,t){return e.reduce((function(e,t){var n=o.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(l,[]).reverse().concat(f(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,r={};return function(o){var i=!0,a=!1;if(o.key&&"number"!==typeof o.key&&o.key.indexOf("$")>0){a=!0;var s=o.key.slice(o.key.indexOf("$")+1);e.has(s)?i=!1:e.add(s)}switch(o.type){case"title":case"base":t.has(o.type)?i=!1:t.add(o.type);break;case"meta":for(var c=0,u=d.length;c<u;c++){var f=d[c];if(o.props.hasOwnProperty(f))if("charSet"===f)n.has(f)?i=!1:n.add(f);else{var l=o.props[f],p=r[f]||new Set;"name"===f&&a||!p.has(l)?(p.add(l),r[f]=p):i=!1}}}return i}}()).reverse().map((function(e,t){var n=e.key||t;return o.default.cloneElement(e,{key:n})}))}function b(e){var t=e.children,n=(0,o.useContext)(a.AmpStateContext),r=(0,o.useContext)(s.HeadManagerContext);return o.default.createElement(i.default,{reduceComponentsToState:p,headManager:r,inAmpMode:(0,c.isInAmpMode)(n)},t)}b.rewind=function(){};var h=b;t.default=h},"8rPu":function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return T}));n("qePV"),n("5DmW"),n("R5XZ");var r,o,i,a,s,c,u,f,l,d,p=n("o0o1"),b=n.n(p),h=n("lSNA"),v=n.n(h),m=(n("ls82"),n("yXPU")),g=n.n(m),y=n("yG8O"),O=n.n(y),w=n("lwsE"),j=n.n(w),k=n("W8MJ"),P=n.n(k),S=n("U+yc"),x=n.n(S),C=(n("1ABj"),n("2vnA")),E=n("sho3"),I=n("+3IH"),M=n("dJ22"),R=n("/Nde");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={MOBILE_VERIFY_ERROR:{Code:"mbl_0002",Message:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7"},VERIFY_TIME_ERROR:{Code:"mbl_0001",Message:"\u8bf7\u7b49\u5f85\u5012\u8ba1\u65f6\u7ed3\u675f\u540e\u518d\u53d1\u9001\u77ed\u4fe1"},NO_MOBILE_ERROR:{Code:"mbl_0000",Message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"},NETWORK_ERROR:{Code:"mbl_9999",Message:"\u7f51\u7edc\u9519\u8bef"},NO_VERIFY_CODE:{Code:"mbl_0003",Message:"\u9a8c\u8bc1\u7801\u7f3a\u5931"},NEED_BIND_USERNAME:{Code:"common_0001",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0"},NEED_COMPLETE_REQUIRED_INFO:{Code:"common_0002",Message:"\u9700\u8981\u8865\u5145\u9644\u52a0\u4fe1\u606f"},NEED_ALL_INFO:{Code:"common_0003",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0\u548c\u9644\u52a0\u4fe1\u606f"},NEED_BIND_WECHAT:{Code:-8e3,Message:"\u9700\u8981\u7ed1\u5b9a\u5fae\u4fe1"}},T=(r=function(){function e(){var t=this;j()(this,e),this.codeTimmer=null,O()(this,"mobile",o,this),O()(this,"code",i,this),O()(this,"codeTimeout",a,this),O()(this,"inviteCode",s,this),O()(this,"needToSetNickname",c,this),O()(this,"needToCompleteExtraInfo",u,this),this.verifyMobile=function(){return/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(t.mobile)},this.beforeSendVerify=function(){if(t.codeTimeout)throw N.VERIFY_TIME_ERROR;if(!t.mobile)throw N.NO_MOBILE_ERROR;if(!t.verifyMobile())throw N.MOBILE_VERIFY_ERROR},this.setCounter=function(e){t.codeTimeout=e,t.codeTimmer=setTimeout((function(){t.codeTimeout=null,t.codeTimmer=null}),1e3*Number(t.codeTimeout));var n=function e(){t.codeTimeout&&(t.codeTimeout=t.codeTimeout-1,setTimeout((function(){e()}),1e3))};setTimeout((function(){return n()}),1e3)},O()(this,"reset",f,this),O()(this,"sendCode",l,this),this.beforeLoginVerify=function(){if(!t.mobile)throw N.NO_MOBILE_ERROR;if(!t.code)throw N.NO_VERIFY_CODE},O()(this,"login",d,this)}return P()(e,[{key:"isInvalidCode",get:function(){return 6===this.code.length}},{key:"isInfoComplete",get:function(){return this.code&&this.mobile}}]),e}(),o=x()(r.prototype,"mobile",[C.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=x()(r.prototype,"code",[C.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=x()(r.prototype,"codeTimeout",[C.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=x()(r.prototype,"inviteCode",[C.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=x()(r.prototype,"needToSetNickname",[C.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=x()(r.prototype,"needToCompleteExtraInfo",[C.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x()(r.prototype,"isInvalidCode",[C.e],Object.getOwnPropertyDescriptor(r.prototype,"isInvalidCode"),r.prototype),x()(r.prototype,"isInfoComplete",[C.e],Object.getOwnPropertyDescriptor(r.prototype,"isInfoComplete"),r.prototype),f=x()(r.prototype,"reset",[C.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.mobile="",e.code="",e.codeTimeout=null}}}),l=x()(r.prototype,"sendCode",[C.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=g()(b.a.mark((function t(n){var r,o,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.captchaRandStr,o=n.captchaTicket,t.prev=1,t.next=4,Object(E.smsSend)({data:{mobile:e.mobile,type:"login",captchaRandStr:r,captchaTicket:o}});case 4:if(0!==(i=t.sent).code){t.next=8;break}return e.setCounter(i.data.interval),t.abrupt("return",i.data);case 8:throw{Code:i.code,Message:i.msg};case 11:if(t.prev=11,t.t0=t.catch(1),!t.t0.Code){t.next=15;break}throw t.t0;case 15:throw _(_({},N.NETWORK_ERROR),{},{error:t.t0});case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}}),d=x()(r.prototype,"login",[C.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return g()(b.a.mark((function t(){var n,r,o,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.beforeLoginVerify(),t.prev=1,t.next=4,Object(E.smsLogin)({data:{mobile:e.mobile,code:e.code,inviteCode:e.inviteCode,type:"mobilebrowser_sms_login"}});case 4:if(n=t.sent,Object(R.d)(n),0!==n.code){t.next=10;break}return r=Object(I.a)(n,"data.accessToken",""),Object(M.a)({accessToken:r}),t.abrupt("return",n.data);case 10:if(-8e3!==n.code){t.next=14;break}throw o=Object(I.a)(n,"data.uid",""),i=Object(I.a)(n,"data.accessToken",""),_(_({},N.NEED_BIND_WECHAT),{},{sessionToken:Object(I.a)(n,"data.sessionToken"),nickname:Object(I.a)(n,"data.nickname"),accessToken:i,uid:o});case 14:throw{Code:n.code,Message:n.msg};case 17:if(t.prev=17,t.t0=t.catch(1),!t.t0.Code){t.next=21;break}throw t.t0;case 21:throw _(_({},N.NETWORK_ERROR),{},{error:t.t0});case 22:case"end":return t.stop()}}),t,null,[[1,17]])})))}}),r)},"BX/b":function(e,t,n){var r=n("/GqU"),o=n("JBy8").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(t){return a.slice()}}(e):o(r(e))}},FYa8:function(e,t,n){"use strict";var r;t.__esModule=!0,t.HeadManagerContext=void 0;var o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.HeadManagerContext=o},J0pL:function(e,t,n){"use strict";n("pNMO"),n("4Brf");var r,o=n("nKUr"),i=n("lwsE"),a=n.n(i),s=n("W8MJ"),c=n.n(s),u=n("7W2i"),f=n.n(u),l=n("a1gu"),d=n.n(l),p=n("Nsbk"),b=n.n(p),h=n("q1tI"),v=n.n(h),m=n("kMSe"),g=n("4xcg");function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var O=Object(m.c)("site")(r=Object(m.c)("search")(r=Object(m.d)(r=function(e){f()(n,e);var t=y(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"renderView",value:function(){var e=this.props,t=e.pc,n=e.h5,r=e.title,i=void 0===r?"":r,a=e.keywords,s=void 0===a?"":a,c=e.description,u=void 0===c?"":c,f=e.showSiteName,l=void 0===f||f,d="pc"===this.props.site.platform?t||null:n||null;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(g.a,{title:i,keywords:s,description:u,showSiteName:l}),d]})}},{key:"render",value:function(){return this.renderView()}}]),n}(v.a.Component))||r)||r)||r;t.a=O},JTJg:function(e,t,n){"use strict";var r=n("I+eb"),o=n("WjRb"),i=n("HYAF");r({target:"String",proto:!0,forced:!n("qxPZ")("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},QcND:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));n("ma9I"),n("yq1k"),n("4mDm"),n("Rfxz"),n("07d7"),n("rB9j"),n("JTJg"),n("PKPk"),n("Rm1S"),n("UxlC"),n("3bBZ"),n("Kz25");var r=n("nKUr"),o=n("o0o1"),i=n.n(o),a=n("lSNA"),s=n.n(a),c=(n("ls82"),n("yXPU")),u=n.n(c),f=n("lwsE"),l=n.n(f),d=n("PJYZ"),p=n.n(d),b=n("W8MJ"),h=n.n(b),v=n("7W2i"),m=n.n(v),g=n("a1gu"),y=n.n(g),O=n("Nsbk"),w=n.n(O),j=n("q1tI"),k=n.n(j),P=n("kMSe"),S=n("n4oF"),x=n("zDaA"),C=n("sho3"),E=n("B5JU"),I=n.n(E),M=n("20a2"),R=n("bK+J"),D=n("/Nde"),_=n("MCNy"),N=n.n(_),T=n("pGE/"),A=n("Tk/S"),U="rKwiNl2JOBH1dcaoggUsN",W="_3_kaucwAnhguPyKqHJUwsL",B=(n("5s+n"),n("RIqP")),L=n.n(B),q=n("rGXy"),J=n("lY1M");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=["closeWindow","chooseImage","uploadImage","getLocalImgData","updateAppMessageShareData","updateTimelineShareData","getNetworkType"],H=!1;function X(){return V.apply(this,arguments)}function V(){return(V=u()(i.a.mark((function e(){var t,n,r,o,a,s,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],n=c.length>1&&void 0!==c[1]?c[1]:[],J.b.env("weixin")){e.next=4;break}return e.abrupt("return");case 4:return r=[],window.wx&&wx.config||(o=new Promise((function(e){var t=document.createElement("script");t.src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js",t.onload=function(){return e()},document.body.appendChild(t)})),r.push(o)),e.next=8,Promise.all(r);case 8:if(t&&!H){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(q.getWXConfig)({params:{url:encodeURIComponent(window.location.href)}});case 12:if(0!==(a=e.sent).code||!a.data||!a.data.appId){e.next=21;break}return i=a.data,s={appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature},wx&&wx.config(z(z({debug:!1},s),{},{jsApiList:[].concat(K,L()(n))})),wx&&(wx.hasDoneConfig=!0),H=!0,e.abrupt("return",!0);case 21:console.error("\u521d\u59cb\u5316\u5fae\u4fe1jssdk\u5931\u8d25\uff01",a);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}var i}),e)})))).apply(this,arguments)}var Y=n("lN2P");var G=n("yO9+"),Q=10;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}function te(e,t){var n,o=Object(P.c)("site")(n=Object(P.c)("user")(n=Object(P.c)("emotion")(n=Object(P.c)("commonLogin")(n=Object(P.d)(n=function(n){m()(a,n);var o=ee(a);function a(e){var t,n;l()(this,a),(t=o.call(this,e)).handleWxShare=t.handleWxShare.bind(p()(t)),t.canPublish=t.canPublish.bind(p()(t));var r=e.serverUser,i=e.serverSite,s=e.serverEmotion,c=e.user,u=e.site,f=e.emotion;return i&&i.platform&&u.setPlatform(i.platform),i&&i.closeSite&&u.setCloseSiteConfig(i.closeSite),i&&i.webConfig&&u.setSiteConfig(i.webConfig),r&&r.userInfo&&c.setUserInfo(r.userInfo),r&&r.userPermissions&&c.setUserPermissions(r.userPermissions),r&&r.userPermissions&&c.setUserPermissions(r.userPermissions),s&&s.emojis&&f.setEmoji(s.emojis),n=Object(S.a)()?!i:!(u&&u.webConfig),t.state={isNoSiteData:n,isPass:!1},t}return h()(a,null,[{key:"getInitialProps",value:function(){var t=u()(i.a.mark((function t(n){var r,o,a,s,c,u,f,l,d,p,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r="static",o={},c={},!Object(S.a)()){t.next=25;break}return b=n.req.headers,r=b&&!T.a.isEmptyObject(b)?Object(x.a)(b["user-agent"]):"static",Object(C.readEmoji)({},n),t.next=10,Object(C.readForum)({},n);case 10:if(o=t.sent,s={platform:r,closeSite:-3005===o.code?o.data:null,webConfig:o&&o.data||null},!o||0!==o.code||null===(l=o)||void 0===l||null===(d=l.data)||void 0===d||null===(p=d.user)||void 0===p||!p.userId){t.next=21;break}return t.next=15,Object(C.readUser)({params:{pid:o.data.user.userId}},n);case 15:return a=t.sent,t.next=18,Object(C.readPermissions)({},n);case 18:f=t.sent,u=a&&0===a.code?a.data:null,f=f&&0===f.code?f.data:null;case 21:if(!o||0!==o.code||!e.getInitialProps){t.next=25;break}return t.next=24,e.getInitialProps(n,{user:u,site:s});case 24:c=t.sent;case 25:return t.abrupt("return",$($({},c),{},{serverSite:s,serverUser:{userInfo:u,userPermissions:f}}));case 28:return t.prev=28,t.t0=t.catch(0),console.log("err",t.t0),t.abrupt("return",{serverSite:{},serverUser:{}});case 32:case"end":return t.stop()}}),t,null,[[0,28]])})));return function(e){return t.apply(this,arguments)}}()}]),h()(a,[{key:"componentDidMount",value:function(){var e=u()(i.a.mark((function e(){var n,r,o,a,s,c,u,f,l,d,p,b,h,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.isNoSiteData,o=this.props,a=o.serverUser,s=o.serverSite,c=o.user,u=o.site,f=o.emotion,d=!1,null!==(n=f.emojis)&&void 0!==n&&n.length||f.fetchEmoji(),u.setPlatform(Object(x.a)(window.navigator.userAgent)),!r){e.next=16;break}if(l=(null===s||void 0===s?void 0:s.webConfig)||null){e.next=14;break}return e.next=10,Object(C.readForum)({});case 10:(p=e.sent).data&&u.setSiteConfig(p.data),this.setAppCommonStatus(p),l=p.data||null;case 14:e.next=17;break;case 16:l=u?u.webConfig:null;case 17:if(u.initUserLoginEntryStatus(),!l||!l.user){e.next=34;break}if(c&&c.userInfo||a&&a.userInfo){e.next=31;break}return e.next=22,Object(C.readUser)({params:{pid:l.user.userId}});case 22:return b=e.sent,e.next=25,Object(C.readPermissions)({});case 25:0===(h=e.sent).code&&h.data&&c.setUserPermissions(h.data),b.data&&c.setUserInfo(b.data),d=!!b.data,e.next=32;break;case 31:d=!0;case 32:e.next=35;break;case 34:d=!1;case 35:return c.updateLoginStatus(d),v=this.isPass(),t&&v&&(v=t(v)),this.setState({isPass:v}),e.next=41,X(l&&l.passport&&l.passport.offiaccountOpen);case 41:e.sent&&(this.handleWxShare(this.props.router.asPath),this.props.router.events.on("routeChangeComplete",this.handleWxShare));case 43:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleWxShare",value:function(e){if(window.wx&&window.wx.hasDoneConfig){var t=this.props,n=t.user,r=t.site,o=n.userInfo,i=r.webConfig.setSite,a=i.siteName,s=i.siteIntroduction,c=i.siteHeaderLogo,u=i.siteFavicon,f=o||{},l=f.nickname,d=f.avatarUrl,p=f.signature,b=f.id,h=document.title,v=s?s.length>35?"".concat(s.substr(0,35),"..."):s:"\u5728\u8fd9\u91cc\uff0c\u53d1\u73b0\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9",m=window.location.href,g=c||u;e.match(/\/thread\/\d+/)||e.match(/\/user\/\d+/)||("/my"===e&&l&&(h="".concat(l,"\u7684\u4e3b\u9875"),g=d,v=p?p.length>35?"".concat(p.substr(0,35),"..."):p:"\u5728\u8fd9\u91cc\uff0c\u53d1\u73b0\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9",m="".concat(window.location.origin,"/user/").concat(b)),(e.includes("/forum/partner-invite")||e.match(/\/user\/(username|wx|phone)-login/)||e.includes("/user/register"))&&(h="\u9080\u8bf7\u60a8\u52a0\u5165".concat(a)),(e.includes("/invite")||"/"===e)&&(h="".concat(l,"\u9080\u8bf7\u60a8\u52a0\u5165").concat(a)),e.includes("/message?page=chat")&&(h="\u6211\u7684\u79c1\u4fe1 - ".concat(a),m="".concat(window.location.origin,"/message")),Object(A.a)(h,v,m,g))}}},{key:"setAppCommonStatus",value:function(e){var t=this.props.site;switch([G.k,G.n,G.h,G.m,G.i,G.o,G.l].includes(e.code)&&Y.a.saveCurrentUrl(),e.code){case 0:break;case G.v:t.setCloseSiteConfig(e.data),I.a.redirect({url:"/close"});break;case G.f:break;case G.x:Object(R.a)(),window.location.reload();break;case G.g:I.a.redirect({url:"/404"});break;case G.k:Object(R.a)(),Y.a.gotoLogin();break;case G.n:Object(R.a)(),Y.a.saveAndRedirect("/user/register");break;case G.h:I.a.push({url:"/user/status?statusCode=2"});break;case G.m:I.a.push({url:"/user/status?statusCode=-4007"});break;case G.i:I.a.push({url:"/user/status?statusCode=-4009"});break;case G.o:Y.a.saveAndRedirect("/user/supplementary");break;case G.j:I.a.redirect({url:"/"});break;case G.l:Y.a.saveAndRedirect("/forum/partner-invite");break;default:t.setErrPageType("site"),I.a.redirect({url:"/500"})}}},{key:"checkJump",value:function(){var e=this.props.router,t=Y.a.getUrl();if(t)if(new URL(t).pathname===e.asPath)Y.a.clear();else if("/"===e.asPath)return Y.a.restore(),!1;return!0}},{key:"isPass",value:function(){var e=this.props,t=e.site,n=e.router,r=e.user,o=e.commonLogin,i=this.state.isNoSiteData;if(t&&t.webConfig){var a,s;if(i&&this.setState({isNoSiteData:!1}),"/close"!==n.asPath&&t.closeSiteConfig)return I.a.redirect({url:"/close"}),!1;if(r.isLogin()){if(!t.isOffiaccountOpen&&!t.isMiniProgramOpen&&"/user/bind-phone"!==n.asPath&&t.isSmsOpen&&!r.mobile)return Y.a.saveAndRedirect("/user/bind-phone"),!1;if("/user/bind-nickname"!==n.asPath&&!r.nickname)return o.needToCompleteExtraInfo=r.userStatus===Q,Y.a.saveAndRedirect("/user/bind-nickname"),!1;if(r.userStatus===D.b&&!G.u.includes(n.pathname))return I.a.replace({url:"/user/status?statusCode=".concat(r.userStatus)}),!1}if("pay"===(null===t||void 0===t||null===(a=t.webConfig)||void 0===a||null===(s=a.setSite)||void 0===s?void 0:s.siteMode)){if(G.z.some((function(e){return n.asPath.match(e)})))return this.checkJump(),!0;var c=n.query.inviteCode,u=c?"?inviteCode=".concat(c):"";if(null===r||void 0===r||!r.paid)return Y.a.saveAndRedirect("/forum/partner-invite".concat(u)),!1}}return this.checkJump()}},{key:"filterProps",value:function(e){var t=$({},e);return delete t.serverUser,delete t.serverSite,delete t.user,delete t.site,t}},{key:"canPublish",value:function(){var e=this.props;return function(e,t){if(!e.isLogin())return Y.a.gotoLogin(),!1;if(!t.publishNeedBindPhone&&!t.publishNeedBindWechat)return!0;var n="bind".concat(t.publishNeedBindPhone&&!e.mobile?"Mobile":"").concat(t.publishNeedBindWechat&&!e.isBindWechat?"Wechat":""),r="";switch("".concat(t.isSmsOpen?"mobile":"").concat("none"!==t.wechatEnv?"wechat":"")){case"mobile":r=e.mobile?"":"/user/bind-phone";break;case"wechat":r=e.isBindWechat?"":"/user/wx-bind-qrcode";break;case"mobilewechat":switch(n){case"bindMobile":r=e.mobile?"":"/user/bind-phone";break;case"bindWechat":r=e.isBindWechat?"":"/user/wx-bind-qrcode";break;case"bindMobileWechat":r=e.isBindWechat||e.mobile?"":"/user/wx-bind-qrcode?bindPhone=1"}}return r&&Y.a.saveAndPush(r),!r}(e.user,e.site)}},{key:"render",value:function(){var t=this.state,n=t.isNoSiteData,o=t.isPass;return"static"===this.props.site.platform?null:n||!o?Object(r.jsx)("div",{className:U,children:Object(r.jsx)(N.a,{className:W,name:"LoadingOutlined",size:"large"})}):Object(r.jsx)(e,$({canPublish:this.canPublish},this.filterProps(this.props)))}}]),a}(k.a.Component))||n)||n)||n)||n)||n;return Object(M.withRouter)(o)}},R5XZ:function(e,t,n){var r=n("I+eb"),o=n("2oRo"),i=n("NC/Y"),a=[].slice,s=function(e){return function(t,n){var r=arguments.length>2,o=r?a.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(i)},{setTimeout:s(o.setTimeout),setInterval:s(o.setInterval)})},"Tk/S":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("lY1M");function o(e,t,n,o){r.b.env("weixin")&&window.wx&&window.wx.ready((function(){var r={title:e||"Discuz! Q",desc:t&&""!=t?t:e||"Discuz! Q",link:n||window.location.href,imgUrl:o};wx.updateAppMessageShareData(r),wx.updateTimelineShareData(r)}))}},"U+yc":function(e,t){e.exports=function(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}},Xuae:function(e,t,n){"use strict";var r=n("RIqP"),o=n("lwsE"),i=n("W8MJ"),a=(n("PJYZ"),n("7W2i")),s=n("a1gu"),c=n("Nsbk");function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}t.__esModule=!0,t.default=void 0;var f=n("q1tI"),l=function(e){a(n,e);var t=u(n);function n(e){var i;return o(this,n),(i=t.call(this,e))._hasHeadManager=void 0,i.emitChange=function(){i._hasHeadManager&&i.props.headManager.updateHead(i.props.reduceComponentsToState(r(i.props.headManager.mountedInstances),i.props))},i._hasHeadManager=i.props.headManager&&i.props.headManager.mountedInstances,i}return i(n,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),n}(f.Component);t.default=l},YUN4:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/wx-auth",function(){return n("wXKg")}])},"dG/n":function(e,t,n){var r=n("Qo9l"),o=n("UTVS"),i=n("5Tg+"),a=n("m/L8").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},g4pe:function(e,t,n){e.exports=n("8Kt/")},lwAK:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;var o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=o},pNMO:function(e,t,n){"use strict";var r=n("I+eb"),o=n("2oRo"),i=n("0GbY"),a=n("xDBR"),s=n("g6v/"),c=n("STAE"),u=n("/b8u"),f=n("0Dky"),l=n("UTVS"),d=n("6LWA"),p=n("hh1v"),b=n("glrk"),h=n("ewvW"),v=n("/GqU"),m=n("wE6v"),g=n("XGwC"),y=n("fHMY"),O=n("33Wh"),w=n("JBy8"),j=n("BX/b"),k=n("dBg+"),P=n("Bs8V"),S=n("m/L8"),x=n("0eef"),C=n("kRJp"),E=n("busE"),I=n("VpIT"),M=n("93I0"),R=n("0BK2"),D=n("kOOl"),_=n("tiKp"),N=n("5Tg+"),T=n("dG/n"),A=n("1E5z"),U=n("afO8"),W=n("tycR").forEach,B=M("hidden"),L="Symbol",q=_("toPrimitive"),J=U.set,F=U.getterFor(L),z=Object.prototype,K=o.Symbol,H=i("JSON","stringify"),X=P.f,V=S.f,Y=j.f,G=x.f,Q=I("symbols"),Z=I("op-symbols"),$=I("string-to-symbol-registry"),ee=I("symbol-to-string-registry"),te=I("wks"),ne=o.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,oe=s&&f((function(){return 7!=y(V({},"a",{get:function(){return V(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=X(z,t);r&&delete z[t],V(e,t,n),r&&e!==z&&V(z,t,r)}:V,ie=function(e,t){var n=Q[e]=y(K.prototype);return J(n,{type:L,tag:e,description:t}),s||(n.description=t),n},ae=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof K},se=function(e,t,n){e===z&&se(Z,t,n),b(e);var r=m(t,!0);return b(n),l(Q,r)?(n.enumerable?(l(e,B)&&e[B][r]&&(e[B][r]=!1),n=y(n,{enumerable:g(0,!1)})):(l(e,B)||V(e,B,g(1,{})),e[B][r]=!0),oe(e,r,n)):V(e,r,n)},ce=function(e,t){b(e);var n=v(t),r=O(n).concat(de(n));return W(r,(function(t){s&&!ue.call(n,t)||se(e,t,n[t])})),e},ue=function(e){var t=m(e,!0),n=G.call(this,t);return!(this===z&&l(Q,t)&&!l(Z,t))&&(!(n||!l(this,t)||!l(Q,t)||l(this,B)&&this[B][t])||n)},fe=function(e,t){var n=v(e),r=m(t,!0);if(n!==z||!l(Q,r)||l(Z,r)){var o=X(n,r);return!o||!l(Q,r)||l(n,B)&&n[B][r]||(o.enumerable=!0),o}},le=function(e){var t=Y(v(e)),n=[];return W(t,(function(e){l(Q,e)||l(R,e)||n.push(e)})),n},de=function(e){var t=e===z,n=Y(t?Z:v(e)),r=[];return W(n,(function(e){!l(Q,e)||t&&!l(z,e)||r.push(Q[e])})),r};(c||(E((K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=D(e),n=function(e){this===z&&n.call(Z,e),l(this,B)&&l(this[B],t)&&(this[B][t]=!1),oe(this,t,g(1,e))};return s&&re&&oe(z,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",(function(){return F(this).tag})),E(K,"withoutSetter",(function(e){return ie(D(e),e)})),x.f=ue,S.f=se,P.f=fe,w.f=j.f=le,k.f=de,N.f=function(e){return ie(_(e),e)},s&&(V(K.prototype,"description",{configurable:!0,get:function(){return F(this).description}}),a||E(z,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),W(O(te),(function(e){T(e)})),r({target:L,stat:!0,forced:!c},{for:function(e){var t=String(e);if(l($,t))return $[t];var n=K(t);return $[t]=n,ee[n]=t,n},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(l(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return void 0===t?y(e):ce(y(e),t)},defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:fe}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:le,getOwnPropertySymbols:de}),r({target:"Object",stat:!0,forced:f((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(h(e))}}),H)&&r({target:"JSON",stat:!0,forced:!c||f((function(){var e=K();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))},{stringify:function(e,t,n){for(var r,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=t,(p(t)||void 0!==e)&&!ae(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ae(t))return t}),o[1]=t,H.apply(null,o)}});K.prototype[q]||C(K.prototype,q,K.prototype.valueOf),A(K,L),R[B]=!0},rGXy:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getWXConfig=function(){return p.apply(this,arguments)};var o=r(n("o0o1")),i=r(n("lSNA")),a=r(n("QILm"));n("ls82");var s=r(n("yXPU")),c=n("0QFe"),u=r(n("m4Ii"));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={messageText:{type:"string",required:!0},recipientUsername:{type:"string",required:!0},imageUrl:{type:"string"},attachmentId:{type:"number"}};function p(){return(p=(0,s.default)(o.default.mark((function e(){var t,n,r,i,s,f,p,b,h=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.prev=1,n=t.params,r=void 0===n?{}:n,i=t.data,s=void 0===i?{}:i,f=(0,a.default)(t,["params","data"]),p=l(l({url:"/apiv3/offiaccount/jssdk",method:"GET",params:r,data:s},f),{},{validateRules:d}),e.next=6,u.default.dispatcher(p);case 6:return b=e.sent,e.abrupt("return",b);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",(0,c.handleError)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}},wXKg:function(e,t,n){"use strict";n.r(t);n("ma9I");var r,o=n("nKUr"),i=n("o0o1"),a=n.n(i),s=(n("ls82"),n("yXPU")),c=n.n(s),u=n("lwsE"),f=n.n(u),l=n("W8MJ"),d=n.n(l),p=n("7W2i"),b=n.n(p),h=n("a1gu"),v=n.n(h),m=n("Nsbk"),g=n.n(m),y=n("q1tI"),O=n.n(y),w=n("kMSe"),j=n("wdT/"),k=n.n(j),P=n("sho3"),S=n("QcND"),x=n("xfbP"),C=n("+3IH"),E=n("J0pL"),I=n("dJ22"),M=n("/Nde"),R=n("8rPu");function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v()(this,n)}}var _=Object(w.c)("site")(r=Object(w.c)("user")(r=Object(w.c)("commonLogin")(r=Object(w.c)("invite")(r=function(e){b()(n,e);var t=D(n);function n(){return f()(this,n),t.apply(this,arguments)}return d()(n,[{key:"componentDidMount",value:function(){var e=c()(a.a.mark((function e(){var t,n,r,o,i,s,c,u,f,l,d,p,b,h,v,m,g,y,O,w,j,S,x,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.router,r=t.invite,o=n.query,i=o.code,s=o.sessionId,c=o.sessionToken,u=o.state,f=o.loginType,l=o.action,d=o.nickname,p=void 0===d?"":d,b=o.bindPhone,h=void 0===b?"":b,v=o.toPage,m=void 0===v?"":v,"wx-bind"!==l){e.next=5;break}return window.location.href="/user/wx-bind?code=".concat(i,"&sessionId=").concat(s,"&sessionToken=").concat(c,"&state=").concat(u,"&nickname=").concat(p,"&loginType=").concat(f,"&bindPhone=").concat(h,"&toPage=").concat(m),e.abrupt("return");case 5:return(g=r.getInviteCode(n))&&r.setInviteCode(g),e.prev=7,this.target=k.a.loading({content:"\u5fae\u4fe1\u767b\u5f55\u4e2d...",duration:0}),e.next=11,Object(P.h5WechatCodeLogin)({timeout:1e4,params:{code:i,sessionId:s,sessionToken:c,state:u,inviteCode:g}});case 11:if(y=e.sent,Object(M.d)(y),-7016!==y.code){e.next=17;break}return O=y.data,w=O.sessionToken,j=O.nickname,window.location.href="/user/wx-select?sessionToken=".concat(w,"&nickname=").concat(j),e.abrupt("return");case 17:if(0!==y.code){e.next=24;break}return S=Object(C.a)(y,"data.accessToken"),x=Object(C.a)(y,"data.uid"),Object(I.a)({accessToken:S}),this.props.user.updateUserInfo(x),window.location.href="/",e.abrupt("return");case 24:throw{Code:y.code,Message:y.msg};case 27:if(e.prev=27,e.t0=e.catch(7),e.t0.Code!==R.a.NEED_COMPLETE_REQUIRED_INFO.Code){e.next=35;break}if(!Object(M.e)(this.props.site)){e.next=34;break}return this.props.commonLogin.needToCompleteExtraInfo=!0,this.props.router.push("/user/supplementary"),e.abrupt("return");case 34:return e.abrupt("return",window.location.href="/");case 35:if(e.t0.Code!==M.a&&e.t0.Code!==M.b&&e.t0.Code!==M.c){e.next=41;break}return(E=Object(C.a)(e.t0,"uid",""))&&this.props.user.updateUserInfo(E),this.props.commonLogin.setStatusMessage(e.t0.Code,e.t0.Message),window.location.href="/user/status?statusCode=".concat(e.t0.Code,"&statusMsg=").concat(e.t0.Message),e.abrupt("return");case 41:throw e.t0.Code&&k.a.error({content:e.t0.Message}),{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 43:case"end":return e.stop()}}),e,this,[[7,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e;null===this||void 0===this||null===(e=this.target)||void 0===e||e.hide()}},{key:"render",value:function(){return Object(o.jsx)(E.a,{h5:Object(o.jsx)(o.Fragment,{}),pc:Object(o.jsx)(o.Fragment,{}),title:"\u767b\u5f55"})}}]),n}(O.a.Component))||r)||r)||r)||r;t.default=Object(S.a)(Object(x.a)("weixin")(_))},xfbP:function(e,t,n){"use strict";var r=n("lSNA"),o=n.n(r),i=n("nKUr"),a=n("lwsE"),s=n.n(a),c=n("W8MJ"),u=n.n(c),f=n("7W2i"),l=n.n(f),d=n("a1gu"),p=n.n(d),b=n("Nsbk"),h=n.n(b),v=n("q1tI"),m=n.n(v),g=n("kMSe"),y=n("n4oF"),O=n("lN2P");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}t.a=function(e){return function(t){var n;return Object(g.c)("site")(n=function(n){l()(a,n);var r=j(a);function a(t){var n;if(s()(this,a),(n=r.call(this,t)).getCurrentMode=function(){return"none"!==n.props.site.wechatEnv?"weixin":n.props.site.isSmsOpen?"mobile":"user"},Object(y.a)())return p()(n);var o=n.getCurrentMode();return"weixin"===e&&"weixin"!==o&&O.a.saveAndLogin(),"phone"===e&&("user"!==o||n.props.site.isSmsOpen||O.a.saveAndLogin()),"user"===e&&"user"!==o&&O.a.saveAndLogin(),"register"===e&&"user"!==o&&O.a.saveAndLogin(),n}return u()(a,[{key:"render",value:function(){return Object(i.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props))}}]),a}(m.a.Component))||n}}},yG8O:function(e,t){e.exports=function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},yq1k:function(e,t,n){"use strict";var r=n("I+eb"),o=n("TWQb").includes,i=n("RNIs");r({target:"Array",proto:!0,forced:!n("rkAj")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},zDaA:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("n4oF");function o(e){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"h5":"pc";if(!Object(r.a)()){var n=90===Math.abs(window.orientation),o=window.innerWidth;"pc"===t&&o<800&&(t="h5"),"h5"===t&&!n&&o>=800&&(t="pc")}return t}}},[["YUN4",1,0,3,4,2]]]);