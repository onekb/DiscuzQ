_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[48],{"1Yc2":function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/result-topic",function(){return r("FIEe")}])},"7I0A":function(t,e,r){"use strict";r("ma9I"),r("R5XZ");var n=r("nKUr"),c=r("J4zp"),a=r.n(c),o=r("q1tI"),s=r.n(o),i=r("DetZ"),u=r.n(i),l=r("MCNy"),p=r.n(l),h=r("zgZ5");e.a=function(t){var e=t.onSearch,r=t.onCancel,c=t.defaultValue,o=void 0===c?"":c,i=t.isShowCancel,l=void 0===i||i,f=t.isShowBottom,d=void 0===f||f,j=t.searchWhileTyping,v=void 0!==j&&j,O=t.searchWhileTypingStartsAt,b=void 0===O?0:O,m=s.a.useState(o),g=a()(m,2),y=g[0],x=g[1],N=s.a.useState(!1),w=a()(N,2),k=w[0],C=w[1],D=s.a.useState(null),R=a()(D,2),S=R[0],P=R[1];return Object(n.jsxs)("div",{className:"".concat(h.a.container," ").concat(!d&&h.a.hiddenBottom),children:[Object(n.jsxs)("div",{className:h.a.inputWrapper,children:[Object(n.jsx)(p.a,{className:h.a.inputWrapperIcon,name:"SearchOutlined",size:16}),Object(n.jsx)(u.a,{value:y,placeholder:"\u8bf7\u8f93\u5165\u60f3\u8981\u641c\u7d22\u7684\u5185\u5bb9...",onEnter:function(t){return function(t){null!==S&&(clearTimeout(S),P(null)),P(setTimeout((function(){e(t.target.value)}),500))}(t)},onChange:function(t){return function(t){var r=t.target.value;x(r),r.length>0&&C(!0),v&&r.length>=b&&(null!==S&&(clearTimeout(S),P(null)),P(setTimeout((function(){e(r)}),v?1e3:0)))}(t)},className:h.a.input}),k&&Object(n.jsx)(p.a,{className:h.a.deleteIcon,name:"WrongOutlined",size:16,onClick:function(){x(""),C(!1)}})]}),l&&Object(n.jsx)("div",{className:h.a.cancel,onClick:r,children:"\u53d6\u6d88"})]})}},FIEe:function(t,e,r){"use strict";r.r(e);r("rB9j"),r("hByQ");var n,c=r("nKUr"),a=r("o0o1"),o=r.n(a),s=(r("ls82"),r("yXPU")),i=r.n(s),u=r("lwsE"),l=r.n(u),p=r("W8MJ"),h=r.n(p),f=r("7W2i"),d=r.n(f),j=r("a1gu"),v=r.n(j),O=r("Nsbk"),b=r.n(O),m=r("q1tI"),g=r.n(m),y=r("kMSe"),x=(r("2B1R"),r("20a2")),N=r("7I0A"),w=r("INMq"),k=r("lLUp"),C=r("i7m+");function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var c=b()(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return v()(this,r)}}var R,S=Object(y.c)("search")(n=Object(y.d)(n=function(t){d()(r,t);var e=D(r);function r(t){var n;l()(this,r),(n=e.call(this,t)).refreshData=function(){(0,n.props.dispatch)("refresh",n.state.keyword)},n.fetchMoreData=function(){return(0,n.props.dispatch)("moreData",n.state.keyword)},n.onCancel=function(){n.props.router.back()},n.onSearch=function(t){n.setState({keyword:t},(function(){n.refreshData()}))},n.onTopicClick=function(t){var e=t.topicId,r=void 0===e?"":e;n.props.router.push("/topic/topic-detail/".concat(r))};var c=n.props.router.query.keyword||"";return n.state={keyword:c,refreshing:!1},n}return h()(r,[{key:"render",value:function(){var t=this,e=this.state.keyword,r=this.props.search,n=r.topics,a=r.topicsError,o=n||{pageData:[]},s=o.pageData,i=void 0===s?[]:s,u=o.currentPage,l=o.totalPage;return Object(c.jsxs)(w.a,{onRefresh:this.fetchMoreData,noMore:u>=l,requestError:a.isError,errorText:a.errorText,children:[Object(c.jsx)(N.a,{onSearch:this.onSearch,onCancel:this.onCancel,defaultValue:e,searchWhileTyping:!0}),Object(c.jsx)("div",{className:C.a.wrapper,children:null===i||void 0===i?void 0:i.map((function(e,r){return Object(c.jsx)(k.a,{data:e,onClick:t.onTopicClick},r)}))})]})}}]),r}(g.a.Component))||n)||n,P=Object(x.withRouter)(S),T=(r("MCNy"),r("UD77"),r("z6Ap"),r("NEve"),r("Q6w4"),r("5WlO"),r("WNYm")),E=r("wXCO"),M=r("WNcC"),I=r("6D+O");function W(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var c=b()(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return v()(this,r)}}var U,_=Object(y.c)("site")(R=Object(y.c)("search")(R=Object(y.d)(R=function(t){d()(r,t);var e=W(r);function r(t){var n;l()(this,r),(n=e.call(this,t)).redirectToSearchResultUser=function(){n.props.router.push("/search/result-user")},n.onTopicClick=function(t){var e=t.topicId;n.props.router.push("/topic/topic-detail/".concat(e))},n.fetchMoreData=function(){return(0,n.props.dispatch)("moreData",n.state.keyword)},n.searchData=function(t){(0,n.props.dispatch)("refresh",t)},n.onSearch=function(t){n.setState({keyword:t},(function(){n.searchData(t)}))},n.renderRight=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(T.a,{}),Object(c.jsx)(E.a,{})]})};var a=n.props.router.query.keyword||"";return n.state={keyword:a,refreshing:!1},n}return h()(r,[{key:"render",value:function(){var t=this,e=this.props.search.topics||{},r=e.pageData,n=e.currentPage,a=e.totalPage,o=(this.props.search||{}).topicsError;return Object(c.jsx)(w.a,{noMore:n>=a,onRefresh:this.fetchMoreData,showRefresh:!1,isShowLayoutRefresh:!(null===r||void 0===r||!r.length),onSearch:this.onSearch,right:this.renderRight,className:"search-result-topic",children:Object(c.jsx)(M.a,{title:"\u6f6e\u6d41\u8bdd\u9898",type:"normal",isShowMore:!1,noData:!(null!==r&&void 0!==r&&r.length),isLoading:!r,icon:{type:1,name:"StrongSharpOutlined"},isError:o.isError,errorText:o.errorText,children:Object(c.jsx)("div",{className:I.a.topic,children:null===r||void 0===r?void 0:r.map((function(e,r){return Object(c.jsx)(k.a,{data:e,onClick:t.onTopicClick},r)}))})})})}}]),r}(g.a.Component))||R)||R)||R,z=Object(x.withRouter)(_),L=(r("sho3"),r("J0pL")),q=r("QcND");function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var c=b()(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return v()(this,r)}}var B=Object(y.c)("site")(U=Object(y.c)("search")(U=Object(y.d)(U=function(t){d()(r,t);var e=A(r);function r(t){var n;l()(this,r),(n=e.call(this,t)).page=1,n.perPage=20,n.dispatch=function(){var t=i()(o.a.mark((function t(e,r){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.props.search,"refresh"===e?(n.page=1,c.setTopics(null)):"moreData"===e&&(n.page+=1),t.next=4,c.getTopicsList({search:r,perPage:n.perPage,page:n.page});case 4:return t.abrupt("return");case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();var c=n.props,a=(c.serverSearch,c.search);return a.setTopics(null),a.setUsers(null),n}return h()(r,[{key:"componentDidMount",value:function(){var t=i()(o.a.mark((function t(){var e,r,n,c,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props,r=e.search,n=e.router,c=n.query.keyword,a=void 0===c?"":c,!!r.topics,s=!!r.users,this.page=1,t.next=7,r.getTopicsList({search:a,perPage:this.perPage});case 7:s||r.getUsersList({search:a,page:1});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(c.jsx)(L.a,{h5:Object(c.jsx)(P,{dispatch:this.dispatch}),pc:Object(c.jsx)(z,{dispatch:this.dispatch}),title:"\u6f6e\u6d41\u8bdd\u9898"})}}]),r}(g.a.Component))||U)||U)||U;e.default=Object(q.a)(B)},NEve:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("vcV1");function c(t){if(t=""+t){var e=Object(n.a)(t,"break","");return e=Object(n.a)(e,"heading",""),e=Object(n.a)(e,"paragraph",""),e=Object(n.a)(e,"imgButEmoj","[\u56fe\u7247]"),e=Object(n.a)(e,"list",""),"<p>".concat(e,"</p>")}}},lLUp:function(t,e,r){"use strict";var n,c=r("lSNA"),a=r.n(c),o=r("nKUr"),s=r("lwsE"),i=r.n(s),u=r("W8MJ"),l=r.n(u),p=r("7W2i"),h=r.n(p),f=r("a1gu"),d=r.n(f),j=r("Nsbk"),v=r.n(j),O=r("q1tI"),b=r.n(O),m=r("kMSe"),g=(r("HLiX"),r("NEve")),y=r("Q6w4"),x=r("5WlO"),N=r("z6Ap"),w=r("nfwY"),k=r("Qais"),C=r.n(k),D=function(t){var e=t.data,r=t.onClick,n=void 0===r?N.e:r,c=Object(O.useCallback)((function(t){"a"!==t.target.localName&&n&&n(e)}),[e,n]),a=e.threads,s=void 0===a?[]:a,i=Object(O.useMemo)((function(){var t,e,r=(null===(t=s[0])||void 0===t||null===(e=t.content)||void 0===e?void 0:e.text)||"\u6682\u65e0\u5185\u5bb9",n=Object(g.a)(r);return n=y.a.parse(n),n=Object(x.a)(n)}),[s]);return Object(o.jsxs)("div",{className:w.a.container,onClick:c,children:[Object(o.jsx)("div",{className:w.a.title,children:"#".concat(e.content,"#")||!1}),Object(o.jsx)("div",{className:w.a.content,children:Object(o.jsx)(C.a,{onClick:c,className:w.a.richText,content:i})}),Object(o.jsxs)("div",{className:w.a.tags,children:[Object(o.jsxs)("div",{className:w.a.tag,children:["\u70ed\u5ea6 ",e.viewCount||0]}),Object(o.jsx)("span",{className:w.a.dot,children:"\xb7"}),Object(o.jsxs)("div",{className:w.a.tag,children:["\u5185\u5bb9 ",e.threadCount||0]})]})]})},R=b.a.memo(D),S=r("MCNy"),P=r.n(S),T=r("zcsM"),E=function(t){var e,r=t.data,n=t.onClick,c=void 0===n?N.e:n,a=(t.index,t.footer,Object(O.useCallback)((function(t){"a"!==t.target.localName&&c&&c(r)}),[r,c])),s=r.threads,i=void 0===s?[]:s,u=Object(N.c)(null===r||void 0===r||null===(e=r.threads[0])||void 0===e?void 0:e.content),l=u.text,p=void 0===l?"\u6682\u65e0\u5185\u5bb9":l,h=u.imageData,f=void 0===h?[]:h,d=Object(O.useMemo)((function(){var t=Object(g.a)(p);return t=y.a.parse(t),t=Object(x.a)(t)}),[i]);return Object(o.jsxs)("div",{className:T.a.item,onClick:a,children:[Object(o.jsx)("div",{className:T.a.imgBox,children:f.length>0&&f[0].thumbUrl?Object(o.jsx)("img",{className:T.a.img,src:f[0].thumbUrl}):"".concat(r.content[0])}),Object(o.jsxs)("div",{className:T.a.content,children:[Object(o.jsx)("div",{className:T.a.title,children:r.content?"#".concat(r.content,"#"):"\u6682\u65e0\u6807\u9898"}),Object(o.jsxs)("div",{className:T.a.num,children:[Object(o.jsxs)("div",{className:T.a.numItem,children:[Object(o.jsx)(P.a,{name:"EyeOutlined",size:14,color:"#8590A6",className:T.a.numIcon}),r.viewCount]}),Object(o.jsxs)("div",{className:T.a.viewBox,children:[Object(o.jsx)(P.a,{name:"MessageOutlined",size:14,color:"#8590A6",className:T.a.numIcon}),r.threadCount]})]}),p?Object(o.jsx)("div",{className:T.a.richContent,children:Object(o.jsx)(C.a,{onClick:a,className:T.a.richText,content:d})}):Object(o.jsx)("div",{className:T.a.text,children:p||"\u6682\u65e0\u5185\u5bb9"})]})]})},M=b.a.memo(E);function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=v()(t);if(e){var c=v()(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return d()(this,r)}}var _=Object(m.c)("site")(n=Object(m.d)(n=function(t){h()(r,t);var e=U(r);function r(t){return i()(this,r),e.call(this,t)}return l()(r,[{key:"render",value:function(){return"pc"===this.props.site.platform?Object(o.jsx)(M,W({},this.props)):Object(o.jsx)(R,W({},this.props))}}]),r}(b.a.Component))||n)||n;e.a=_}},[["1Yc2",1,0,3,4,9,2]]]);