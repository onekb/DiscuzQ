_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"/uIZ":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("lSNA")),i=r(n("lwsE")),o=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("q1tI")),d=n("GDuN"),f=n("lOmP"),p=n("DUBB");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),t=this.RenderComponent;return l.default.createElement(t,e,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.MenuItemGroupViewAdapter,logicalAdapter:p.MenuItemGroupLogicalAdapter}));t.default=b},"07iq":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("lSNA")),i=r(n("lwsE")),o=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("q1tI")),d=n("GDuN"),f=n("vqe8"),p=n("jJu3");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),t=this.RenderComponent;return l.default.createElement(t,e,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.SubMenuViewAdapter,logicalAdapter:p.SubMenuLogicalAdapter}));t.default=b},"0dKp":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAdapter=void 0;t.WebAdapter={}},"1WgM":function(e,t,n){},"2qu3":function(e,t,n){"use strict";var r=n("lSNA"),a=n("lwsE"),i=n("W8MJ");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.__esModule=!0,t.default=void 0;var l,d=(l=n("q1tI"))&&l.__esModule?l:{default:l},f=n("8L3h"),p=n("jwwS");var v=[],h=[],b=!1;function j(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}function m(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(r){var a=j(e[r]);a.loading?t.loading=!0:(t.loaded[r]=a.loaded,t.error=a.error),n.push(a.promise),a.promise.then((function(e){t.loaded[r]=e})).catch((function(e){t.error=e}))}))}catch(r){t.error=r}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function y(e,t){return d.default.createElement(function(e){return e&&e.__esModule?e.default:e}(e),t)}function O(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:y,webpack:null,modules:null},t),r=null;function a(){if(!r){var t=new g(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!b&&"function"===typeof n.webpack){var i=n.webpack();h.push((function(e){var t,n=s(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return a()}}catch(o){n.e(o)}finally{n.f()}}))}var o=function(e,t){a();var i=d.default.useContext(p.LoadableContext),o=(0,f.useSubscription)(r);return d.default.useImperativeHandle(t,(function(){return{retry:r.retry}}),[]),i&&Array.isArray(n.modules)&&n.modules.forEach((function(e){i(e)})),d.default.useMemo((function(){return o.loading||o.error?d.default.createElement(n.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:r.retry}):o.loaded?n.render(o.loaded,e):null}),[e,o])};return o.preload=function(){return a()},o.displayName="LoadableComponent",d.default.forwardRef(o)}var g=function(){function e(t,n){a(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=c(c({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function x(e){return O(j,e)}function P(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return P(e,t)}))}x.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return O(m,e)},x.preloadAll=function(){return new Promise((function(e,t){P(v).then(e,t)}))},x.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return b=!0,t()};P(h,e).then(n,n)}))},window.__NEXT_PRELOADREADY=x.preloadReady;var w=x;t.default=w},"3V1/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("AZWT").MenuItemWebAdapter}});t.MenuItemLogicalAdapter=r},"5BGO":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("qePV"),n("i6QF"),n("kSko"),n("toAj");var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Number(e);return Number.isNaN(e)&&(t=0),t<1e4?t:(Number.isInteger(e),"".concat((e/1e4).toFixed(1),"W"))}},AZWT:function(e,t,n){},D21D:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("lwsE")),i=r(n("W8MJ")),o=r(n("7W2i")),c=r(n("a1gu")),s=r(n("Nsbk")),u=r(n("q1tI")),l=n("GDuN"),d=n("GMJm"),f=n("QGRJ");function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,o.default)(n,e);var t=p(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return u.default.createElement(e,this.props,this.props.children)}}]),n}((0,l.baseComponentFactory)({viewAdapter:d.ViewAdapter,logicalAdapter:f.LogicalAdapter}));t.default=v},DUBB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemGroupLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("R8S9").MenuItemGroupWebAdapter}});t.MenuItemGroupLogicalAdapter=r},GMJm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("iJNd").CardWebLayout}});t.ViewAdapter=r},H0SL:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("cMU6")}])},JqVm:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("lSNA")),i=r(n("lwsE")),o=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("q1tI")),d=n("GDuN"),f=n("P6kF"),p=n("3V1/");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),t=this.RenderComponent;return l.default.createElement(t,e,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.MenuItemViewAdapter,logicalAdapter:p.MenuItemLogicalAdapter}));t.default=b},L85e:function(e,t,n){"use strict";var r,a=n("nKUr"),i=n("o0o1"),o=n.n(i),c=(n("ls82"),n("yXPU")),s=n.n(c),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),f=n.n(d),p=n("7W2i"),v=n.n(p),h=n("a1gu"),b=n.n(h),j=n("Nsbk"),m=n.n(j),y=n("q1tI"),O=n.n(y),g=n("kMSe"),x=n("20a2"),P=n("VWce"),w=n("M2Pz"),N=n("5f2u"),S=n.n(N),I=n("wdT/"),k=n.n(I),M=n("sho3"),C=n("dJ22"),A=n("+3IH"),R=n("/Nde");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var T=!1,E=Object(g.c)("site")(r=Object(g.c)("user")(r=Object(g.c)("h5QrCode")(r=Object(g.c)("commonLogin")(r=Object(g.c)("invite")(r=Object(g.d)(r=function(e){v()(n,e);var t=_(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).authorization=s()(o.a.mark((function e(){var t,n,a,i,c,s,u,l,d,f,p,v,h,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.router,a=t.invite,i=n.query,c=i.code,s=i.sessionId,u=i.sessionToken,l=i.state,d=i.type,e.prev=2,!T){e.next=5;break}return e.abrupt("return");case 5:return T=!0,e.next=8,Object(M.h5WechatCodeLogin)({timeout:1e4,params:{code:c,sessionId:s,sessionToken:u,state:l,inviteCode:a.getInviteCode(n)}});case 8:if(f=e.sent,T=!1,-7016!==f.code){e.next=14;break}return p=f.data,v=p.sessionToken,h=p.nickname,n.push({pathname:"wx-select",query:{sessionToken:v,nickname:h}}),e.abrupt("return");case 14:if(0!==f.code||"h5"!==d){e.next=21;break}return b=Object(A.a)(f,"data.accessToken"),j=Object(A.a)(f,"data.uid"),Object(C.a)({accessToken:b}),r.props.user.updateUserInfo(j),window.location.href="/",e.abrupt("return");case 21:if(0!==f.code){e.next=25;break}return r.setState({loginTitle:"\u5df2\u6210\u529f\u767b\u5f55"}),r.props.h5QrCode.isBtn=!1,e.abrupt("return");case 25:throw Object(R.d)(f),{Code:f.code,Message:f.msg};case 29:throw e.prev=29,e.t0=e.catch(2),T=!1,r.setState({loginTitle:"\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u4e8c\u7ef4\u7801\u91cd\u65b0\u626b\u7801"}),r.props.h5QrCode.isBtn=!1,k.a.error({content:e.t0.Message}),{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 36:case"end":return e.stop()}}),e,null,[[2,29]])}))),r.state={loginTitle:"\u4f60\u786e\u5b9a\u8981\u6388\u6743\u767b\u5f55".concat(e.site.siteName,"\u5417\uff1f")},r}return f()(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:P.a.container,children:[Object(a.jsx)(w.a,{hideInfo:!0,mode:"login"}),Object(a.jsxs)("div",{className:P.a.content,children:[Object(a.jsx)("div",{className:P.a.title,children:this.state.loginTitle}),this.props.h5QrCode.isBtn?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(S.a,{className:P.a.button,type:"primary",onClick:this.authorization,children:"\u786e\u5b9a"})}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(S.a,{className:P.a.exit,onClick:function(){e.setState({loginTitle:"\u5df2\u53d6\u6d88\u767b\u5f55"}),e.props.h5QrCode.isBtn=!1,window.wx&&window.wx.ready((function(){wx.closeWindow()}))},children:"\u9000\u51fa"})]})]})}}]),n}(O.a.Component))||r)||r)||r)||r)||r)||r;t.a=Object(x.withRouter)(E)},M2Pz:function(e,t,n){"use strict";n("ma9I"),n("4l63"),n("rB9j"),n("hByQ"),n("EnZy");var r,a=n("nKUr"),i=n("lSNA"),o=n.n(i),c=n("J4zp"),s=n.n(c),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),f=n.n(d),p=n("7W2i"),v=n.n(p),h=n("a1gu"),b=n.n(h),j=n("Nsbk"),m=n.n(j),y=n("q1tI"),O=n.n(y),g=n("vqvd"),x=n("MCNy"),P=n.n(x),w=n("wdT/"),N=n.n(w),S=n("kMSe"),I=n("B5JU"),k=n.n(I),M=n("kjBj"),C=n("RiVy"),A=n("+3IH"),R=n("rOX+"),_=n.n(R),T=n("IvHc"),E=n("5BGO"),D=n("lN2P"),L=n("FeKq");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var B=Object(S.c)("site")(r=Object(S.c)("user")(r=Object(S.c)("index")(r=Object(S.d)(r=function(e){v()(n,e);var t=V(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={visible:!1,height:180,loadWeiXin:!1,show:!1},e.domRef=O.a.createRef(null),e.logoImg="/dzq-img/admin-logo-x2.png",e.onClose=function(){e.setState({visible:!1})},e.onCancel=function(){e.setState({show:!1})},e.handleH5Share=function(){var t,n=(null===(t=document)||void 0===t?void 0:t.title)||"";_()({title:n,path:"/".concat(location.search)}),N.a.info({content:"\u590d\u5236\u94fe\u63a5\u6210\u529f"}),e.onCancel()},e.handleWxShare=function(){e.setState({visible:!0}),e.onCancel()},e.handleClick=function(){e.props.user.isLogin()?e.setState({show:!0}):Object(T.a)({url:"/user/login"})},e.createCard=function(){k.a.push({url:"/card"})},e}return f()(n,[{key:"getBgHeaderStyle",value:function(e){var t,n=this.props.site.webConfig||{};return null!==(t=n.setSite)&&void 0!==t&&t.siteBackgroundImage?{backgroundImage:"url(".concat(n.setSite.siteBackgroundImage,")")}:e?{background:e}:{background:"#2469f6"}}},{key:"getLogo",value:function(){var e,t=this.props.site.webConfig||{};return null!==(e=t.setSite)&&void 0!==e&&e.siteHeaderLogo?t.setSite.siteHeaderLogo:this.logoImg}},{key:"getSiteInfo",value:function(){var e=this.props.site.webConfig,t={countUsers:0,countThreads:0,siteAuthor:"",createDays:0};e&&e.other&&(t.countUsers=e.other.countUsers,t.countThreads=e.other.countThreads);var n=Object(A.a)(e,"setSite.siteAuthor.username",""),r=Object(A.a)(e,"setSite.siteInstall","").split(" "),a=s()(r,1)[0],i=Date.parse(a),o=Date.parse(new Date),c=Object(E.a)(parseInt(Math.abs(i-o)/1e3/60/60/24,10));return t.siteAuthor=n,t.createDays=c,t}},{key:"componentDidMount",value:function(){this.setState({loadWeiXin:Object(C.a)()}),this.domRef.current&&this.setState({height:this.domRef.current.clientHeight})}},{key:"render",value:function(){var e=this.props,t=e.bgColor,n=e.hideInfo,r=void 0!==n&&n,i=e.style,o=void 0===i?{}:i,c=e.digest,s=void 0===c?null:c,u=e.mode,l=void 0===u?"":u,d=e.site,f=this.state,p=f.visible,v=f.loadWeiXin,h=this.getSiteInfo(),b=h.countUsers,j=h.countThreads,m=h.siteAuthor,y=h.createDays,O=Object(A.a)(d,"webConfig.setSite.siteHeaderLogo","");return Object(a.jsxs)("div",{ref:this.domRef,className:"".concat(g.a.container," ").concat(l?g.a["container_mode_".concat(l)]:""),style:W(W({},o),this.getBgHeaderStyle(t)),children:[r&&"join"!==l&&Object(a.jsxs)("div",{className:g.a.topBar,children:["login"===l?Object(a.jsxs)("div",{onClick:function(){return k.a.back()},className:g.a.left,children:[Object(a.jsx)(P.a,{name:"LeftOutlined"}),"\u8fd4\u56de"]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)("div",{children:Object(a.jsx)(P.a,{onClick:function(){return D.a.gotoIndex()},name:"HomeOutlined",color:"#fff",size:20})})]}),"join"!==l||O?Object(a.jsx)("div",{className:g.a.logoBox,children:Object(a.jsx)("img",{className:g.a.logo,mode:"aspectFit",src:this.getLogo()})}):Object(a.jsx)("div",{className:g.a.joinLog,children:Object(a.jsx)("img",{className:g.a.logo,mode:"aspectFit",src:"/dzq-img/join-banner-bg.png"})}),s&&Object(a.jsxs)("div",{className:g.a.digest,children:[Object(a.jsxs)("div",{className:g.a.left,children:["\u7ad9\u957f ",s.admin]}),Object(a.jsxs)("div",{className:g.a.right,children:["\u5df2\u521b\u5efa ",s.day,"\u5929"]})]}),!r&&Object(a.jsxs)("ul",{className:g.a.siteInfo,children:[Object(a.jsxs)("li",{className:g.a.item,children:[Object(a.jsx)("span",{className:g.a.text,children:"\u6210\u5458"}),Object(a.jsx)("span",{className:g.a.content,children:b})]}),Object(a.jsxs)("li",{className:g.a.item,children:[Object(a.jsx)("span",{className:g.a.text,children:"\u5185\u5bb9"}),Object(a.jsx)("span",{className:g.a.content,children:j})]}),Object(a.jsxs)("li",{className:g.a.item,onClick:this.handleClick,children:[Object(a.jsx)(P.a,{className:g.a.shareIcon,color:"#fff",name:"ShareAltOutlined"}),Object(a.jsx)("span",{className:g.a.shareText,children:"\u5206\u4eab"})]})]}),Object(a.jsx)(L.a,{show:this.state.show,onClose:this.onCancel,handleH5Share:this.handleH5Share,handleWxShare:this.handleWxShare,createCard:this.createCard}),"join"===l&&Object(a.jsxs)("ul",{className:"".concat(g.a.siteInfo," ").concat(g.a.joinInfo),children:[Object(a.jsxs)("li",{className:g.a.item,children:[Object(a.jsx)("span",{className:g.a.text,children:"\u7ad9\u957f"}),Object(a.jsx)("span",{className:g.a.content,children:m})]}),Object(a.jsxs)("li",{className:g.a.item,children:[Object(a.jsx)("span",{className:g.a.text,children:"\u5df2\u521b\u5efa"}),Object(a.jsxs)("span",{className:g.a.content,children:[y,"\u5929"]})]})]}),v&&Object(a.jsx)(M.a,{visible:p,onClose:this.onClose})]})}}]),n}(O.a.Component))||r)||r)||r)||r;t.a=B},P6kF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("WbHY").MenuItemWebLayout}});t.MenuItemViewAdapter=r},PYyG:function(e,t,n){},QGRJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("0dKp").WebAdapter}});t.LogicalAdapter=r},QTJ1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("1WgM").MenuWebAdapter}});t.MenuLogicalAdapter=r},R8S9:function(e,t,n){},Unay:function(e,t,n){"use strict";var r=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemGroupWebLayout=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("lSNA")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),f=n("VTYn"),p=r(n("TSYQ"));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.title,a=this.context.clsPrefix,i="".concat(a,"-menu-item-group"),o="".concat(a,"-menu"),c=(0,p.default)(i,n);return d.default.createElement("div",{style:t,className:c},d.default.createElement("div",{className:"".concat(i,"__title")},r),d.default.createElement("ul",{className:o},this.props.children))}}]),n}(d.Component);t.MenuItemGroupWebLayout=b,(0,l.default)(b,"contextType",f.ConfigContext)},Vvt1:function(e,t,n){e.exports=n("a6RD")},WbHY:function(e,t,n){"use strict";var r=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemWebLayout=function(e){var t=e.style,n=e.className,r=e.index,a=e.disabled,u=e.divided,l=e.onClick,d=(0,i.useContext)(c.MenuContext),f=d.currentActiveItemIndex,p=d.setCurrentActiveItemIndex,v=d.setCurrentActiveSubMenuIndex,h=d.multiple,b=d.currentActiveItemIndexSet,j=d.setCurrentActiveItemIndexSet,m=d.currentActiveSubMenuIndexSet,y=d.setCurrentActiveSubMenuIndexSet,O=(0,i.useContext)(c.SubMenuContext).subMenuIndex,g=(0,i.useContext)(o.ConfigContext).clsPrefix,x="".concat(g,"-menu-item"),P=(0,s.default)(x,n,{"is-disabled":a,"is-active":h?b.has(r):f===r,"is-divided":u});return i.default.createElement("li",{style:t,className:P,onClick:function(e){a||(e.nativeEvent.stopImmediatePropagation(),h?(b.has(r)?b.delete(r):(b.add(r),m.add(O),y(m)),j(b)):(p(r),v(O)),"function"===typeof l&&l(r,O,b))}},e.children)};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=n("VTYn"),c=n("Z36A"),s=r(n("TSYQ"));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}},WtUC:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("lwsE")),i=r(n("W8MJ")),o=r(n("7W2i")),c=r(n("a1gu")),s=r(n("Nsbk")),u=r(n("lSNA")),l=r(n("q1tI")),d=n("GDuN"),f=n("agnc"),p=n("QTJ1"),v=r(n("JqVm")),h=r(n("/uIZ")),b=r(n("07iq"));function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,o.default)(n,e);var t=m(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),t=this.RenderComponent;return l.default.createElement(t,e,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.MenuViewAdapter,logicalAdapter:p.MenuLogicalAdapter}));t.default=y,(0,u.default)(y,"Item",v.default),(0,u.default)(y,"ItemGroup",h.default),(0,u.default)(y,"SubMenu",b.default)},"X+na":function(e,t,n){"use strict";var r=n("TqRt"),a=n("cDf5");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuWebLayout=function(e){var t=e.style,n=e.className,r=e.title,a=e.index,f=e.onClick,p=(0,c.useContext)(u.MenuContext),v=p.uniqueOpened,h=p.mode,b=p.menuTrigger,j=p.hoverSubMenuIndex,m=p.setHoverSubMenuIndex,y=p.currentActiveSubMenuIndex,O=p.setCurrentActiveItemIndex,g=p.setCurrentActiveSubMenuIndex,x=p.multiple,P=p.currentActiveSubMenuIndexSet,w=p.setCurrentActiveSubMenuIndexSet,N=p.defaultOpeneds,S=(0,c.useContext)(s.ConfigContext).clsPrefix,I="".concat(S,"-submenu"),k="".concat(S,"-menu"),M=!1;N&&N.length&&(M=N.some((function(e){return e===a})));var C=(0,c.useState)(a===y||M),A=(0,o.default)(C,2),R=A[0],_=A[1],T=(0,l.default)(I,n,{"is-open":R}),E=x?P.has(a):a===y,D=(0,l.default)("".concat(I,"__title"),{"is-active":E});("horizontal"===h||v)&&(0,c.useEffect)((function(){_(a===y)}),[y]);var L=R?c.default.createElement("ul",{className:k},c.default.createElement(u.SubMenuContext.Provider,{value:{subMenuIndex:a}},e.children)):"",q={};if("horizontal"===h&&"hover"===b){L=a===j?c.default.createElement("ul",{className:k},c.default.createElement(u.SubMenuContext.Provider,{value:{subMenuIndex:a}},e.children)):"";q={onMouseEnter:function(e){return m(a),void _(!0)},onMouseLeave:function(e){return m(u.INITIAL_VALUE),void _(!1)}}}var W=function(e){e.nativeEvent.stopImmediatePropagation(),x?(P.has(a)?P.delete(a):P.add(a),w(P),_(!R)):(g(a),O(u.INITIAL_VALUE),_(!R)),"function"===typeof f&&f(a,!R,P)};return c.default.createElement("li",(0,i.default)({style:t,className:T},q),c.default.createElement("div",{className:D,onClick:function(e){return W(e)}},"horizontal"!==h&&c.default.createElement(d.default,{className:"".concat(I,"__icon"),name:"RightOutlined",size:12}),r,"horizontal"===h&&c.default.createElement(d.default,{className:"".concat(I,"__icon ").concat(I,"__icon--horizontal"),name:"RightOutlined",size:12})),L)};var i=r(n("pVnL")),o=r(n("J4zp")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),s=n("VTYn"),u=n("Z36A"),l=r(n("TSYQ")),d=r(n("MCNy"));function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},Xol8:function(e,t,n){var r=n("hh1v"),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},Z36A:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuContext=t.MenuContext=t.INITIAL_VALUE=void 0;var r=n("q1tI"),a="-1";t.INITIAL_VALUE=a;var i=(0,r.createContext)({hoverSubMenuIndex:a,setHoverSubMenuIndex:function(){},currentActiveSubMenuIndex:a,setCurrentActiveSubMenuIndex:function(){},currentActiveItemIndex:a,setCurrentActiveItemIndex:function(){},uniqueOpened:!1,mode:"vertical",menuTrigger:"click",multiple:!1,currentActiveItemIndexSet:new Set,setCurrentActiveItemIndexSet:function(){},currentActiveSubMenuIndexSet:new Set,setCurrentActiveSubMenuIndexSet:function(){},defaultOpeneds:[]});t.MenuContext=i;var o=(0,r.createContext)({subMenuIndex:a});t.SubMenuContext=o},a6RD:function(e,t,n){"use strict";var r=n("lSNA");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.__esModule=!0,t.noSSR=s,t.default=function(e,t){var n=o.default,r={loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};e instanceof Promise?r.loader=function(){return e}:"function"===typeof e?r.loader=e:"object"===typeof e&&(r=i(i({},r),e));if(r=i(i({},r),t),"object"===typeof e&&!(e instanceof Promise)&&(e.render&&(r.render=function(t,n){return e.render(n,t)}),e.modules)){n=o.default.Map;var a={},c=e.modules();Object.keys(c).forEach((function(e){var t=c[e];"function"!==typeof t.then?a[e]=t:a[e]=function(){return t.then((function(e){return e.default||e}))}})),r.loader=a}r.loadableGenerated&&delete(r=i(i({},r),r.loadableGenerated)).loadableGenerated;if("boolean"===typeof r.ssr){if(!r.ssr)return delete r.ssr,s(n,r);delete r.ssr}return n(r)};c(n("q1tI"));var o=c(n("2qu3"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return delete t.webpack,delete t.modules,e(t)}},agnc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("guqU").MenuWebLayout}});t.MenuViewAdapter=r},cMU6:function(e,t,n){"use strict";n.r(t);n("ma9I"),n("TeQF"),n("yXV3"),n("oVuX"),n("2B1R"),n("ToJy"),n("qePV"),n("07d7"),n("5s+n"),n("rB9j"),n("UxlC"),n("EnZy");var r=n("nKUr"),a=n("o0o1"),i=n.n(a),o=(n("ls82"),n("yXPU")),c=n.n(o),s=n("lSNA"),u=n.n(s),l=n("lwsE"),d=n.n(l),f=n("W8MJ"),p=n.n(f),v=n("7W2i"),h=n.n(v),b=n("a1gu"),j=n.n(b),m=n("Nsbk"),y=n.n(m),O=n("q1tI"),g=n.n(O),x=n("kMSe"),P=(n("sMBO"),n("x83w"),n("PJYZ")),w=n.n(P),N=n("MCNy"),S=n.n(N),I=n("zkTq"),k=n.n(I),M=n("M2Pz"),C=n("Cccs"),A=n("y4MR"),R=(n("QWBl"),n("FZtP"),n("5f2u")),_=n.n(R),T=n("k8W2"),E=n.n(T),D=n("lCl7"),L=n.n(D),q=n("z6Ap"),W=[{title:"\u7248\u5757",type:1,data:[]},{title:"\u7c7b\u578b",type:2,data:[{name:"\u5168\u90e8",pid:"all"},{name:"\u89c6\u9891",pid:"103"},{name:"\u56fe\u7247",pid:"101"},{name:"\u8bed\u97f3",pid:"102"},{name:"\u5546\u54c1",pid:"104"},{name:"\u7ea2\u5305",pid:"106"},{name:"\u60ac\u8d4f\u95ee\u7b54",pid:"107"},{name:"\u6587\u4ef6\u9644\u4ef6",pid:"108"}]},{title:"\u7b5b\u9009",type:3,data:[{name:"\u5168\u90e8",pid:"0"},{name:"\u7cbe\u534e",pid:"1"}]}],V=n("20a2"),B=n("KBrO"),F=L.a.Col,U=L.a.Row,H=function(e){var t=e.visible,n=e.data,a=void 0===n?[]:n,i=e.current,o=e.onSubmit,c=void 0===o?q.e:o,s=e.onCancel,u=void 0===s?q.e:s,l=e.router,d=Object(O.useState)("all"),f=d[0],p=d[1],v=Object(O.useState)(),h=v[0],b=v[1],j=Object(O.useState)(""),m=j[0],y=j[1],g=Object(O.useState)("0"),x=g[0],P=g[1],w=Object(O.useState)([]),N=w[0],I=w[1],k=Object(O.useMemo)((function(){var e=W;return e[0].data=a,e}),[a]);Object(O.useEffect)((function(){var e=i||{},t=e.categoryids,n=void 0===t?[]:t,r=e.types,a=void 0===r?"all":r,o=e.essence;M(n),y(a||"all"),P(o||"0")}),[i,t]);var M=function(e){if(null!==e&&void 0!==e&&e.length){var t=e[0],n=1===e.length&&("all"===e[0]||"default"===e[0]);if(e.length>1||n)p(t),C(t,a);else((null===a||void 0===a?void 0:a.filter((function(e){return e.pid===t})))||[]).length?(p(t),C(t,a)):(b(t),null===a||void 0===a||a.filter((function(e){var t;return null===(t=e.children)||void 0===t?void 0:t.length})).forEach((function(e){e.children.forEach((function(n){n.pid===t&&(p(e.pid),C(e.pid,a))}))})))}else p("all")},C=function(e,t){var n=null===t||void 0===t?void 0:t.filter((function(t){return t.pid===e}));n.length?I(n[0].children||[]):I([])},A=function(){l.push("/search")},R=function(){u()},T=function(e,t){var n=e.type,a=e.data,i=e.title,o=f;return 1===t?o=m:2===t&&(o=x),a?Object(r.jsxs)("div",{className:B.a.moduleWrapper,children:[Object(r.jsxs)("div",{className:B.a.title,children:[Object(r.jsx)("span",{children:i}),0===t&&Object(r.jsx)(S.a,{className:B.a.searchIcon,name:"SearchOutlined",size:20,onClick:A})]}),Object(r.jsx)(U,{className:B.a.wrapper,gutter:10,children:a.map((function(e,t){return Object(r.jsx)(F,{span:e.name.length<6?3:6===e.name.length?4:5,children:Object(r.jsx)("span",{className:"".concat(o===e.pid?B.a.active:""," ").concat(B.a.span),onClick:function(){return function(e,t,n){1===t?(p(e),b(""),C(e,n)):2===t?y(e):P(e)}(e.pid,n,a)},children:e.name.length>6?e.name.substr(0,6):e.name})},t)}))}),1===n&&N.length?Object(r.jsx)(U,{className:"".concat(B.a.wrapper," ").concat(B.a.childrenWrapper),gutter:10,children:N.map((function(e,t){return Object(r.jsx)(F,{span:e.name.length<6?3:6===e.name.length?4:5,children:Object(r.jsx)("span",{className:"".concat(h===e.pid?B.a.childrenActive:""," ").concat(B.a.childrenSpan),onClick:function(){return function(e,t){1===t&&b(e)}(e.pid,n)},children:e.name.length>6?e.name.substr(0,6):e.name})},"".concat(t,"-").concat(t))}))}):null]},t):null};return Object(r.jsx)(E.a,{position:"bottom",visible:t,onClose:R,children:Object(r.jsxs)("div",{className:B.a.container,children:[Object(r.jsx)("div",{className:B.a.content,children:Object(r.jsx)("div",{className:B.a.list,children:k&&k.map((function(e,t){return T(e,t)}))})}),Object(r.jsxs)("div",{className:B.a.footer,children:[Object(r.jsx)(_.a,{className:B.a.button,onClick:function(){var e=0;"default"===f&&(e=1);var t=[f];if(h)t=[h];else{var n,r,a,i,o,s,u=null===(n=k[0])||void 0===n||null===(r=n.data)||void 0===r?void 0:r.filter((function(e){return e.pid===f}));if(u.length&&null!==(a=u[0])&&void 0!==a&&null!==(i=a.children)&&void 0!==i&&i.length)t=[f],null===(o=u[0])||void 0===o||null===(s=o.children)||void 0===s||s.forEach((function(e){t.push(e.pid)}))}c({categoryids:t,types:m,essence:x,sequence:e})},type:"primary",children:"\u7b5b\u9009"}),Object(r.jsx)("div",{className:B.a.footerBtn,onClick:R,children:Object(r.jsx)("span",{className:B.a.footerBtnText,children:"\u53d6\u6d88"})})]})]})})},J=Object(V.withRouter)(g.a.memo(H)),G=n("INMq"),z=n("iehV"),Q=(n("L85e"),n("TSYQ")),Y=n.n(Q),K=n("Vvt1"),X=n.n(K),Z=n("jqTq"),$=n.n(Z),ee=n("wY5V");function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e){var t=e.data,n=e.loadComponent,a=void 0===n?null:n,i=e.style,o=void 0===i?{}:i;return Object(r.jsx)("div",{style:ne({},o),className:ee.a.loadingBox,children:t.error?Object(r.jsx)("p",{className:ee.a.text,children:"\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5"}):a||Object(r.jsx)($.a,{color:"#c5c6cb",type:"spinner"})})}var ae,ie=n("TibX"),oe=(n("B6y2"),function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,e),this.addVideoEventListeneres=function(e){if(e.element){var t=function(){e.isRecorded=!0};e.element.addEventListener("volumechange",(function(){e.element.muted||t()})),e.element.addEventListener("seeked",(function(){e.isFirst?e.isFirst=!1:t()}))}},this.checkVideoPlay=function(e,n){var r=t.getPlayingVideo();if(!(null===r||void 0===r?void 0:r.element))for(var a=e;a<=n;){var i=t.getVideo(a),o=document.querySelector('div[data-index="'.concat(a,'"] #common-video-play video'));if(o&&o.play){var c=o.getBoundingClientRect(),s=c.top,u=c.bottom;if(s>t.topInstance&&u<window.innerHeight-t.bottomInstance)return o.muted=!0,o.currentTime=(null===i||void 0===i?void 0:i.currentTime)||0,o.play(),void t.addVideo(a,o)}a+=1}},this.checkVideoPlause=function(){var e=t.getPlayingVideo(),n=null===e||void 0===e?void 0:e.element;if(n){var r=n.getBoundingClientRect(),a=r.top,i=r.bottom;if(a<=t.topInstance||i>=window.innerHeight-t.bottomInstance){if(n.pause(),e.status="pause",e.isRecorded)return e.currentTime=n.currentTime,void(e.element=null);t.deleteVideo(e.key)}}},this.videoMap={},this.platform=n.platform||"pc",this.topInstance="pc"===this.platform?135:52,this.bottomInstance="pc"===this.platform?0:65}return p()(e,[{key:"addVideo",value:function(e,t){var n,r,a={key:e,element:t,isRecorded:(null===(n=this.videoMap[e])||void 0===n?void 0:n.isRecorded)||!1,currentTime:(null===(r=this.videoMap[e])||void 0===r?void 0:r.currentTime)||0,status:"play",isFirst:!0};this.videoMap[e]=a,this.addVideoEventListeneres(this.videoMap[e])}},{key:"deleteVideo",value:function(e){this.videoMap[e]=null}},{key:"getVideo",value:function(e){return this.videoMap[e]}},{key:"getPlayingVideo",value:function(){var e;return Object.values(this.videoMap).forEach((function(t){"play"===(null===t||void 0===t?void 0:t.status)&&(e=t)})),e}}]),e}());function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j()(this,n)}}var le=Object(x.c)("site")(ae=Object(x.c)("user")(ae=Object(x.c)("index")(ae=Object(x.c)("baselayout")(ae=Object(x.d)(ae=function(e){h()(a,e);var t=ue(a);function a(e){var i,o,c,s;return d()(this,a),(s=t.call(this,e)).DynamicVListLoading=X()((function(){return Promise.all([n.e(0),n.e(5),n.e(6),n.e(2),n.e(88)]).then(n.bind(null,"5qfE"))}),{loading:function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(M.a,{ref:s.headerRef}),Object(r.jsx)(re,{data:e,style:{padding:"0 0 20px"},loadComponent:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsxs)("div",{className:C.a.placeholder,children:[Object(r.jsxs)("div",{className:C.a.header,children:[Object(r.jsx)("div",{className:C.a.avatar}),Object(r.jsx)("div",{className:C.a.box})]}),Object(r.jsx)("div",{className:C.a.content}),Object(r.jsx)("div",{className:C.a.content}),Object(r.jsxs)("div",{className:C.a.footer,children:[Object(r.jsx)("div",{className:C.a.box}),Object(r.jsx)("div",{className:C.a.box}),Object(r.jsx)("div",{className:C.a.box})]})]}),Object(r.jsxs)("div",{className:C.a.placeholder,children:[Object(r.jsxs)("div",{className:C.a.header,children:[Object(r.jsx)("div",{className:C.a.avatar}),Object(r.jsx)("div",{className:C.a.box})]}),Object(r.jsx)("div",{className:C.a.content}),Object(r.jsx)("div",{className:C.a.content}),Object(r.jsxs)("div",{className:C.a.footer,children:[Object(r.jsx)("div",{className:C.a.box}),Object(r.jsx)("div",{className:C.a.box}),Object(r.jsx)("div",{className:C.a.box})]})]})]})})]})},loadableGenerated:{webpack:function(){return["5qfE"]},modules:["./components/dynamic-vlist"]}}),s.searchClick=function(){s.setState({visible:!0})},s.onClose=function(){s.setState({visible:!1})},s.onClickTabBar=function(e,t){0===t&&s.changeFilter()},s.onClickTab=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s.changeFilter({categoryids:[e],sequence:"default"===e?1:0})},s.changeFilter=function(e){var t=s.props,n=t.index,r=t.dispatch,a=void 0===r?function(){}:r;if(e){var i=e.categoryids,o=n.categories||[],c=i[0],u=Object(z.d)(o,c),l=se(se(se({},n.filter),e),{},{categoryids:u});n.setFilter(l)}a("click-filter"),s.setState({visible:!1})},s.onRefresh=function(){var e,t,n,r=s.props.dispatch,a=void 0===r?function(){}:r;if(null!==(e=s.props.index)&&void 0!==e&&null!==(t=e.threads)&&void 0!==t&&null!==(n=t.pageData)&&void 0!==n&&n.length)return a("moreData")},s.checkVideoPlay=Object(ie.a)((function(e,t){var n;null===(n=s.autoplay)||void 0===n||n.checkVideoPlay(e,t)}),1e3),s.checkVideoPlause=Object(ie.b)((function(){var e;null===(e=s.autoplay)||void 0===e||e.checkVideoPlause()}),50),s.handleScroll=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.scrollTop,r=void 0===n?0:n,a=t.startNum,i=t.stopNum,o=(null===(e=s.headerRef.current)||void 0===e?void 0:e.state)||{},c=o.height,u=void 0===c?180:c,l=s.state.fixedTab;s.checkVideoPlause(),s.checkVideoPlay(a,i),!l&&r>=u?s.setState({fixedTab:!0}):l&&r<u&&s.setState({fixedTab:!1})},s.renderTabs=function(){var e=s.state.fixedTab,t=s.props.index,n=t.categories,a=void 0===n?[]:n,i=t.activeCategoryId,o=t.currentCategories;return Object(r.jsx)(r.Fragment,{children:(null===a||void 0===a?void 0:a.length)>0&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{ref:s.listRef,className:"".concat(C.a.homeContent," ").concat(!s.enableVlist&&e&&C.a.fixed),children:Object(r.jsx)(k.a,{className:C.a.tabsBox,scrollable:!0,type:"primary",onActive:s.onClickTab,activeId:i,tabBarExtraContent:Object(r.jsx)("div",{onClick:s.searchClick,className:C.a.tabIcon,children:Object(r.jsx)(S.a,{name:"SecondaryMenuOutlined",className:C.a.buttonIcon,size:16})}),children:null===o||void 0===o?void 0:o.map((function(e,t){return Object(r.jsx)(k.a.TabPanel,{id:e.pid,label:e.name},t)}))})}),!s.enableVlist&&e&&Object(r.jsx)("div",{className:C.a.tabPlaceholder})]})})},s.renderHeaderContent=function(){var e=(s.props.index||{}).sticks,t=void 0===e?[]:e;return Object(r.jsx)(r.Fragment,{children:(null===t||void 0===t?void 0:t.length)>0&&Object(r.jsx)("div",{className:C.a.homeContentTop,children:Object(r.jsx)(A.a,{data:t,itemMargin:"1"})})})},s.state={visible:!1,isFinished:!0,fixedTab:!1},s.listRef=Object(O.createRef)(),s.headerRef=Object(O.createRef)(null),s.enableVlist=!0,s.handleScroll=s.handleScroll.bind(w()(s)),s.onRefresh=s.onRefresh.bind(w()(s)),((null===(i=s.props.site)||void 0===i||null===(o=i.webConfig)||void 0===o||null===(c=o.qcloud)||void 0===c?void 0:c.qcloudVodAutoPlay)||!1)&&(s.autoplay=new oe({platform:"h5"})),s}return p()(a,[{key:"componentDidMount",value:function(){var e=this.props.site.checkSiteIsOpenDefautlThreadListData();this.props.index.setNeedDefault(e)}},{key:"render",value:function(){var e=this,t=this.props.index,n=this.state.isFinished,a=t.threads,i=void 0===a?{}:a,o=t.currentCategories,c=t.filter,s=t.threadError,u=t.sticks,l=i||{},d=l.currentPage,f=l.totalPage,p=l.pageData;return Object(r.jsxs)(G.a,{showHeader:!1,showTabBar:!0,onRefresh:this.onRefresh,noMore:d>=f,isFinished:n,onScroll:this.handleScroll,quickScroll:!0,curr:"home",pageName:"home",requestError:s.isError,errorText:s.errorText,onClickTabBar:this.onClickTabBar,disabledList:this.enableVlist,children:[Object(r.jsxs)(O.Fragment,{children:[Object(r.jsx)("div",{className:Y()(C.a.vTabs,"text",this.state.fixedTab&&C.a.vFixed),children:this.renderTabs()}),Object(r.jsxs)(this.DynamicVListLoading,{pageData:p,sticks:u,onScroll:this.handleScroll,loadNextPage:this.onRefresh,noMore:d>=f,requestError:s.isError,errorText:s.errorText,platform:"h5",children:[Object(r.jsx)(M.a,{ref:this.headerRef}),Object(r.jsx)(x.a,{children:function(){return e.renderTabs()}}),Object(r.jsx)(x.a,{children:function(){return e.renderHeaderContent()}})]})]}),Object(r.jsx)(J,{data:o,current:c,onCancel:this.onClose,visible:this.state.visible,onSubmit:this.changeFilter})]})}}]),a}(g.a.Component))||ae)||ae)||ae)||ae)||ae,de=(n("R5XZ"),n("q5CV")),fe=n("WtUC"),pe=n.n(fe),ve=n("D21D"),he=n.n(ve),be=n("np9d"),je=n("n4oF"),me=n("ni5c"),ye=function(e){var t=e.categories,n=void 0===t?[]:t,a=e.totalThreads,i=void 0===a?0:a,o=e.onNavigationClick,c=void 0===o?q.e:o,s=e.defaultFisrtIndex,u=void 0===s?"all":s,l=e.defaultSecondIndex,d=void 0===l?"all":l,f=e.isError,p=void 0!==f&&f,v=e.errorText,h=Object(O.useState)(u),b=h[0],j=h[1],m=Object(O.useState)(d),y=m[0],g=m[1];Object(O.useEffect)((function(){j(u),g(d)}),[u,d]);var x=function(e,t){var n=e.split("/");1!==n.length?(j(n[0]),g(n[1]),n="all"===n[1]?[n[0]]:[n[1]]):(j(n[0]),g("all")),c({categoryIds:n})},P=function(){if(!Object(je.a)())return{innerHeight:Object(je.a)()?null:window.innerHeight,innerWidth:Object(je.a)()?null:window.innerWidth}},w=Object(O.useState)(P()),N=w[0],S=w[1],I=function(e,t){var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(e,t)}}((function(){S(P())}),50);Object(O.useEffect)((function(){return Object(je.a)()||window.addEventListener("resize",I),function(){window.removeEventListener("resize",I)}}));var k=function(e){var t=e.name,n=e.threadCount;return Object(r.jsxs)("div",{className:be.a.subMenuBox,children:[Object(r.jsx)("span",{className:be.a.ellipsis,children:t}),Object(r.jsx)("span",{className:be.a.span,children:"\u5168\u90e8"===t?i:n})]})},M=function(e){var t=e.name,n=e.threadCount;return Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{className:be.a.ellipsis,children:t}),Object(r.jsx)("span",{className:be.a.subSpan,children:n})]})},C=function(){return Object(r.jsx)(pe.a,{defaultOpeneds:["".concat(b)],defaultSubmenuActives:["".concat(b)],defaultActives:["".concat(b,"/").concat(y)],children:null===n||void 0===n?void 0:n.map((function(e,t){var n;return(null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n.length)>0?Object(r.jsx)(pe.a.SubMenu,{index:"".concat(e.pid),title:k(e),onClick:x,children:e.children.map((function(t,n){return Object(r.jsx)(pe.a.Item,{index:"".concat(e.pid,"/").concat(t.pid),onClick:x,children:M(t)},n)}))},t):Object(r.jsx)(pe.a.Item,{index:"".concat(e.pid,"/all"),onClick:x,children:k(e)},t)}))})};return Object(r.jsx)(he.a,{className:"".concat(be.a.container," ").concat(be.a.verticalScrollbar),style:{background:"#fff",overflowY:"auto",maxHeight:(null===N||void 0===N?void 0:N.innerHeight)-95||"600px"},bordered:!1,children:null!==n&&void 0!==n&&n.length?Object(r.jsx)(C,{}):Object(r.jsx)(me.a,{isBox:!0,isError:p,errorText:v,noMore:0===(null===n||void 0===n?void 0:n.length),loadingText:"\u6b63\u5728\u52a0\u8f7d",noMoreText:"\u6682\u65e0\u6570\u636e"})})},Oe=g.a.memo(ye),ge=n("7BN5"),xe=n("Wpw2"),Pe=n("wXCO"),we=n("sho3"),Ne=(n("1RP4"),n("KmGp"));function Se(){return Object(r.jsx)(G.a,{showRefresh:!1,className:"home",noHeader:!0,left:function(){return Object(r.jsx)("div",{style:{width:"100%"},children:Object(r.jsxs)("div",{className:Ne.a.leftPlaceholder,children:[Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content})]})})},right:function(){return Object(r.jsx)("div",{style:{width:"100%"},children:Object(r.jsxs)("div",{className:Ne.a.rightPlaceholder,children:[Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content})]})})},children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsxs)("div",{className:Ne.a.placeholder,children:[Object(r.jsxs)("div",{className:Ne.a.header,children:[Object(r.jsx)("div",{className:Ne.a.avatar}),Object(r.jsx)("div",{className:Ne.a.box})]}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsxs)("div",{className:Ne.a.footer,children:[Object(r.jsx)("div",{className:Ne.a.box}),Object(r.jsx)("div",{className:Ne.a.box}),Object(r.jsx)("div",{className:Ne.a.box})]})]}),Object(r.jsxs)("div",{className:Ne.a.placeholder,children:[Object(r.jsxs)("div",{className:Ne.a.header,children:[Object(r.jsx)("div",{className:Ne.a.avatar}),Object(r.jsx)("div",{className:Ne.a.box})]}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsx)("div",{className:Ne.a.content}),Object(r.jsxs)("div",{className:Ne.a.footer,children:[Object(r.jsx)("div",{className:Ne.a.box}),Object(r.jsx)("div",{className:Ne.a.box}),Object(r.jsx)("div",{className:Ne.a.box})]})]})]})})}var Ie,ke=n("QcND");function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j()(this,n)}}var Re,_e=X()((function(){return Promise.all([n.e(0),n.e(5),n.e(6),n.e(2),n.e(89)]).then(n.bind(null,"aPxr"))}),{loading:function(e){return Object(r.jsx)("div",{style:{width:"100%",maxWidth:"1420px"},children:Object(r.jsx)(re,{data:e,style:{padding:"0 0 20px"},loadComponent:Object(r.jsx)(Se,{})})})},loadableGenerated:{webpack:function(){return["aPxr"]},modules:["./components/dynamic-vlist"]}}),Te=Object(x.c)("site")(Ie=Object(x.c)("user")(Ie=Object(x.c)("index")(Ie=Object(x.d)(Ie=function(e){h()(n,e);var t=Ae(n);function n(e){var a,i,o,c;return d()(this,n),(c=t.call(this,e)).handleIntervalRequest=function(){var e,t=c.props.index.filter,n=t.essence,r=t.attention,a=t.sort,i=t.sequence,o=((null===(e=c.props.index)||void 0===e?void 0:e.threads)||{}).totalCount,s=void 0===o?-1:o,u=Object(z.e)(t,"types"),l=Object(z.e)(t,"categoryids");-1!==s&&Object(we.readThreadList)({params:{perPage:10,page:1,filter:{categoryids:l,types:u,essence:n,attention:r,sort:a},sequence:i}}).then((function(e){var t=((null===e||void 0===e?void 0:e.data)||{}).totalCount,n=(void 0===t?0:t)-s,r=c.state,a=r.conNum,i=void 0===a?0:a;r.visible;n>i&&c.setState({visible:!0,conNum:n})}))},c.onSearch=function(e){e&&c.props.router.push("/search?keyword=".concat(e||""))},c.onPullingUp=function(){var e,t,n,r=c.props.dispatch,a=void 0===r?function(){}:r;if(null!==(e=c.props.index)&&void 0!==e&&null!==(t=e.threads)&&void 0!==t&&null!==(n=t.pageData)&&void 0!==n&&n.length)return a("moreData")},c.onFilterClick=function(e){var t=e.sequence,n=e.filter,r=n.types,a=n.sort,i=n.essence,o=n.attention;c.changeFilter({types:r,sort:a,essence:i,attention:o,sequence:t})},c.onNavigationClick=function(e){var t=e.categoryIds,n=c.props.index.categories||[],r=t[0],a=Object(z.d)(n,r);c.changeFilter({categoryids:a})},c.changeFilter=function(e){var t=c.props,n=t.index,r=t.dispatch,a=void 0===r?function(){}:r;if(e){var i=Ce(Ce({},n.filter),e);n.setFilter(i)}a("click-filter"),c.setState({visible:!1})},c.goRefresh=function(){var e=c.props.dispatch;(void 0===e?function(){}:e)("refresh-thread").then((function(e){c.setState({visible:!1,conNum:0})}))},c.onPostThread=function(){c.props.canPublish()&&c.props.router.push("/thread/post")},c.renderLeft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=c.props.index,n=t.currentCategories,a=t.activeCategoryId,i=t.activeChildCategoryId,o=t.categoryError;return Object(r.jsx)("div",{className:de.a.indexLeft,children:Object(r.jsx)("div",{className:de.a.indexLeftBox,children:Object(r.jsx)(Oe,{categories:n,defaultFisrtIndex:a,defaultSecondIndex:i,totalThreads:e,onNavigationClick:c.onNavigationClick,isError:o.isError,errorText:o.errorText})})})},c.renderRight=function(e){return Object(r.jsxs)("div",{className:de.a.indexRight,children:[Object(r.jsx)(xe.a,{}),Object(r.jsx)("div",{className:de.a.indexRightCon,children:Object(r.jsx)(ge.a,{})}),Object(r.jsx)(Pe.a,{})]})},c.checkVideoPlay=Object(ie.a)((function(e,t){var n;null===(n=c.autoplay)||void 0===n||n.checkVideoPlay(e,t)}),1e3),c.checkVideoPlause=Object(ie.b)((function(){var e;null===(e=c.autoplay)||void 0===e||e.checkVideoPlause()}),50),c.handleScroll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startNum,n=e.stopNum;c.checkVideoPlause(),c.checkVideoPlay(t,n)},c.state={visible:!1,conNum:0,isShowDefault:c.checkIsOpenDefaultTab()},c.enabledVList=!0,c.timer=null,c.listRef=g.a.createRef(),c.onFilterClick=c.onFilterClick.bind(w()(c)),c.onPostThread=c.onPostThread.bind(w()(c)),c.goRefresh=c.goRefresh.bind(w()(c)),c.onPullingUp=c.onPullingUp.bind(w()(c)),c.renderLeft=c.renderLeft.bind(w()(c)),c.renderRight=c.renderRight.bind(w()(c)),((null===(a=c.props.site)||void 0===a||null===(i=a.webConfig)||void 0===i||null===(o=i.qcloud)||void 0===o?void 0:o.qcloudVodAutoPlay)||!1)&&(c.autoplay=new oe({platform:"pc"})),c}return p()(n,[{key:"componentDidMount",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.handleIntervalRequest()}),3e4)}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"checkIsOpenDefaultTab",value:function(){return this.props.site.checkSiteIsOpenDefautlThreadListData()}},{key:"render",value:function(){var e,t=this.props,n=t.index,a=t.site,i=((null===a||void 0===a||null===(e=a.webConfig)||void 0===e?void 0:e.other)||{}).countThreads,o=void 0===i?0:i,c=n.threads||{},s=c.currentPage,u=c.totalPage,l=n.threadError,d=this.state,f=d.visible,p=d.conNum,v=d.isShowDefault;return Object(r.jsx)(G.a,{onSearch:this.onSearch,onRefresh:this.onPullingUp,noMore:s>=u,onScroll:this.onScroll,quickScroll:!0,showRefresh:!1,left:this.renderLeft(o),right:this.renderRight(),pageName:"home",requestError:l.isError,errorText:l.errorText,className:"home",disabledList:this.enabledVList,onRefreshPlaceholder:this.onRefreshPlaceholder,children:Object(r.jsx)(_e,{indexStore:n,siteStore:a,onScroll:this.handleScroll,visible:f,conNum:p,noMore:s>=u,requestError:l.isError,errorText:l.errorText,isShowDefault:v,onFilterClick:this.onFilterClick,onPostThread:this.onPostThread,goRefresh:this.goRefresh,loadNextPage:this.onPullingUp,renderRight:this.renderRight,renderLeft:this.renderLeft,enabledVList:this.enabledVList})})}}]),n}(g.a.Component))||Ie)||Ie)||Ie)||Ie,Ee=Object(ke.a)(Object(V.withRouter)(Te)),De=n("J0pL"),Le=n("lY1M");function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j()(this,n)}}var Be=Object(x.c)("site")(Re=Object(x.c)("index")(Re=Object(x.c)("user")(Re=Object(x.c)("baselayout")(Re=Object(x.c)("vlist")(Re=Object(x.d)(Re=function(e){h()(n,e);var t=Ve(n);function n(e){var r;d()(this,n),(r=t.call(this,e)).state={categoryError:!1,categoryErrorText:""},r.page=1,r.prePage=10,r.handleRouterCategory=function(){var e=r.props,t=e.router,n=e.index,a=e.site,i=t.query||{},o=i.categoryId,c=void 0===o?"":o,s=i.sequence,u=void 0===s?"0":s;if(c||"0"!==u){var l,d,f=c.split("_").map((function(e){return/^\d+$/.test(e)?Number(e):e})).filter((function(e){return e}));"1"!==u||null!==(l=f)&&void 0!==l&&l.length||"h5"!==a.platform||(f=["default"]),-1!==f.indexOf("default")&&"0"===u&&"h5"===a.platform&&(u="1"),null!==(d=f)&&void 0!==d&&d.length||"pc"!==a.platform||(f=["all"]),"0"!==u&&"pc"===a.platform&&(n.topMenuIndex="".concat(u));var p=We(We({},n.filter),{},{categoryids:f,sequence:u});n.setFilter(p)}else{var v=n.filter||{},h=v.categoryids,b=v.sequence;r.setUrl(h,b)}},r.setUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null!==e&&void 0!==e&&e.length||0!==t?"/?categoryId=".concat(e.join("_"),"&sequence=").concat(t):"/";r.props.router.replace(n)},r.dispatch=function(){var e=c()(i.a.mark((function e(t){var n,a,o,c,s,u,l,d,f,p,v,h,b,j,m,y=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=y.length>1&&void 0!==y[1]?y[1]:{},c=r.props.index,s=We(We({},c.filter),o),u=s.essence,l=s.sequence,d=s.attention,f=s.sort,p=s.page,v=Object(z.e)(s,"types"),h=Object(z.e)(s,"categoryids"),null!==(n=r.props.index)&&void 0!==n&&null!==(a=n.threadError)&&void 0!==a&&a.isError&&(r.props.index.threadError={isError:!1,errorText:""}),"click-filter"!==t){e.next=16;break}return r.setUrl(h,l),r.page=1,r.props.baselayout.setJumpingToTop(),r.props.vlist.setPosition(0),e.next=14,c.screenData({filter:{categoryids:h,types:v,essence:u,attention:d,sort:f},sequence:l,page:r.page});case 14:e.next=43;break;case 16:if("moreData"!==t){e.next=29;break}if(b=r.props.index.threads||{},j=b.currentPage,m=void 0===j?0:j,r.page+=1,!(m<r.page)){e.next=25;break}return e.next=22,c.getReadThreadList({perPage:r.prePage,page:r.page,filter:{categoryids:h,types:v,essence:u,attention:d,sort:f},sequence:l});case 22:return e.abrupt("return",e.sent);case 25:return r.page=m,e.abrupt("return",Promise.resolve());case 27:e.next=43;break;case 29:if("refresh-recommend"!==t){e.next=34;break}return e.next=32,c.getRecommends({categoryIds:h});case 32:e.next=43;break;case 34:if("update-page"!==t){e.next=38;break}r.page=p,e.next=43;break;case 38:if("refresh-thread"!==t){e.next=43;break}return r.page=1,e.next=42,c.getReadThreadList({filter:{categoryids:h,types:v,essence:u,attention:d,sort:f},sequence:l,page:r.page});case 42:return e.abrupt("return",e.sent);case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var a=r.props;a.serverIndex,a.index;return r}return p()(n,[{key:"componentDidMount",value:function(){this.handleRouterCategory();var e=this.props.index,t=e.filter,n=t.essence,r=void 0===n?0:n,a=t.sequence,i=void 0===a?0:a,o=t.attention,c=void 0===o?0:o,s=t.sort,u=void 0===s?1:s,l=Object(z.e)(e.filter,"types"),d=Object(z.e)(e.filter,"categoryids"),f=!!e.categories,p=!!e.sticks,v=!!e.threads;f||this.props.index.getReadCategories(),p||this.props.index.getRreadStickList(d),v?this.page=e.threads.currentPage||1:this.props.index.getReadThreadList({sequence:i,filter:{categoryids:d,types:l,essence:r,attention:c,sort:u}})}},{key:"render",value:function(){var e=(this.props.index||{}).categoryName,t=void 0===e?"":e,n=(this.props.site.webConfig||{}).setSite,a=(n=void 0===n?{}:n).siteTitle;return Object(r.jsx)(De.a,{h5:Object(r.jsx)(le,{dispatch:this.dispatch}),pc:Object(r.jsx)(Ee,{dispatch:this.dispatch}),title:t||a||""})}}]),n}(g.a.Component))||Re)||Re)||Re)||Re)||Re)||Re;t.default=Object(ke.a)(Be,(function(e){if(!Object(je.a)()&&!Le.b.env("uc")){var t=window.location.pathname;return"/"===t||"/index"===t}return e}))},guqU:function(e,t,n){"use strict";var r=n("TqRt"),a=n("cDf5");n("4mDm"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.MenuWebLayout=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),c=r(n("PJYZ")),s=r(n("7W2i")),u=r(n("a1gu")),l=r(n("Nsbk")),d=r(n("lSNA")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),p=n("VTYn"),v=r(n("TSYQ")),h=n("Z36A");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=j(n);function n(e){var r,a,o;(0,i.default)(this,n),o=t.call(this,e);var s,u,l=new Set,d=new Set,f=null!==e&&void 0!==e&&null!==(r=e.defaultSubmenuActives)&&void 0!==r&&r.length?e.defaultSubmenuActives[0]:h.INITIAL_VALUE,p=null!==e&&void 0!==e&&null!==(a=e.defaultActives)&&void 0!==a&&a.length?e.defaultActives[0]:h.INITIAL_VALUE;e.multiple&&((null===e||void 0===e||null===(s=e.defaultSubmenuActives)||void 0===s?void 0:s.length)&&(l=new Set(e.defaultSubmenuActives)),(null===e||void 0===e||null===(u=e.defaultActives)||void 0===u?void 0:u.length)&&(d=new Set(e.defaultActives)));return o.state={hoverSubMenuIndex:h.INITIAL_VALUE,setHoverSubMenuIndex:o.setHoverSubMenuIndex.bind((0,c.default)(o)),currentActiveSubMenuIndex:f,setCurrentActiveSubMenuIndex:o.setCurrentActiveSubMenuIndex.bind((0,c.default)(o)),currentActiveItemIndex:p,setCurrentActiveItemIndex:o.setCurrentActiveItemIndex.bind((0,c.default)(o)),uniqueOpened:e.uniqueOpened,mode:e.mode,menuTrigger:e.menuTrigger,multiple:e.multiple,currentActiveSubMenuIndexSet:l,currentActiveItemIndexSet:d,setCurrentActiveSubMenuIndexSet:o.setCurrentActiveSubMenuIndexSet.bind((0,c.default)(o)),setCurrentActiveItemIndexSet:o.setCurrentActiveItemIndexSet.bind((0,c.default)(o)),defaultOpeneds:e.defaultOpeneds},o}return(0,o.default)(n,[{key:"setHoverSubMenuIndex",value:function(e){this.setState({hoverSubMenuIndex:e})}},{key:"setCurrentActiveSubMenuIndex",value:function(e){this.setState({currentActiveSubMenuIndex:e})}},{key:"setCurrentActiveItemIndex",value:function(e){this.setState({currentActiveItemIndex:e})}},{key:"setCurrentActiveItemIndexSet",value:function(e){this.setState({currentActiveItemIndexSet:e})}},{key:"setCurrentActiveSubMenuIndexSet",value:function(e){this.setState({currentActiveSubMenuIndexSet:e})}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.mode,a=this.context.clsPrefix,i="".concat(a,"-menu"),o=(0,v.default)(i,n,(0,d.default)({},"".concat(i,"--horizontal"),"horizontal"===r));return f.default.createElement("ul",{className:o,style:t},f.default.createElement(h.MenuContext.Provider,{value:this.state},this.props.children))}}]),n}(f.Component);t.MenuWebLayout=m,(0,d.default)(m,"contextType",p.ConfigContext)},i6QF:function(e,t,n){n("I+eb")({target:"Number",stat:!0},{isInteger:n("Xol8")})},iJNd:function(e,t,n){"use strict";var r=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.CardWebLayout=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("lSNA")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),f=n("VTYn"),p=r(n("TSYQ"));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,r=e.bordered,a=this.context.clsPrefix,i="".concat(a,"-card"),o=(0,p.default)(i,t,(0,l.default)({},"".concat(i,"--border"),r));return d.default.createElement("div",{style:n,className:o},this.props.header&&d.default.createElement("div",{className:(0,p.default)("".concat(i,"__header"),this.props.fullHeader&&"".concat(i,"__header--full"))},this.props.header),d.default.createElement("div",{className:(0,p.default)("".concat(i,"__body"),this.props.fullBody&&"".concat(i,"__body--full"))},this.props.children),this.props.footer&&d.default.createElement("div",{className:(0,p.default)("".concat(i,"__footer"),this.props.fullFooter&&"".concat(i,"__footer--full"))},this.props.footer))}}]),n}(d.Component);t.CardWebLayout=b,(0,l.default)(b,"contextType",f.ConfigContext)},iehV:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s}));n("TeQF"),n("QWBl"),n("+2oP"),n("sMBO"),n("FZtP");var r=n("pGE/"),a=function(e,t){if(!u(e,t)){var n=t[0];if("all"!==n){var r="";return e.forEach((function(e){var t;"".concat(e.pid)==="".concat(n)?r=e.name:null!==(t=e.children)&&void 0!==t&&t.length&&e.children.forEach((function(e){"".concat(e.pid)==="".concat(n)&&(r=e.name)}))})),r}}return""},i=function(e,t){if(null===e||void 0===e||!e.length)return[];var n=e.slice(),r=e.filter((function(e){return"default"===e.pid}));return t&&!r.length&&n.unshift({name:"\u63a8\u8350",pid:"default",children:[]}),e.filter((function(e){return"all"===e.pid})).length||n.unshift({name:"\u5168\u90e8",pid:"all",children:[]}),n},o=function(e,t){var n="all";if(u(e,t))return["all",n];var r=t[0],a=l(r);return(null===t||void 0===t?void 0:t.length)>1||""===a||e.forEach((function(e){var t;if(null!==(t=e.children)&&void 0!==t&&t.length){var i=e.children.filter((function(e){return"".concat(e.pid)==="".concat(a)}));i.length&&(r=e.pid,n=i[0].pid)}})),[r,n]},c=function(e,t){var n,r;if(""===l(t))return[t];var a,i,o=[t],c=e.filter((function(e){return"".concat(e.pid)==="".concat(t)}));null!==c&&void 0!==c&&c.length&&null!==(n=c[0])&&void 0!==n&&null!==(r=n.children)&&void 0!==r&&r.length&&(null===(a=c[0])||void 0===a||null===(i=a.children)||void 0===i||i.forEach((function(e){o.push(e.pid)})));return o},s=function(e,t){var n;if(r.a.isObject(e)&&e[t]){var a=e[t],i=[];return a&&(i=a instanceof Array?a:[a]),(null===(n=i)||void 0===n?void 0:n.filter((function(e){return"all"!==e&&"default"!==e&&""!==e})))||[]}},u=function(e,t){return r.a.isArray(e)&&(null===e||void 0===e?void 0:e.length)&&r.a.isArray(t)&&(null===t||void 0===t?void 0:t.length)},l=function(e){return"all"===e||"default"===e?"":e}},jJu3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("PYyG").SubMenuWebAdapter}});t.SubMenuLogicalAdapter=r},jwwS:function(e,t,n){"use strict";var r;t.__esModule=!0,t.LoadableContext=void 0;var a=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext(null);t.LoadableContext=a},kSko:function(e,t,n){n("I+eb")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},lOmP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemGroupViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("Unay").MenuItemGroupWebLayout}});t.MenuItemGroupViewAdapter=r},vqe8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("X+na").SubMenuWebLayout}});t.SubMenuViewAdapter=r},y4MR:function(e,t,n){"use strict";n("ma9I"),n("2B1R"),n("+2oP");var r=n("nKUr"),a=(n("q1tI"),n("20a2")),i=n("YLMC"),o=n("36W7");n("Q6w4"),n("5WlO");t.a=Object(a.withRouter)((function(e){var t=e.data,n=void 0===t?[]:t,a=e.router,c=e.platform,s=void 0===c?"h5":c,u=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.threadId,r=arguments.length>1?arguments[1]:void 0;"a"!==(null===r||void 0===r||null===(e=r.target)||void 0===e?void 0:e.localName)&&a.push("/thread/".concat(n))};return Object(r.jsx)("div",{className:"".concat(i.a.list," top-news"),children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(r.jsxs)("div",{className:"top-news-item ".concat(i.a.item," ").concat("pc"===s?i.a.itemPC:i.a.itemH5),onClick:function(){return u(e)},children:[Object(r.jsx)("div",{className:i.a.prefix,children:e.prefix||"\u7f6e\u9876"}),!1,Object(r.jsx)("div",{className:i.a.title,children:Object(r.jsx)(o.a,{onClick:function(t){return u(e,t)},className:i.a.richText,content:e.title})})]},t)}))})}))}},[["H0SL",1,0,3,4,8,2]]]);