(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[85],{"5qfE":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return N}));r("ma9I");var n,o,i,a=r("nKUr"),c=r("lwsE"),s=r.n(c),u=r("W8MJ"),l=r.n(u),d=r("7W2i"),f=r.n(d),h=r("a1gu"),v=r.n(h),p=r("Nsbk"),x=r.n(p),g=r("q1tI"),w=r.n(g),j=(r("07d7"),r("5s+n"),r("p532"),r("R5XZ"),r("RIqP")),b=r.n(j),y=(r("Xpby"),r("L8Lu")),m=r("0w0X"),O=r("HUxe"),R=r("c7k8"),H=r("kMSe"),k=r("HkP4"),C={},I=0;var M=!1;function S(e,t){var r,c,s,u,l=e.vlist.cache;l||(l=new R.c({fixedWidth:!0,show:!1}),(u=l).getDefaultHeight=function(e){var t=e.index,r=e.data;if(!r)return 0;var n=Object(O.a)(r);return C[t]=n,n+0+10},u.rowHeight=function(e){var t=e.index,r=e.data,n=u._keyMapper(t,0);return void 0!==u._rowHeightCache[n]?u._rowHeightCache[n]:u.getDefaultHeight({index:t,data:r})},e.vlist.setCache(l));var d=Object(g.useState)([{type:"header"}].concat(b()(e.list||[]),[{type:"footer"}])),f=d[0],h=d[1],v=Object(g.useRef)(null),p=f.length,x=Object(g.useState)(!0),w=x[0],j=x[1],H=Object(g.useState)(0),S=H[0],T=H[1],P=window.innerHeight;Object(g.useEffect)((function(){h([{type:"header"}].concat(b()(e.list||[]),[{type:"footer"}]))}),[null===(r=e.list)||void 0===r?void 0:r.length]),Object(g.useEffect)((function(){E(0)}),[e.sticks]),Object(g.useEffect)((function(){v&&v.scrollToPosition(e.vlist.home||0)}),[null===(c=v)||void 0===c||null===(s=c.Grid)||void 0===s?void 0:s.getTotalRowsHeight()]);var E=function(e,t){var r;t&&(f[e]=t),null===(r=v)||void 0===r||r.recomputeRowHeights(e)},N=function(t){var r=t.index,n=f[r];return n?"header"===n.type?229+Object(O.b)(e.sticks):"footer"===n.type?f.length<=2?P-230-65+10:131:l.rowHeight({index:r,data:n}):0},_=function(t,r,n,o){var i=o.index;o.key,o.parent,o.style;switch(t){case"header":return e.children;case"footer":return Object(a.jsx)(m.a,{noMore:e.noMore,isError:e.requestError,errorText:e.errorText,type:"line",platform:e.platform,copyright:!0});default:return Object(a.jsx)(y.a,{data:r,isLast:i===(null===f||void 0===f?void 0:f.length)-2,measure:n,recomputeRowHeights:function(e){return E(i,e)}})}},q=function(e){var t=e.index,r=e.key,n=e.parent,o=e.style,i=f[t];return i?Object(a.jsx)(R.b,{cache:l,columnIndex:0,rowIndex:t,parent:n,children:function(e){var c=e.measure,s=e.registerChild;return Object(a.jsx)("div",{ref:s,style:o,"data-index":t,"data-key":r,"data-id":i.threadId,"data-height":C[t],children:_(i.type,i,w?c:function(){},{index:t,key:r,parent:n,style:o})},r)}},r):""},D=function(t){var r=t.scrollTop,a=t.clientHeight,c=t.scrollHeight;if(T(r),j(!(r<I)),I=r,clearTimeout(n),n=setTimeout((function(){j(!0)}),100),e.onScroll&&e.onScroll({scrollTop:r,clientHeight:a,scrollHeight:c,startNum:o,stopNum:i}),0!==r&&e.vlist.setPosition(r),r+a+1e3>=c&&!M&&!e.noMore&&(M=!0,e.loadNextPage)){var s=e.loadNextPage();s?s.finally((function(){M=!1})):M=!1}},L=function(e){var t=e.cellCount,r=e.scrollDirection,n=e.overscanCellsCount,a=e.startIndex,c=e.stopIndex;return o=a,i=c,-1===r?{overscanStartIndex:Math.max(0,a),overscanStopIndex:Math.min(t-1,c+n)}:{overscanStartIndex:Math.max(0,a-n),overscanStopIndex:Math.min(t-1,c)}};return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(R.d,{isRowLoaded:function(e){var t=e.index;return!!f[t]},loadMoreRows:function(){return Promise.resolve()},rowCount:p,children:function(e){var t=e.onRowsRendered,r=e.registerChild;return Object(a.jsx)(R.a,{className:"list",children:function(e){var n=e.height,o=e.width;return Object(a.jsx)(R.e,{ref:function(e){v=e,r(e)},onScroll:D,deferredMeasurementCache:l,height:n,overscanRowCount:20,onRowsRendered:function(){t.apply(void 0,arguments)},rowCount:p,rowHeight:N,rowRenderer:q,width:o,overscanIndicesGetter:L})}})}}),S>2*P&&Object(a.jsx)(k.a,{showTabBar:e.showTabBar,h5:!0,onClick:function(){v&&v.scrollToPosition(0),e.vlist.setPosition(0)}})]})}var T=Object(H.c)("vlist")(Object(H.d)(Object(g.forwardRef)(S))),P=r("z/8X");function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x()(e);if(t){var o=x()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}var N=function(e){f()(r,e);var t=E(r);function r(e){return s()(this,r),t.call(this,e)}return l()(r,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.pageData,n=e.sticks,o=e.onScroll,i=e.loadNextPage,c=e.noMore,s=e.requestError,u=e.errorText,l=e.platform;return Object(a.jsx)(T,{showTabBar:!0,list:r,sticks:n,onScroll:o,loadNextPage:i,noMore:c,requestError:s,errorText:u,platform:l,renderItem:function(e,t,r,n,o){return Object(a.jsx)(P.a,{onContentHeightChange:o,onImageReady:o,onVideoReady:o,data:e,recomputeRowHeights:o},"".concat(e.threadId,"-").concat(e.updatedAt))},children:t})}}]),r}(w.a.Component)}}]);